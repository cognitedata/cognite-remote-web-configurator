{"version":3,"sources":["userInterface/util/Interfaces/CommandEvent.ts","validator/interfaces/IValidationResult.ts","validator/enum/DataType.enum.ts","validator/nodes/BaseNode.ts","core/CogniteJsonEditor.ts","userInterface/util/enums/MergeModes.ts","validator/nodes/MapNode.ts","validator/nodes/ArrayNode.ts","validator/nodes/ObjectNode.ts","constants.ts","validator/enum/DataFormat.enum.ts","validator/util/Helper.ts","validator/SchemaValidator.ts","validator/nodes/BooleanNode.ts","validator/nodes/NumberNode.ts","validator/nodes/StringNode.ts","validator/util/Parsers.ts","validator/util/NodeFactory.ts","validator/SchemaResolver.ts","core/CogniteJsonEditorOptions.ts","cdf/client.ts","core/DigitalTwinApi.ts","config/twinconfig.yaml","core/JsonConfigCommandCenter.ts","userInterface/util/enums/Modes.ts","userInterface/components/CommandItem/CommandItem.tsx","userInterface/panels/CommandPanel/CommandPanel.tsx","userInterface/components/FileUploader/FileUploader.tsx","userInterface/components/ConfigSelector/ConfigSelector.tsx","userInterface/panels/SideNavPanel/SideNavPanel.tsx","assets/cognite.png","userInterface/components/JsonEditorContainer/JsonEditorContainer.tsx","userInterface/components/DiffMerge/DiffMerge.tsx","userInterface/panels/JsonConfigurator/JsonConfigurator.tsx","userInterface/components/TenantLogin/TenantLogin.tsx","userInterface/App.tsx","reportWebVitals.ts","index.tsx","userInterface/panels/JsonConfigurator/JsonConfigurator.module.scss","userInterface/components/ConfigSelector/ConfigSelector.module.scss","userInterface/components/CommandItem/CommandItem.module.scss","userInterface/components/DiffMerge/DiffMerge.module.scss","userInterface/components/TenantLogin/TenantLogin.module.scss","userInterface/panels/CommandPanel/CommandPanel.module.scss","userInterface/panels/SideNavPanel/SideNavPanel.module.scss"],"names":["CommandEvent","ErrorType","DataType","AssociationType","CogniteJsonEditor","elm","options","json","JSONEditor","MergeModes","BaseNode","type","schema","data","isRequired","nullable","description","association","discriminator","example","subSchemas","_data","this","getAssociationType","allOf","ALLOF","oneOf","ONEOF","anyOf","ANYOF","not","NOT","NONE","result","mapping","keysForDiscriminatorTypes","Object","keys","entries","key","schemaPathSections","split","stringKeyForType","length","nodeObjectForType","SchemaResolver","getRootDataNode","typeIndicatorProperty","propertyName","possibleValues","JsonConfigCommandCenter","schemaErrors","push","MapNode","sampleData","map","minProperties","maxProperties","ArrayNode","array","minItems","maxItems","uniqueItems","ObjectNode","object","DataFormat","LOGIN_CDF_ENVIRONMENT_OPT_TEXT","LOGIN_API_KEY_TEXT","LOCALIZATION","SIDENAV_TITLE","SIDENAV_SUBTITLE","SIDENAV_UPLOAD","SIDENAV_CREATENEW","RETRIEVE_CONFIGS_FAIL","UNTITLED","INCONSISTENT_VALUE","DIFF_SUCCESS","DIFF_CANCEL","SAVE_TITLE","SAVE_CONTENT","SAVE_SUCCESS","SAVE_ERROR","SAVE_INVALID_FILE","SAVE_WITH_ERRORS_TITLE","SAVE_WITH_ERRORS_CONTENT","SAVE_WITHOUT_NAME_CONTENT","UPDATE_TITLE","UPDATE_CONTENT","UPDATE_SUCCESS","UPDATE_ERROR","UPDATE_INVALID_FILE","UPDATE_WITH_ERRORS_TITLE","UPDATE_WITH_ERRORS_CONTENT","UPDATE_WITHOUT_NAME_CONTENT","UPLOAD_WITH_ERRORS_TITLE","UPLOAD_WITH_ERRORS_CONTENT","DELETE_TITLE","DELETE_CONTENT","DELETE_SUCCESS","DELETE_ERROR","DELETE_INVALID_FILE","REFRESH_TITLE","REFRESH_CONTENT","REFRESH_SUCCESS","REFRESH_ERROR","SWITCH_TITLE","SWITCH_CONTENT","REMOVE_ENABLED","REMOVE_DISABLED","REMOVE_INVALID_PATH","REMOVE_MANDATORY","REMOVE_MINIMUM_LENGTH","FILE_UPLOAD_OK","FILE_UPLOAD_FAILED","SWITCHED_TO_DEFAULT","INVALID_SCHEMA","FILE_DELETED_IN_SERVER","SERVER_VERSION","LOCAL_VERSION","REQUIRED_FIELDS_NOT_AVAIL","REQUIRED_FIELD_NOT_AVAIL","DISCRIM_INVALID_TYPE","NOT_VALID_KEY","MAX_ARR_ELEMENTS_EXCEEDED","INVALID_MAX_ARR_ELEMENTS","MIN_ARR_ELEMENTS_NOT_FOUND","INVALID_MIN_ARR_ELEMENTS","INVALID_MAX_NO_KEY_PAIRS","INVALID_MIN_NO_KEY_PAIRS","VAL_NOT_BE_EMPTY","VAL_NOT_OF_POSSIBLE_VALS","VAL_NOT_NUMBER","VAL_CANNOT_BE_LESS","VAL_CANNOT_BE_GREATER","VAL_CANNOT_BE_BOOLEAN","VAL_CANNOT_BE_NUMBER","VAL_CANNOT_BE_STRING","VAL_CANNOT_BE_NULL","VAL_NOT_BOOLEAN","VAL_NOT_STRING","VAL_NOT_OBJECT","VAL_NOT_ARR","STRING_LENGTH_EXCEEDED","STRING_VIOLATES_PATTERN","ARR_ELEMENT_VIOLATES_UNIQUENESS","MergeText","diff","btnLeft","btnRight","txtLeft","txtRight","reload","reloadServerDeleted","save","saveServerDeleted","getNodeInstance","group","rootDataNode","rootJsonNode","paths","resultNode","path","nextResultNodeTypeFromData","subTypeInData","values","error","InvalidPath","resultData","getJson","getPrimitiveValue","obj","string","number","boolean","fillAllFields","dat","val","valNode","replaceString","str","replacement","replace","console","SchemaValidator","unresolvedSchema","schemaNode","properties","checkProperties","additionalProperties","$ref","items","BooleanNode","NumberNode","minimum","maximum","StringNode","maxLength","pattern","enum","ParseType","any","NodeFactory","addedRefs","subSchema","children","populateChildren","rowData","required","findIndex","s","getSampleObject","newSampleObj","assign","undefined","defaultGroup","rootJson","allNodes","root","resultParent","slice","RequiredNode","subTree","forEach","step","MinLength","node","sample","ymlJson","Promise","resolve","reject","propUniqueIdentifire","nodeFactory","components","schemas","validateUnresolvedSchema","SwaggerParser","validate","err","api","rootSchema","idSeparator","c","childrenNodes","key1","key2","val2","getSample","log","CogniteJsonEditorOptions","onchange","onChangeText","mode","modes","limitDragging","enableSort","enableTransform","indentation","escapeUnicode","onError","message","onValidate","schemaMeta","getNodeMeta","validateFields","onValidationError","errors","errorMap","Map","value","join","dataPath","valueArr","get","set","editorErrors","hasErrors","menuItems","currentJson","parentPath","pop","removePossibility","removeNode","item","text","click","submenu","createValidInsertMenu","className","title","pathString","has","filter","schemaMetaData","missingRequiredFields","validatedKeys","Set","schemaType","discriminatorErrors","validateDiscriminator","concat","isPlainObject","childKey","childValue","childPath","childMeta","isChildKeyRequired","hasKey","prototype","hasOwnProperty","call","add","childErrors","jsonChildKey","newPath","isArray","arrayValidationErrors","validateArray","noOfProperties","isNumber","toString","callNextIteration","mapChildKey","mapChild","i","valueErrors","validateValues","Number","elementCount","isNaN","shouldBeUnique","uniqueSet","index","itemPath","discriminatorType","discriminatorMeta","datatype","associationType","isOneOfPossibleValues","possibleVal","isBoolean","isString","regex","RegExp","matches","test","validInsertItems","getValidInsertItems","existingKeys","getPathObject","validMenuItems","subItem","includes","dataType","res","replaceKeyWithDiscriminatorTypes","subNode","subKey","templates","autocomplete","onCreateMenu","timestampTag","allTemplates","getAllNodes","ele","extractField","template","field","subVal","trigger","getOptions","input","editor","JSON","parse","getText","stringNode","Client","cogniteClient","sdk","CogniteClient","appId","DigitalTwinApi","jsonList","a","getBaseUrl","project","then","response","jsonConfigs","jsonConfigIdMap","jsonConfig","jsonConfigId","id","saveJson","post","updateJson","configId","deleteJson","onChange","parseYAMLFile","apiInstance","innerHTML","editorInstance","update","setMode","warn","currentJsonText","e","header","name","loadJsonConfigs","extractErrorMessage","onSaveAs","success","catch","onUpdate","selectedJsonConfigId","updatedConfig","onDelete","onDownload","stringify","fileName","currentFileName","blob","Blob","saveAs","onLoadSchema","createEditor","fetch","ymlFile","configFile","YAML","Modes","CommandItem","props","styles","commandBtn","size","icon","loading","onClick","confirm","Modal","getLatestConfiguration","configurationId","selectedJsonConfig","FileUploadStatus","CommandPanel","isUpdated","latestJsonConfig","originalJsonConfig","onReloadHandler","setRefreshing","isEdited","setMergeOptions","editedConfig","originalConfig","diffMode","onOk","mergedJson","commandEvent","onCancel","warning","classes","commandsContainer","errorPanel","errorItem","WarningTwoTone","twoToneColor","leftPanel","checkedChildren","unCheckedChildren","checked","evt","paste","default","titlePanel","titleText","rightPanel","btn","refreshing","content","ExclamationCircleTwoTone","download","delete","okType","ConfigSelector","jsonConfigMap","element","bordered","dataSource","renderItem","Item","jsonConfigItem","selected","onJsonConfigSelectHandler","FileUploader","useState","fileList","setFileList","settings","action","window","location","origin","accept","maxCount","info","file","status","Done","onUpload","Error","Removed","onRemove","SideNavPanel","ExclamationCircleOutlined","switchConfig","container","top","alt","src","logo","Text","strong","schemaUpload","reader","FileReader","originFileObj","onload","yamlObj","yaml","loadSchema","readAsText","createNewBtn","jsonConfigContainer","subtitle","JsonEditorContainer","jsonEditorElm","onUpdateJson","customSchema","updateCallBack","useRef","useEffect","current","currentConfig","setEditorText","ref","mergedJsonString","DiffMerge","differInstance","originalDeleted","mergeText","showPopup","setTimeout","differ","AceDiff","serverJson","diffGranularity","left","right","showDiffs","showConnectors","copyLinkEnabled","editable","getAceDiffOptions","visible","setShowMerge","width","footer","getEditors","getValue","onMerge","hidden","editorLblContainer","mergePrompt","errorMsg","isEqualConfigs","configA","configB","isEqual","JsonConfigurator","setJsonConfigMap","setSelectedJsonConfigId","setJsonConfig","setOriginalJsonConfig","setCustomSchema","setTitle","setIsEdited","showMerge","compareJsons","handleOkMerge","handleCancelMerge","onCommand","command","loadJsonConfigsAndReturnLatest","onModeChange","newConfig","mergeResult","updateEditorText","newJson","latestConfig","mergedConfig","newConfigJson","addEventListener","event","returnValue","editStatus","checkEditStatus","currentTitle","currentMode","getMode","updateTitle","configurator","sideNavPanel","fullEditor","editorCommandContainer","TenantLogin","advancedOptions","isLoginPopupWindow","loginPopupHandler","onFinish","cdfEnv","apiKey","setBaseUrl","savedToken","localStorage","getItem","loginWithApiKey","String","loginWithOAuth","accessToken","onAuthenticate","POPUP","onTokens","setItem","authenticate","login","user","onLogin","signedIn","loginContainer","client","onTenantSelected","onInvalidTenant","App","authOptions","auth","setSignIn","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.27ccbb43.chunk.js","sourcesContent":["export enum CommandEvent {\r\n    mode = \"mode\",\r\n    reload = 'reload',\r\n    switchConfig = \"switchConfig\",\r\n    saveAs = \"saveAs\",\r\n    update = \"update\",\r\n    delete = \"delete\",\r\n    download = \"download\",\r\n    refresh = \"refresh\",\r\n    diff = \"diff\",\r\n    loadSchema = \"loadSchema\"\r\n}\r\n","import { BaseNode } from \"../nodes/BaseNode\";\r\n\r\nexport enum ErrorType {\r\n    InvalidPath = 'InvalidPath',\r\n    RequiredNode = 'RequiredNode',\r\n    MinLength = 'MinLength'\r\n}\r\n\r\nexport interface IValidationError {\r\n    type: ErrorType;\r\n    text?: string;\r\n}\r\n\r\nexport interface IValidationResult {\r\n    group: string;\r\n    resultNode?: BaseNode | null;           // Affected node with meta data\r\n    resultData?: Record<string, unknown>    // Full result json after changes are affected\r\n    error?: IValidationError;               // If error occured\r\n}","export enum DataType {\r\n    any = \"any\",\r\n    string = \"string\",\r\n    number = \"number\",\r\n    boolean = \"boolean\",\r\n    object = \"object\",\r\n    array = \"array\",\r\n    map = \"map\"\r\n  }","import { JsonConfigCommandCenter } from \"../../core/JsonConfigCommandCenter\";\r\nimport { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { SchemaResolver } from \"../SchemaResolver\";\r\nimport { StringNode } from \"./StringNode\";\r\n\r\nexport type BaseNodes = { [key: string]: BaseNode };\r\nexport type IData =\r\n  | BaseNodes\r\n  | BaseNode[]\r\n  | string\r\n  | number\r\n  | boolean\r\n  | undefined;\r\nexport type Discriminator = {\r\n  mapping: { [key: string]: string };\r\n  propertyName: string;\r\n};\r\n\r\nexport enum AssociationType {\r\n  ALLOF, ONEOF, ANYOF, NOT, NONE\r\n}\r\n\r\nexport class BaseNode {\r\n  public type?: DataType;\r\n  public nullable?: boolean;\r\n  public description: string;\r\n  public isRequired?: boolean;\r\n  public association: AssociationType;\r\n  public discriminator?: Discriminator;\r\n  public example: any;\r\n  public subSchemas: BaseNode[] = [];\r\n  protected _data: IData;\r\n\r\n  constructor(\r\n    type: DataType,\r\n    schema: ISchemaNode,\r\n    data: IData,\r\n    isRequired: boolean\r\n  ) {\r\n    this.type = type;\r\n    this.description = schema.description;\r\n    this.discriminator = schema.discriminator;\r\n    this._data = data;\r\n    this.isRequired = isRequired;\r\n    this.example = schema.example;\r\n    this.nullable = schema.nullable;\r\n    this.association = this.getAssociationType(schema);  \r\n  }\r\n\r\n  /**\r\n   * Dicriminator:\r\n   * This method returns a object as {key(discriminator type): values{object related to that type}}\r\n   * But from CogniteJsonEditorOptions class, it dynamically get the type of json and replace this object with\r\n   * correct object type\r\n   */\r\n  public get data(): IData {\r\n    if (this.discriminator) {\r\n      const result: BaseNodes = {};\r\n      if (this.discriminator.mapping ) {\r\n        const keysForDiscriminatorTypes = Object.keys(this.discriminator.mapping);      \r\n\r\n        for (const [key, val] of Object.entries(this.discriminator.mapping)) {\r\n          const schemaPathSections = val.split(\"/\");\r\n\r\n          // Get node for specific type of dicriminator. It is the last section of the schemaPath array\r\n          const stringKeyForType = schemaPathSections[schemaPathSections.length - 1];\r\n          const nodeObjectForType = SchemaResolver.getRootDataNode()[stringKeyForType];\r\n\r\n          if(nodeObjectForType && nodeObjectForType._data instanceof Object){\r\n            const typeIndicatorProperty = (nodeObjectForType._data as BaseNodes)[this.discriminator.propertyName] as StringNode;\r\n          \r\n            // Change property values which are specific to discriminator type\r\n            typeIndicatorProperty.data = key;\r\n            typeIndicatorProperty.possibleValues = keysForDiscriminatorTypes;\r\n\r\n            result[key] = nodeObjectForType;\r\n          } else { \r\n            JsonConfigCommandCenter.schemaErrors.push(`Error occured while parsing schema. ${stringKeyForType} is not available`);\r\n          }\r\n        }\r\n      } else {\r\n        JsonConfigCommandCenter.schemaErrors.push(`Discriminator should comes with a mapping: ${this.description}`);\r\n      }\r\n      return result;\r\n    } else {\r\n      return this._data;\r\n    }\r\n  }\r\n\r\n  public set data(data: IData) {\r\n    this._data = data;\r\n  }\r\n\r\n  public get rowData(): IData {\r\n    return this._data;\r\n  }\r\n\r\n  private getAssociationType(schema: ISchemaNode) {\r\n    if(schema.allOf){\r\n      return AssociationType.ALLOF;\r\n    } \r\n    if(schema.oneOf){\r\n      return AssociationType.ONEOF\r\n    }\r\n    if(schema.anyOf){\r\n      return AssociationType.ANYOF;\r\n    }\r\n    if(schema.not){\r\n      return AssociationType.NOT\r\n    }\r\n    return AssociationType.NONE;\r\n  }\r\n}\r\n","import JSONEditor from \"jsoneditor\";\r\nimport { CogniteJsonEditorOptions } from \"./CogniteJsonEditorOptions\";\r\n\r\nexport class CogniteJsonEditor extends JSONEditor {\r\n\r\n    constructor(elm: HTMLElement, options: CogniteJsonEditorOptions, json?: any) {\r\n        super(elm, options.options, json);\r\n    }\r\n}\r\n","export enum MergeModes {\r\n    diff = 'diff',\r\n    reload = 'reload',\r\n    save = 'save',\r\n    reloadServerDeleted = 'reloadServerDeleted',\r\n    saveServerDeleted = 'saveServerDeleted'\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class MapNode extends BaseNode {\r\n  public sampleData: BaseNode | undefined;\r\n  public minProperties: number | undefined;\r\n  public maxProperties: number | undefined;\r\n\r\n  constructor(\r\n    schema: ISchemaNode,\r\n    data: IData,\r\n    isRequired: boolean,\r\n    sampleData: BaseNode | undefined\r\n  ) {\r\n    super(DataType.map, schema, data, isRequired);\r\n    this.sampleData = sampleData;\r\n    this.minProperties = schema.minProperties;\r\n    this.maxProperties = schema.maxProperties;\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class ArrayNode extends BaseNode {\r\n  public minItems?: number | undefined;\r\n  public maxItems?: number | undefined;\r\n  public sampleData: BaseNode | undefined;\r\n  public uniqueItems: boolean | undefined;\r\n\r\n  constructor(schema: ISchemaNode, data: IData, isRequired: boolean, sampleData?: BaseNode) {\r\n    super(DataType.array, schema, [], isRequired);\r\n    this.minItems = schema.minItems;\r\n    this.maxItems = schema.maxItems;\r\n    this._data = data;\r\n    this.sampleData = sampleData;\r\n    this.uniqueItems = schema.uniqueItems;\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class ObjectNode extends BaseNode {\r\n    constructor(schema: ISchemaNode, data: IData, isRequired: boolean){\r\n      super(DataType.object, schema, data, isRequired);\r\n    }\r\n  }","import { MergeModes } from \"./userInterface/util/enums/MergeModes\";\r\nexport const APP_NAME = \"Cognite Remote Configurator\";\r\nexport const LOGIN_HEADER = \"Enter Your Project Name\";\r\nexport const LOGIN_CDF_ENVIRONMENT_OPT_TEXT = \"cdfEnvironment\";\r\nexport const LOGIN_API_KEY_TEXT = \"apiKey\";\r\nexport const DEV_MODE = false;\r\nexport const USE_LOCAL_FILES_AND_NO_LOGIN = false;\r\nexport const STRING_PLACEHOLDER = \"$$\";\r\n\r\n// String Constants\r\nexport const LOCALIZATION = {\r\n\r\n    SIDENAV_TITLE:'Cognite Remote Configurator',\r\n    SIDENAV_SUBTITLE:'Configurations',\r\n    SIDENAV_UPLOAD:'Upload Custom Schema',\r\n    SIDENAV_CREATENEW:'Create New',\r\n\r\n    RETRIEVE_CONFIGS_FAIL: 'Unable to retrieve configurations! {{error}}',\r\n    UNTITLED: \"Untitled\",\r\n    INCONSISTENT_VALUE: 'Inconsistent value. Remove and insert it again to fill missing fields',\r\n\r\n    // Diff command\r\n    DIFF_SUCCESS: 'Changes Accepted',\r\n    DIFF_CANCEL: 'Cancelled',\r\n\r\n    // Save command\r\n    SAVE_TITLE: 'Create New Configuration',\r\n    SAVE_CONTENT: 'Do you want to save the new configuration?',\r\n    SAVE_SUCCESS: 'Configuration saved successfully!',\r\n    SAVE_ERROR: 'Save Cancelled! {{error}}',\r\n    SAVE_INVALID_FILE: 'Save Cancelled! Please add header -> name field',\r\n\r\n    SAVE_WITH_ERRORS_TITLE: 'Create New Configuration',\r\n    SAVE_WITH_ERRORS_CONTENT: 'Configuration contains errors! Are you sure you want to save this configuration?',\r\n    SAVE_WITHOUT_NAME_CONTENT: 'Configuration doesn\\'t contains a name! Are you sure you want to save this configuration without a name?',\r\n\r\n    // Update command\r\n    UPDATE_TITLE: 'Update Configuration',\r\n    UPDATE_CONTENT: 'Do you want to update the configuration with new changes?',\r\n    UPDATE_SUCCESS: 'Configuration updated successfully!',\r\n    UPDATE_ERROR: 'Update Cancelled! {{error}}',\r\n    UPDATE_INVALID_FILE: 'Update failed!',\r\n\r\n    UPDATE_WITH_ERRORS_TITLE: 'Update Configuration',\r\n    UPDATE_WITH_ERRORS_CONTENT: 'Configuration contains errors! Are you sure you want to update with new changes?',\r\n    UPDATE_WITHOUT_NAME_CONTENT: 'Configuration doesn\\'t contains a name! Are you sure you want to update this configuration without a name?',\r\n\r\n    UPLOAD_WITH_ERRORS_TITLE: 'Update Configuration',\r\n    UPLOAD_WITH_ERRORS_CONTENT: 'Configuration contains errors! Are you sure you want to update with new changes?',\r\n\r\n    // Delete command\r\n    DELETE_TITLE: 'Delete Configuration',\r\n    DELETE_CONTENT: 'Are you sure you want to permanently delete this configuration?',\r\n    DELETE_SUCCESS: 'Configuration deleted successfully!',\r\n    DELETE_ERROR: 'Delete Cancelled! {{error}}',\r\n    DELETE_INVALID_FILE: 'Delete Cancelled! Please select a configuration',\r\n\r\n    // Refresh Command\r\n    REFRESH_TITLE: 'Refresh Configuration',\r\n    REFRESH_CONTENT: 'Refreshing will fetch the latest version of this configuration from the server',\r\n    REFRESH_SUCCESS: 'Configuration updated successfully!',\r\n    REFRESH_ERROR: 'Refresh Cancelled! {{error}}',\r\n\r\n    // switch config\r\n    SWITCH_TITLE: 'Switch Config?',\r\n    SWITCH_CONTENT: 'You have some unsaved changes. Are you sure you want to switch without saving?',\r\n\r\n    // Remove item menu option\r\n    REMOVE_ENABLED: 'Remove this field',\r\n    REMOVE_DISABLED: 'Cannot Remove.',\r\n    REMOVE_INVALID_PATH: 'Remove this field. This field contains an invalid path',\r\n    REMOVE_MANDATORY: 'Cannot Remove. This field is mandatory',\r\n    REMOVE_MINIMUM_LENGTH: 'Cannot Remove. Array has a minimum length',\r\n\r\n    // File uploader\r\n    FILE_UPLOAD_OK: 'File Uploaded Successfully',\r\n    FILE_UPLOAD_FAILED: 'File Upload Failed',\r\n    SWITCHED_TO_DEFAULT: 'Switched to default Open Api Schema',\r\n    INVALID_SCHEMA: 'Invalid schema file',\r\n\r\n    // Diff View\r\n    FILE_DELETED_IN_SERVER: 'File Was Deleted In the Server!',\r\n    SERVER_VERSION: 'Server Version',\r\n    LOCAL_VERSION: 'Local Version',\r\n\r\n    // Validation\r\n    REQUIRED_FIELDS_NOT_AVAIL: \"Required fields: $$ not available in object\",\r\n    REQUIRED_FIELD_NOT_AVAIL: \"Required field: $$ not available!\",\r\n    DISCRIM_INVALID_TYPE: \"Required field: $$ does not have a valid type!\",\r\n    NOT_VALID_KEY: \"key: $$, is not a valid key!\",\r\n    MAX_ARR_ELEMENTS_EXCEEDED: \"Number of array elements cannot exceed $$ !\",\r\n    INVALID_MAX_ARR_ELEMENTS: \"Invalid maxElement configuration for $$ !\",\r\n    MIN_ARR_ELEMENTS_NOT_FOUND: \"Number of array elements cannot be lower than $$ !\",\r\n    INVALID_MIN_ARR_ELEMENTS: \"Invalid minElement configuration for $$ !\",\r\n    INVALID_MAX_NO_KEY_PAIRS: \"Number of key value pairs cannot exceed $$!\",\r\n    INVALID_MIN_NO_KEY_PAIRS: \"Number of key value pairs should exceed $$!\",\r\n    VAL_NOT_BE_EMPTY: \"Value cannot be empty!\",\r\n    VAL_NOT_OF_POSSIBLE_VALS: \"Value not one of the possible values!\",\r\n    VAL_NOT_NUMBER: \"Value is not a number!\",\r\n    VAL_CANNOT_BE_LESS: \"Value cannot be less than $$!\",\r\n    VAL_CANNOT_BE_GREATER: \"Value cannot be greater than $$!\",\r\n    VAL_CANNOT_BE_BOOLEAN: \"Value cannot be boolean!\",\r\n    VAL_CANNOT_BE_NUMBER: \"Value cannot be number!\",\r\n    VAL_CANNOT_BE_STRING: \"Value cannot be string!\",\r\n    VAL_CANNOT_BE_NULL: \"Value cannot be null!\",\r\n    VAL_NOT_BOOLEAN: \"Value is not a boolean!\",\r\n    VAL_NOT_STRING: \"Value is not a string!\",\r\n    VAL_NOT_OBJECT: \"Value is not an Object!\",\r\n    VAL_NOT_ARR: \"Value is not an Array!\",\r\n    STRING_LENGTH_EXCEEDED: \"String length cannot exceed $$ characters!\",\r\n    STRING_VIOLATES_PATTERN: \"String does not provide a match for pattern: $$!\",\r\n    ARR_ELEMENT_VIOLATES_UNIQUENESS: \"item: $$ violates array uniqueness constraint!\"\r\n}\r\n\r\nexport const MergeText = {\r\n    [MergeModes.diff]: {\r\n        btnLeft: 'Accept Original',\r\n        btnRight: 'Accept Edits',\r\n        txtLeft: 'Original',\r\n        txtRight: 'Edited',\r\n    },\r\n    [MergeModes.reload]: {\r\n        btnLeft: 'Accept Server Version',\r\n        btnRight: 'Accept Local Version',\r\n        txtLeft: LOCALIZATION.SERVER_VERSION,\r\n        txtRight: LOCALIZATION.LOCAL_VERSION,\r\n    },\r\n    [MergeModes.reloadServerDeleted]: {\r\n        btnLeft: '',\r\n        btnRight: 'Keep Local Changes',\r\n        txtLeft: LOCALIZATION.SERVER_VERSION,\r\n        txtRight: LOCALIZATION.LOCAL_VERSION,\r\n    },\r\n    [MergeModes.save]: {\r\n        btnLeft: 'Accept Server Version and Save',\r\n        btnRight: 'Accept Local Version and Save',\r\n        txtLeft: LOCALIZATION.SERVER_VERSION,\r\n        txtRight: LOCALIZATION.LOCAL_VERSION,\r\n    },\r\n    [MergeModes.saveServerDeleted]: {\r\n        btnLeft: '',\r\n        btnRight: 'Save As New Configuration',\r\n        txtLeft: LOCALIZATION.SERVER_VERSION,\r\n        txtRight: LOCALIZATION.LOCAL_VERSION,\r\n    }\r\n}\r\n","export enum DataFormat {\r\n    unspecified = \"unspecified\",\r\n    int32 = \"int32\",\r\n    int64 = \"int64\",\r\n    float = \"float\",\r\n    double = \"double\",\r\n  }","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ErrorType, IValidationResult } from \"../interfaces/IValidationResult\";\r\nimport { MapNode } from \"../nodes/MapNode\";\r\nimport { ArrayNode } from \"../nodes/ArrayNode\";\r\nimport { BaseNode, BaseNodes } from \"../nodes/BaseNode\";\r\nimport { ObjectNode } from \"../nodes/ObjectNode\";\r\nimport { STRING_PLACEHOLDER } from \"../../constants\";\r\n\r\nexport const removeDataNode = (\r\n  data: Record<string, unknown>,\r\n  paths: (string | number)[]\r\n): Record<string, unknown> => {\r\n  const obj: any = { ...data };\r\n  let next = obj;\r\n  for (let i = 0; i < paths.length; i++) {\r\n    if (i === paths.length - 1) {\r\n      delete next[paths[i]];\r\n      break;\r\n    }\r\n    next = next[paths[i]];\r\n  }\r\n  return obj;\r\n};\r\n\r\nexport const getNodeInstance = (\r\n  group: string,\r\n  rootDataNode: BaseNodes,\r\n  rootJsonNode: Record<string, unknown>,\r\n  paths: (string | number)[]\r\n): IValidationResult => {\r\n  let resultNode: BaseNode|undefined = rootDataNode[group];\r\n  let json = rootJsonNode;\r\n  // let nextResultNode;\r\n\r\n  for (const path of paths) {  \r\n    // Looping through node path\r\n\r\n    if (resultNode) {\r\n      // If discriminator, then get the relevant type\r\n      if(resultNode.discriminator && resultNode.data){\r\n        let nextResultNodeTypeFromData;\r\n        if(json){\r\n          //Try to obtain discriminator type from currentJson\r\n          const subTypeInData: any = json[resultNode.discriminator.propertyName];\r\n          nextResultNodeTypeFromData = (resultNode.data as BaseNodes)[subTypeInData];\r\n        }\r\n        resultNode = nextResultNodeTypeFromData ?? Object.values(resultNode.data)[0];\r\n      }\r\n    \r\n      // If AdditionalNode/ArrayNode, then get the nextNode from sample data\r\n      if (resultNode instanceof MapNode || resultNode instanceof ArrayNode) {\r\n        resultNode = resultNode.sampleData;\r\n      } else {\r\n      // Get the nextNode from path\r\n        resultNode = (resultNode?.data as BaseNodes)[path]; \r\n      }\r\n      \r\n      if (!resultNode) {\r\n        return {\r\n          group,\r\n          resultNode: null,\r\n          error: {\r\n            type: ErrorType.InvalidPath,\r\n          },\r\n        };\r\n      }\r\n    }\r\n\r\n    if(json){\r\n      json = json[path] as Record<string, unknown>;\r\n    }\r\n  }\r\n\r\n  const resultData = getJson(resultNode);\r\n  return { group, resultNode, resultData };\r\n};\r\n\r\nconst getPrimitiveValue = (obj: BaseNode | undefined) => {\r\n  switch (obj?.type) {\r\n    case DataType.string:\r\n      return obj.data ?? \"\";\r\n    case DataType.number:\r\n      return obj.data ?? 0;\r\n    case DataType.boolean:\r\n      return obj.data ?? false;\r\n    case DataType.object:\r\n    case DataType.map:\r\n      return {};\r\n    case DataType.array:\r\n      return [];\r\n\r\n    default:\r\n      return undefined;\r\n  }\r\n};\r\n\r\nexport const getJson = (obj: BaseNode | undefined, fillAllFields = false): any => {\r\n  /**\r\n   * If example json value found, then just return the provided example.\r\n   */\r\n  if(obj?.example){\r\n    return obj.example;\r\n  }\r\n\r\n  if (obj instanceof ArrayNode) {\r\n    return [];\r\n  } else if (obj instanceof ObjectNode) {\r\n    if (obj.data) {\r\n       const dat: any = {};\r\n       for (const [key, val] of Object.entries(obj.data)) {\r\n         const valNode = val as BaseNode;\r\n         if(!valNode.discriminator && (valNode.isRequired || fillAllFields)){\r\n           dat[key] = getJson(val);\r\n         }\r\n       }\r\n       return dat;\r\n     } else {\r\n       return getPrimitiveValue(obj);\r\n     }\r\n   }  // No need to handle MapNodes, since they are optional always \r\n    else {\r\n    return getPrimitiveValue(obj);\r\n  }\r\n};\r\n\r\n\r\nexport const replaceString = (str: string, replacement: string): string => {\r\n  if(str) {\r\n    return str.replace(STRING_PLACEHOLDER, replacement);\r\n  } else {\r\n    console.error(\"String replace value cannot be empty!\")\r\n    return \"\";\r\n  }\r\n}\r\n\r\n","import { JsonConfigCommandCenter } from \"../core/JsonConfigCommandCenter\";\r\nimport { ISchemaNode } from \"./interfaces/ISchemaNode\";\r\n\r\nexport class SchemaValidator {\r\n  public static validateUnresolvedSchema(unresolvedSchema: ISchemaNode) {\r\n    for (const val of Object.values(unresolvedSchema)) {\r\n      const schemaNode = val as ISchemaNode;\r\n\r\n      if (schemaNode.properties) {\r\n        this.checkProperties(schemaNode);\r\n      }\r\n\r\n      if (schemaNode.allOf) {\r\n        for (const val of schemaNode.allOf) {\r\n          this.checkProperties(val);\r\n        }\r\n      }\r\n\r\n      if (schemaNode.oneOf) {\r\n        for (const val of schemaNode.oneOf) {\r\n          this.checkProperties(val);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private static checkProperties(schemaNode: ISchemaNode) {\r\n    if (schemaNode.properties) {\r\n      for (const val of Object.values(schemaNode.properties)) {\r\n        if (val.properties) {\r\n          JsonConfigCommandCenter.schemaErrors.push(\r\n            `Nested types should comes with a ref: ${val.description}`\r\n          );\r\n        }\r\n        if (val.additionalProperties && !val.additionalProperties.$ref) {\r\n          JsonConfigCommandCenter.schemaErrors.push(\r\n            `additionalProperties should have a ref: ${val.description}`\r\n          );\r\n        }\r\n        if (val.items && val.items.properties) {\r\n          JsonConfigCommandCenter.schemaErrors.push(\r\n            `items of an object array should have a ref: ${val.description}`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class BooleanNode extends BaseNode {\r\n    constructor(schema: ISchemaNode, data: IData, isRequired: boolean){\r\n      super(DataType.boolean, schema, data, isRequired);\r\n    }\r\n  }","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class NumberNode extends BaseNode {\r\n  public minimum: number | undefined;\r\n  public maximum: number | undefined;\r\n\r\n  constructor(schema: ISchemaNode, data: IData, isRequired: boolean) {\r\n    super(DataType.number, schema, data, isRequired);\r\n    this.minimum = schema.minimum;\r\n    this.maximum = schema.maximum;\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class StringNode extends BaseNode {\r\n  public possibleValues: (string|null)[] | undefined;\r\n  public maxLength: number | undefined;\r\n  public pattern: string | undefined;\r\n\r\n  constructor(schema: ISchemaNode, data: IData, isRequired: boolean) {\r\n    super(DataType.string, schema, data, isRequired);\r\n    this.maxLength = schema.maxLength;\r\n    this.pattern = schema.pattern;\r\n    if (schema.enum) {\r\n      this.possibleValues = schema.enum;\r\n    }\r\n  }\r\n}\r\n","import { DataFormat } from \"../enum/DataFormat.enum\";\r\nimport { DataType } from \"../enum/DataType.enum\";\r\n\r\nexport const ParseType = (type: string): DataType => {\r\n  switch (type) {\r\n    case \"string\":\r\n      return DataType.string;\r\n    case \"number\":\r\n    case \"integer\":\r\n      return DataType.number;\r\n    case \"object\":\r\n      return DataType.object;\r\n    case \"boolean\":\r\n      return DataType.boolean;\r\n    case \"array\":\r\n      return DataType.array;\r\n    default:\r\n      return DataType.any;\r\n  }\r\n};\r\n\r\nexport const getDefaultPrimitiveVal = (type: string): any => {\r\n  switch (type) {\r\n    case \"string\":\r\n      return '';\r\n    case \"number\":\r\n    case \"integer\":\r\n      return 0;\r\n    case \"object\":\r\n      return {};\r\n    case \"boolean\":\r\n      return false;\r\n    case \"array\":\r\n      return [];\r\n    default:\r\n      return undefined;\r\n  }\r\n};\r\n\r\nexport const ParseFormat = (format: string): DataFormat => {\r\n  switch (format) {\r\n    case \"int32\":\r\n      return DataFormat.int32;\r\n    case \"int64\":\r\n      return DataFormat.int64;\r\n    case \"double\":\r\n      return DataFormat.double;\r\n    case \"float\":\r\n      return DataFormat.float;\r\n    default:\r\n      return DataFormat.unspecified;\r\n  }\r\n};\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { MapNode } from \"../nodes/MapNode\";\r\nimport { ArrayNode } from \"../nodes/ArrayNode\";\r\nimport { BaseNode, BaseNodes } from \"../nodes/BaseNode\";\r\nimport { BooleanNode } from \"../nodes/BooleanNode\";\r\nimport { NumberNode } from \"../nodes/NumberNode\";\r\nimport { ObjectNode } from \"../nodes/ObjectNode\";\r\nimport { StringNode } from \"../nodes/StringNode\";\r\nimport { ParseType } from \"./Parsers\";\r\n\r\n// To store previously populated children to avoid circular cycles\r\n\r\nexport class NodeFactory {\r\n  private addedRefs: any = {};\r\n\r\n  public populateChildren(\r\n    schema: ISchemaNode,\r\n    isRequired: boolean\r\n  ): BaseNode {\r\n    // Any part of the discriminator is not handled here. All are handled in `get Data` method of BaseNode\r\n\r\n    if (schema.not) {\r\n      return new BaseNode(ParseType(schema.not.type), schema, {}, isRequired);\r\n    } else if (schema.oneOf) {\r\n      // schema.oneOf is handled only if discriminator presents at schma,(Check BaseNode `get data()` implementation)\r\n      return new BaseNode(DataType.object, schema, {}, isRequired);\r\n    } else if (schema.allOf) {\r\n      const obj = new ObjectNode(schema, {}, isRequired);\r\n      let dat: any = {};\r\n\r\n      for (const subSchema of schema.allOf) {\r\n        const children = this.populateChildren(subSchema, isRequired);\r\n        if (children.rowData instanceof Object) {\r\n          dat = { ...dat, ...children.rowData };\r\n        }\r\n      }\r\n      obj.data = dat;\r\n      return obj;\r\n    } else if (schema.properties) {\r\n      const obj = new ObjectNode(schema, {}, isRequired);\r\n      for (const [key, subSchema] of Object.entries(schema.properties)) {\r\n        const required = schema.required\r\n          ? schema.required.findIndex((s) => s === key) !== -1\r\n          : false;\r\n\r\n        let children: BaseNode = this.getSampleObject(subSchema, required);\r\n\r\n        // If these children are previousy generated, then used the cached one to avoid causing to circular iterations\r\n        if (subSchema.description && this.addedRefs[subSchema.description]) {\r\n          // Create a clone from cached node(otherwise changes done in BaseNode will affect to other nodes)\r\n          const newSampleObj = this.getSampleObject(subSchema, required);\r\n          Object.assign(newSampleObj, this.addedRefs[subSchema.description]);\r\n          children = newSampleObj;\r\n        } else {\r\n          this.addedRefs[subSchema.description] = children;\r\n          Object.assign(children, this.populateChildren(subSchema, required));\r\n        }\r\n        // Since `{}` is passed as data for obj, type can be BaseNodes\r\n        (obj.rowData as BaseNodes)[key] = children;\r\n      }\r\n      return obj;\r\n\r\n      // MapNodes and ArrayNodes are handled in a similar way\r\n    } else if (schema.additionalProperties) {\r\n      const obj = new MapNode(schema, {}, false, undefined);\r\n      obj.sampleData = this.populateChildren(\r\n        schema.additionalProperties,\r\n        false\r\n      );\r\n      return obj;\r\n    } else if (schema.items) {\r\n      const obj = new ArrayNode(schema, [], isRequired, undefined);\r\n      obj.sampleData = this.populateChildren(schema.items, false);\r\n      return obj;\r\n    } else {\r\n      return this.getSampleObject(schema, isRequired);\r\n    }\r\n  }\r\n\r\n  public getSampleObject(schema: ISchemaNode, isRequired: boolean) {\r\n    if (schema.additionalProperties) {\r\n      return new MapNode(schema, {}, isRequired, undefined);\r\n    } else if (schema.items) {\r\n      return new ArrayNode(schema, [], isRequired);\r\n    }\r\n\r\n    switch (ParseType(schema.type)) {\r\n      case DataType.array:\r\n        return new ArrayNode(schema, [], isRequired);\r\n      case DataType.string:\r\n        return new StringNode(schema, \"\", isRequired);\r\n      case DataType.number:\r\n        return new NumberNode(schema, 0, isRequired);\r\n      case DataType.boolean:\r\n        return new BooleanNode(schema, false, isRequired);\r\n      case DataType.object:\r\n        return new ObjectNode(schema, {}, isRequired);\r\n      case DataType.map:\r\n        return new MapNode(schema, {}, isRequired, undefined);\r\n      default:\r\n        return new BaseNode(DataType.any, schema, {}, isRequired);\r\n    }\r\n  }\r\n}\r\n","import SwaggerParser from \"@apidevtools/swagger-parser\";\r\nimport { ISchemaNode } from \"./interfaces/ISchemaNode\";\r\nimport { ErrorType, IValidationResult } from \"./interfaces/IValidationResult\";\r\nimport { BaseNode } from \"./nodes/BaseNode\";\r\nimport { getJson, getNodeInstance } from \"./util/Helper\";\r\nimport { DataType } from \"./enum/DataType.enum\";\r\nimport { MapNode } from \"./nodes/MapNode\";\r\nimport { ArrayNode } from \"./nodes/ArrayNode\";\r\nimport { JsonConfigCommandCenter } from \"../core/JsonConfigCommandCenter\";\r\nimport { SchemaValidator } from \"./SchemaValidator\";\r\nimport { ITemplateNode } from \"./interfaces/ITemplateNode\";\r\nimport { NodeFactory } from \"./util/NodeFactory\";\r\nimport { IOpenApiSchema } from \"./interfaces/IOpenApiSchema\";\r\n\r\nconst defaultGroup = \"TwinConfiguration\"; \r\nexport class SchemaResolver {\r\n\r\n  public static idSeparator = '#####';\r\n  private static allNodes: ITemplateNode[] = [];\r\n  private static rootDataNode: { [key: string]: BaseNode } = {};\r\n\r\n  public static getNodeMeta(\r\n    paths: (string | number)[],\r\n    rootJson: any,\r\n    group: string = defaultGroup\r\n  ): IValidationResult {\r\n    return getNodeInstance(group, this.rootDataNode, rootJson, paths);\r\n  }\r\n\r\n  public static getRootDataNode() {\r\n    return this.rootDataNode\r\n  }\r\n\r\n  public static getAllNodes(): ITemplateNode[] {\r\n    return this.allNodes;\r\n  }\r\n\r\n  public static removeNode(\r\n    data: Record<string, unknown>,\r\n    paths: (string | number)[],\r\n    group: string = defaultGroup\r\n  ): IValidationResult {\r\n    const root = { ...this.rootDataNode };\r\n    // TODO: Can we avoid 2 calls to getNodeInstance\r\n    const result = getNodeInstance(group, root, data, paths);\r\n    const resultParent =\r\n      paths.length > 1\r\n        ? getNodeInstance(group, root, data, paths.slice(0, paths.length - 1))\r\n        : null;\r\n\r\n    if (!result.error) {\r\n      if (result.resultNode?.isRequired) {\r\n        return {\r\n          group,\r\n          error: {\r\n            type: ErrorType.RequiredNode,\r\n          },\r\n        };\r\n      } else {\r\n        if (\r\n          resultParent &&\r\n          resultParent.resultNode instanceof ArrayNode &&\r\n          resultParent.resultNode.minItems\r\n        ) {\r\n          let subTree = data;\r\n          paths.slice(0, paths.length - 1).forEach((step: number | string) => {\r\n            subTree = subTree[step] as Record<string, unknown>;\r\n          });\r\n\r\n          if (\r\n            ((subTree as unknown) as any[]).length <=\r\n            resultParent.resultNode.minItems\r\n          ) {\r\n            return {\r\n              group,\r\n              error: {\r\n                type: ErrorType.MinLength,\r\n              },\r\n            };\r\n          }\r\n        }\r\n\r\n        return {\r\n          group,\r\n          resultNode: null,\r\n        };\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private static getSample(node: BaseNode) {\r\n    if (node instanceof MapNode || node instanceof ArrayNode) {\r\n      const sample = node.sampleData;\r\n      const js = getJson(sample);\r\n      return js;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static parseYAMLFile(ymlJson: IOpenApiSchema) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n   \r\n      // Initialize static data before switch the schema\r\n      this.rootDataNode = {};\r\n      this.allNodes = [];\r\n\r\n      // propUniqueIdentifire is a counter which is used to make the description is unique for all schemaTypes.\r\n      // Otherwise schema types cannot be identified uniquely from allTemplates array\r\n      let propUniqueIdentifire = 0;\r\n\r\n      const nodeFactory = new NodeFactory();\r\n    \r\n      const unresolvedSchema = ymlJson.components.schemas;\r\n      SchemaValidator.validateUnresolvedSchema(unresolvedSchema);\r\n  \r\n      SwaggerParser.validate(ymlJson, (err, api) => {\r\n        if (api) {\r\n          const rootSchema = api.components.schemas;\r\n  \r\n          // Assign a unique identifire for all the property descriptions\r\n          for (const val of Object.values(rootSchema)) {\r\n            const schemaNode = val as ISchemaNode;\r\n            schemaNode.description = `${schemaNode.description}${this.idSeparator}${++propUniqueIdentifire}`;\r\n  \r\n            if (schemaNode.properties) {\r\n              for (const c of Object.values(schemaNode.properties)) {\r\n                c.description = `${c.description}${this.idSeparator}${++propUniqueIdentifire}`;\r\n              }\r\n            }\r\n          }\r\n  \r\n          for (const [key, val] of Object.entries(rootSchema)) {\r\n            const childrenNodes = nodeFactory.populateChildren(val as ISchemaNode, true);\r\n            this.rootDataNode[key] = childrenNodes;\r\n          }\r\n  \r\n          // Populate root nodes\r\n          for (const [key1, group] of Object.entries(this.rootDataNode)) {\r\n            if (group.data) {\r\n              for (const [key2, val2] of Object.entries(group.data)) {\r\n                if (group.type === DataType.object) {\r\n                  this.allNodes.push({\r\n                    key: key1 + \":\" + key2,\r\n                    node: val2,\r\n                    data: getJson(group, true)[key2],\r\n                    sample: SchemaResolver.getSample((group.data as any)[key2]), // Used only for Array, Map\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n          console.log(\"Schema YML\", rootSchema);\r\n          // console.log(\"Schema Node\", this.rootDataNode);\r\n          resolve(true);\r\n        } else {\r\n          JsonConfigCommandCenter.schemaErrors.push(\r\n            \"Configuration Schema has errors! Validations may not work as expected\"\r\n          );\r\n          console.error(err);\r\n          reject();\r\n        }\r\n      });\r\n    })\r\n  }\r\n}","import JSONEditor, {\r\n    AutoCompleteElementType,\r\n    JSONEditorMode,\r\n    JSONEditorOptions,\r\n    JSONPath,\r\n    MenuItem,\r\n    MenuItemNode,\r\n    ParseError,\r\n    SchemaValidationError,\r\n    ValidationError\r\n} from \"jsoneditor\";\r\nimport isBoolean from \"lodash-es/isBoolean\";\r\nimport isString from \"lodash-es/isString\";\r\nimport isPlainObject from \"lodash-es/isPlainObject\";\r\nimport isArray from \"lodash-es/isArray\";\r\nimport { SchemaResolver } from \"../validator/SchemaResolver\";\r\nimport isNumber from \"lodash-es/isNumber\";\r\nimport { ErrorType } from \"../validator/interfaces/IValidationResult\";\r\nimport { StringNode } from \"../validator/nodes/StringNode\";\r\nimport { JsonConfigCommandCenter } from \"./JsonConfigCommandCenter\";\r\nimport { MapNode } from \"../validator/nodes/MapNode\";\r\nimport { AssociationType, BaseNode, BaseNodes } from \"../validator/nodes/BaseNode\";\r\nimport { ArrayNode } from \"../validator/nodes/ArrayNode\";\r\nimport { DataType } from \"../validator/enum/DataType.enum\";\r\nimport { getJson, replaceString } from \"../validator/util/Helper\";\r\nimport message from 'antd/es/message';\r\nimport { LOCALIZATION } from '../constants'\r\nimport { JsonEditorOptions } from \"../userInterface/util/types\";\r\n\r\nconst extractField = (key: string) => {\r\n    return key.split(\":\")[1]\r\n}\r\n\r\nexport class CogniteJsonEditorOptions implements JSONEditorOptions {\r\n    public onChangeText: (text: string)=> void;\r\n\r\n    constructor(onchange: (text: string) => void) {\r\n        this.onChangeText = onchange;\r\n    }\r\n\r\n    public get options(): JsonEditorOptions {\r\n        return {\r\n            mode: this.mode,\r\n            // modes: this.modes,\r\n            templates: this.templates,\r\n            autocomplete: this.autocomplete,\r\n            enableSort: this.enableSort,\r\n            indentation: this.indentation,\r\n            escapeUnicode: this.escapeUnicode,\r\n            enableTransform: this.enableTransform,\r\n            onCreateMenu: ((menuItems: MenuItem[], node: MenuItemNode) => {\r\n                return this.onCreateMenu(menuItems, node);\r\n            }),\r\n            onValidate: this.onValidate,\r\n            onError: this.onError,\r\n            onValidationError: this.onValidationError,\r\n            onChangeText: this.onChangeText,\r\n            limitDragging: this.limitDragging,\r\n            timestampTag: false\r\n        }\r\n    }\r\n\r\n    public mode: \"tree\" | \"code\" | \"preview\" | undefined = 'tree';\r\n\r\n    public modes: JSONEditorMode[] = [\"tree\", \"code\"];\r\n\r\n    public limitDragging = true;\r\n\r\n    /**\r\n     * Create and return all possible templates for inserting\r\n     */\r\n    public get templates(): any {\r\n        const allTemplates: any = [];\r\n\r\n        // Here we handle all the add possibilities for each node\r\n        SchemaResolver.getAllNodes().forEach(ele => {\r\n            const key = extractField(ele.key);\r\n\r\n            // Handle: Add as a property of object\r\n            const template = {\r\n                text: key,\r\n                title: `${key}-${ele.node.description}`,\r\n                className: 'jsoneditor-type-object',\r\n                field: key,\r\n                value: ele.data\r\n            }\r\n            allTemplates.push(template);\r\n\r\n            // Handle: Add as an association type\r\n            if (ele.node.discriminator && ele.node.data) {\r\n                // If discriminator exists, add all sub types as templates\r\n                Object.entries(ele.node.data).forEach(([subKey, subVal]) => {\r\n                    const template = {\r\n                        text: `${key}-${subKey}`,\r\n                        title: `${key}-${subKey}-${subVal.description}`,\r\n                        className: \"jsoneditor-type-object\",\r\n                        field: `${key}`,\r\n                        value: getJson(subVal as BaseNode),\r\n                    };\r\n                    allTemplates.push(template);\r\n                });\r\n            }\r\n\r\n            // Handle: Add as sample object for array/map\r\n            if (ele.node instanceof ArrayNode || ele.node instanceof MapNode) {\r\n                // Handle: if sample object is associationType\r\n                if (ele.node.sampleData && ele.node.sampleData.discriminator) {\r\n                    // If discriminator exists, add all sub types as templates\r\n                    Object.entries(ele.node.sampleData.data as BaseNodes).forEach(([subKey, subVal]) => {\r\n                        const template = {\r\n                            text: `${key}-${subKey}`,\r\n                            title: `${key}-${subKey}-${subVal.description}`,\r\n                            className: \"jsoneditor-type-object\",\r\n                            field: `${key}-sample`,\r\n                            value: getJson(subVal as BaseNode),\r\n                        };\r\n                        allTemplates.push(template);\r\n                    });\r\n                    // Handle: add as a direct sample object\r\n                } else {\r\n                    const template = {\r\n                        text: `${key}-sample`,\r\n                        title: `${key}-sample-${ele.node.description}`,\r\n                        className: 'jsoneditor-type-object',\r\n                        field: `${key}-sample`,\r\n                        value: ele.sample\r\n                    }\r\n                    allTemplates.push(template);\r\n                }\r\n            }\r\n        });\r\n\r\n        return allTemplates;\r\n    }\r\n\r\n    // remove unwanted items from top Command Bar\r\n    public enableSort = false;\r\n    public enableTransform = false;\r\n\r\n    public indentation = 4;\r\n    public escapeUnicode = true;\r\n\r\n    public onCreateMenu(menuItems: MenuItem[], node: MenuItemNode): any[] {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        const path = node.path;\r\n        // get parent Path for add function\r\n        const parentPath: string[] = [...path];\r\n        // Skip case: adding first child\r\n        if (node.type !== \"append\") {\r\n            parentPath.pop();\r\n        }\r\n\r\n        const removePossibility = SchemaResolver.removeNode(currentJson, [...path]);\r\n\r\n        // Creating a new MenuItem array that only contains valid items\r\n        // and replace submenu with valid items\r\n        menuItems.forEach(item => {\r\n            if (item.text === \"Insert\") {\r\n                item.click = undefined;\r\n                item.submenu = this.createValidInsertMenu(item.submenu, currentJson, parentPath);\r\n                item.className = \"json-editor-insert-btn\"\r\n            }\r\n            // adding same logic to Append\r\n            else if (node.type === \"append\" && item.text === \"Append\") {\r\n                item.text = \"Insert\";\r\n                item.click = undefined;\r\n                item.submenu = this.createValidInsertMenu(item.submenu, currentJson, parentPath);\r\n            }\r\n                // if removeNode validation returns error\r\n                // Remove default Remove(Delete) function and alert the error\r\n                // except for ErrorType.InvalidPath\r\n            else if (item.text === \"Remove\") {\r\n                item.title = LOCALIZATION.REMOVE_ENABLED;\r\n                const errors = JsonConfigCommandCenter.editorErrors;\r\n                const pathString = `.${path.join('.')}`;\r\n\r\n                if(!errors.has(pathString)) { // allow remove if validation errors are available\r\n                    if (removePossibility.error) {\r\n                        // allows Remove even it has InvalidPath error\r\n                        if (removePossibility.error.type === ErrorType.InvalidPath) {\r\n                            item.title = LOCALIZATION.REMOVE_INVALID_PATH;\r\n                        } else {\r\n                            item.className = \"warning-triangle\";\r\n                            switch (removePossibility.error.type) {\r\n                                case ErrorType.RequiredNode:\r\n                                    item.title = LOCALIZATION.REMOVE_MANDATORY;\r\n                                    item.click = () => {\r\n                                        message.error(LOCALIZATION.REMOVE_MANDATORY);\r\n                                    }\r\n                                    break;\r\n                                case ErrorType.MinLength:\r\n                                    item.title = LOCALIZATION.REMOVE_MINIMUM_LENGTH;\r\n                                    item.click = () => {\r\n                                        message.error(LOCALIZATION.REMOVE_MINIMUM_LENGTH);\r\n                                    }\r\n                                    break;\r\n                                default:\r\n                                    item.title = LOCALIZATION.REMOVE_DISABLED;\r\n                                    item.click = () => {\r\n                                        message.error(LOCALIZATION.REMOVE_DISABLED);\r\n                                    }\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // remove unwanted menu items\r\n        menuItems = menuItems.filter(item => {\r\n            return item.text !== \"Type\" &&\r\n                item.text !== \"Sort\" &&\r\n                item.text !== \"Transform\" &&\r\n                item.text !== \"Extract\" &&\r\n                item.text !== \"Duplicate\" &&\r\n                item.text !== \"Append\" &&\r\n                item.type !== \"separator\"\r\n        })\r\n\r\n        return menuItems;\r\n    }\r\n\r\n    public get autocomplete(): any {\r\n        return {\r\n            filter: 'start',\r\n            trigger: 'focus',\r\n            getOptions: (text: string, path: JSONPath, input: AutoCompleteElementType, editor: JSONEditor) => {\r\n                return new Promise((resolve, reject) => {\r\n                    const rootJson = JSON.parse(editor.getText());\r\n                    const { resultNode } = SchemaResolver.getNodeMeta([...path], rootJson);\r\n\r\n                    if (resultNode && resultNode.type === DataType.string) {\r\n                        const stringNode = resultNode as StringNode;\r\n                        if (stringNode.possibleValues && stringNode.possibleValues.length > 0) {\r\n                            resolve(stringNode.possibleValues)\r\n                        } else {\r\n                            reject()\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    public onError = (err: any): void => {\r\n        if (err) {\r\n            message.error(err.message);\r\n        }\r\n    }\r\n\r\n\r\n    public onValidate = (json: any): ValidationError[] | Promise<ValidationError[]> => {\r\n\r\n        const schemaMeta = SchemaResolver.getNodeMeta([], json).resultNode; // meta of root node from schema\r\n        const errors = this.validateFields(json, schemaMeta);\r\n        return errors;\r\n    }\r\n\r\n    public onValidationError = (errors: ReadonlyArray<SchemaValidationError | ParseError>): void => {\r\n        const errorMap = new Map<string, string[]>();\r\n        errors.forEach((val: any ) => {\r\n            let key = \"\";\r\n            let value = \"\";\r\n\r\n            if (val.error) { // for errors in tree mode\r\n                key = `.${val.error.path.join('.')}`;\r\n                value = val.error.message;\r\n            }\r\n            if (val.dataPath) { // for errors in code mode\r\n                key = val.dataPath;\r\n                value = val.message;\r\n            }\r\n\r\n            if(key && value) {\r\n                let valueArr = errorMap.get(key);\r\n                if (!valueArr) {\r\n                    valueArr = [];\r\n                    errorMap.set(key, valueArr);\r\n                }\r\n                valueArr.push(value);\r\n            }\r\n        })\r\n        JsonConfigCommandCenter.editorErrors = errorMap;\r\n\r\n        JsonConfigCommandCenter.hasErrors = !!errors.length;\r\n    }\r\n\r\n    /**\r\n     * Validates if\r\n     * 1. All required keys from schema are available\r\n     * 2. there are no invalid keys\r\n     * 3. Discriminate properties are available and follows the schema\r\n     * @param json\r\n     * @param schemaMeta\r\n     * @param discriminator\r\n     * @param paths\r\n     * @param errors\r\n     * @private\r\n     */\r\n    private validateFields(json: any, schemaMeta: any, paths: any[] = [], errors: ValidationError[] = []): ValidationError[] {\r\n\r\n        const missingRequiredFields = [];\r\n        const validatedKeys = new Set<string>();\r\n        const schemaType = schemaMeta.type;\r\n        let schemaMetaData: any;\r\n        const discriminator = schemaMeta.discriminator;\r\n        const nullable = schemaMeta.nullable;\r\n\r\n        if (schemaType === DataType.any) {\r\n            return errors;\r\n        }\r\n\r\n        // check nullable\r\n        if (!nullable && json === null) {\r\n            errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_NULL });\r\n\r\n            return errors;\r\n        }\r\n\r\n        if (discriminator) {\r\n            if (schemaType === DataType.object) {\r\n                schemaMetaData = schemaMeta.data;\r\n            } else if (schemaType === DataType.array || schemaType === DataType.map) {\r\n                schemaMetaData = schemaMeta.sampleData;\r\n            }\r\n            const discriminatorErrors = this.validateDiscriminator(json, schemaMetaData, discriminator, paths);\r\n            errors = discriminatorErrors.concat(errors);\r\n        } else {\r\n            switch (schemaType) {\r\n                case DataType.object: {\r\n                    schemaMetaData = schemaMeta.data;\r\n\r\n                    if (!isPlainObject(json)) {\r\n                        errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_OBJECT });\r\n                        return errors;\r\n                    }\r\n\r\n                    for (const childKey of Object.keys(schemaMetaData)) {\r\n                        const childValue = json[childKey];\r\n                        const childPath = paths.concat([childKey]);\r\n                        const childMeta = schemaMetaData[childKey];\r\n\r\n                        const isChildKeyRequired = childMeta.isRequired;\r\n\r\n                        const hasKey = Object.prototype.hasOwnProperty.call(json, childKey);\r\n\r\n                        if (!hasKey) {\r\n                            if (isChildKeyRequired) {\r\n                                missingRequiredFields.push(childKey);\r\n                            }\r\n                        } else {\r\n                            validatedKeys.add(childKey);\r\n\r\n                            const childErrors = this.validateFields(childValue, childMeta, childPath);\r\n                            errors = childErrors.concat(errors);\r\n\r\n                        }\r\n                    }\r\n\r\n                    for (const jsonChildKey of Object.keys(json)) { // validate unnecessary fields\r\n                        if (!validatedKeys.has(jsonChildKey)) {\r\n                            const newPath = paths.concat([jsonChildKey]);\r\n                            errors.push({\r\n                                path: newPath,\r\n                                message: replaceString(LOCALIZATION.NOT_VALID_KEY, jsonChildKey)\r\n                            });\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case DataType.map:\r\n                case DataType.array: {\r\n\r\n                    if (schemaType === DataType.array) {\r\n\r\n                        if (!isArray(json)) {\r\n                            errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_ARR });\r\n                            return errors;\r\n                        }\r\n\r\n                        const arrayValidationErrors = this.validateArray(json, schemaMeta, paths);\r\n                        errors = arrayValidationErrors.concat(errors);\r\n                    }\r\n\r\n                    if (schemaType === DataType.map) {\r\n                        if (!isPlainObject(json)) {\r\n                            errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_OBJECT });\r\n                            return errors;\r\n                        }\r\n                        const maxProperties = schemaMeta.maxProperties;\r\n                        const minProperties = schemaMeta.minProperties;\r\n                        const noOfProperties = Object.keys(json).length;\r\n\r\n                        if (isNumber(maxProperties) && noOfProperties > maxProperties) {\r\n                            errors.push({\r\n                                path: paths,\r\n                                message: replaceString(LOCALIZATION.INVALID_MAX_NO_KEY_PAIRS, maxProperties.toString())\r\n                            });\r\n                        }\r\n\r\n                        if (isNumber(minProperties) && noOfProperties < minProperties) {\r\n                            errors.push({\r\n                                path: paths,\r\n                                message: replaceString(LOCALIZATION.INVALID_MIN_NO_KEY_PAIRS, minProperties.toString())\r\n                            });\r\n                        }\r\n\r\n                    }\r\n\r\n                    schemaMetaData = schemaMeta.sampleData;\r\n\r\n                    const callNextIteration = (childKey: any, childValue: any) => {\r\n                        const childPath = paths.concat([childKey]);\r\n\r\n                        const childErrors = this.validateFields(childValue, schemaMetaData, childPath);\r\n                        errors = childErrors.concat(errors);\r\n                    }\r\n\r\n                    if (schemaType === DataType.map) {\r\n                        for (const mapChildKey of Object.keys(json)) {\r\n                            const mapChild = json[mapChildKey];\r\n                            callNextIteration(mapChildKey, mapChild);\r\n                        }\r\n                    } else {\r\n                        for (let i = 0; i < json.length; i++) {\r\n                            const mapChild = json[i];\r\n                            callNextIteration(i, mapChild);\r\n                        }\r\n                    }\r\n\r\n                    break;\r\n                }\r\n                default: {\r\n                    schemaMetaData = schemaMeta;\r\n                    const valueErrors = this.validateValues(json, schemaMetaData, paths);\r\n                    errors = valueErrors.concat(errors);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (missingRequiredFields.length >= 1) {\r\n            if (missingRequiredFields.length === 1) {\r\n                errors.push({\r\n                    path: paths,\r\n                    message: replaceString(LOCALIZATION.REQUIRED_FIELD_NOT_AVAIL, missingRequiredFields[0])\r\n                });\r\n            } else {\r\n                errors.push({\r\n                    path: paths,\r\n                    message: replaceString(LOCALIZATION.REQUIRED_FIELDS_NOT_AVAIL, missingRequiredFields.join(','))\r\n                });\r\n            }\r\n        }\r\n\r\n        return errors;\r\n    }\r\n\r\n    private validateArray(json: any, schema: any, paths: any, errors: ValidationError[] = []) {\r\n\r\n        if (schema.type === DataType.array) {\r\n            const maxItems = Number(schema.maxItems);\r\n            const minItems = Number(schema.minItems);\r\n\r\n            const elementCount = json.length;\r\n            if (!isNaN(maxItems)) {\r\n                if (maxItems >= 0) {\r\n                    if (elementCount > maxItems) {\r\n                        errors.push({\r\n                            path: paths,\r\n                            message: replaceString(LOCALIZATION.MAX_ARR_ELEMENTS_EXCEEDED, maxItems.toString())\r\n                        });\r\n                    }\r\n                } else {\r\n                    console.error(`Invalid maxElement configuration for ${paths.join(\".\")}`);\r\n                }\r\n            }\r\n            if (!isNaN(minItems)) {\r\n                if (minItems >= 0) {\r\n                    if (elementCount < minItems) {\r\n                        errors.push({\r\n                            path: paths,\r\n                            message: replaceString(LOCALIZATION.MIN_ARR_ELEMENTS_NOT_FOUND, minItems.toString())\r\n                        });\r\n                    }\r\n                } else {\r\n                    console.error(`Invalid minElement configuration for ${paths.join(\".\")}`);\r\n                }\r\n            }\r\n\r\n            const shouldBeUnique = schema.uniqueItems;\r\n\r\n            // uniqueness validation\r\n\r\n            if (shouldBeUnique) {\r\n                const uniqueSet = new Set();\r\n                json.forEach( (item: any, index: number) => {\r\n                    if (uniqueSet.has(item)) {\r\n                        const itemPath = paths.concat([index]);\r\n                        errors.push({\r\n                            path: itemPath,\r\n                            message: replaceString(LOCALIZATION.ARR_ELEMENT_VIOLATES_UNIQUENESS, item.toString())\r\n                        });\r\n                    } else {\r\n                        uniqueSet.add(item);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            console.error(`Schema type: ${schema.type} cannot be validated as an array!`);\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    private validateDiscriminator(json: any, schema: any, discriminator: { propertyName: string }, paths: any[], errors: ValidationError[] = []): ValidationError[] {\r\n        const discriminatorType = json[discriminator.propertyName];\r\n\r\n        if (discriminatorType) { // whether discriminator property is available\r\n            const discriminatorMeta = schema[discriminatorType];\r\n            if (discriminatorMeta) {\r\n                const childErrors = this.validateFields(json, discriminatorMeta, paths);\r\n                errors = childErrors.concat(errors);\r\n            } else {\r\n                errors.push({\r\n                    path: paths,\r\n                    message: replaceString(LOCALIZATION.DISCRIM_INVALID_TYPE, discriminator.propertyName)\r\n                });\r\n            }\r\n        } else {\r\n            errors.push({\r\n                path: paths,\r\n                message: replaceString(LOCALIZATION.REQUIRED_FIELD_NOT_AVAIL, discriminator.propertyName)\r\n            });\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    private validateValues(value: string | boolean | number | null | undefined, schema: any, paths: any[], errors: ValidationError[] = []): ValidationError[] {\r\n        if (schema) {\r\n            const datatype: DataType = schema.type;\r\n            const possibleValues = schema.possibleValues;\r\n            const isRequired = schema.isRequired;\r\n            const associationType = schema.association;\r\n\r\n            if (possibleValues && possibleValues.length) {\r\n                let isOneOfPossibleValues = false;\r\n                for (const possibleVal of possibleValues) {\r\n                    if (value === possibleVal) {\r\n                        isOneOfPossibleValues = true;\r\n                    }\r\n                }\r\n                if (!isOneOfPossibleValues) {\r\n                    errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_OF_POSSIBLE_VALS });\r\n                }\r\n            }\r\n\r\n            if (!value && value !== 0) {\r\n                if (isRequired) {\r\n                    errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_BE_EMPTY });\r\n                }\r\n            } else {\r\n                switch (datatype) {\r\n                    case DataType.number: {\r\n                        const minimum = schema.minimum;\r\n                        const maximum = schema.maximum;\r\n\r\n                        if (associationType === AssociationType.NOT) {\r\n                            if (!isNaN(Number(value))) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_NUMBER });\r\n                            }\r\n                        } else {\r\n                            if (isNaN(Number(value))) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_NUMBER });\r\n                            } else {\r\n                                if (minimum) {\r\n                                    if (value < minimum) {\r\n                                        errors.push({\r\n                                            path: paths,\r\n                                            message: replaceString(LOCALIZATION.VAL_CANNOT_BE_LESS, minimum)\r\n                                        });\r\n                                    }\r\n                                }\r\n                                if (maximum) {\r\n                                    if (value > maximum) {\r\n                                        errors.push({\r\n                                            path: paths,\r\n                                            message: replaceString(LOCALIZATION.VAL_CANNOT_BE_GREATER, maximum)\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case DataType.boolean: {\r\n                        if (associationType === AssociationType.NOT) {\r\n                            if (isBoolean(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_BOOLEAN });\r\n                            }\r\n                        } else {\r\n                            if (!isBoolean(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_BOOLEAN });\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case DataType.string: {\r\n                        if (associationType === AssociationType.NOT) {\r\n                            if (isString(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_STRING });\r\n                            }\r\n                        } else {\r\n                            if (!isString(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_STRING });\r\n                            } else {\r\n                                const maxLength = Number(schema.maxLength);\r\n                                const length = value.length;\r\n                                if (maxLength && length > maxLength) {\r\n                                    errors.push({\r\n                                        path: paths,\r\n                                        message: replaceString(LOCALIZATION.STRING_LENGTH_EXCEEDED, maxLength.toString())\r\n                                    });\r\n                                }\r\n\r\n                                const pattern = schema.pattern;\r\n\r\n                                if (pattern) {\r\n                                    const regex = new RegExp(pattern);\r\n                                    const matches = regex.test(value);\r\n\r\n                                    if (!matches) {\r\n                                        errors.push({\r\n                                            path: paths,\r\n                                            message: replaceString(LOCALIZATION.STRING_VIOLATES_PATTERN, pattern)\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    private createValidInsertMenu(submenu: MenuItem[] | undefined, currentJson: any, parentPath: (string | number)[]): any {\r\n\r\n        const { resultNode, error } = SchemaResolver.getNodeMeta([...parentPath], currentJson);\r\n\r\n        if (error) {\r\n            message.error(LOCALIZATION.INCONSISTENT_VALUE);\r\n            return undefined;\r\n        }\r\n\r\n        const validInsertItems: any = this.getValidInsertItems(parentPath, currentJson, resultNode);\r\n        const existingKeys: (number | string)[] = Object.keys(this.getPathObject(currentJson, [...parentPath]));\r\n\r\n        if (submenu === undefined || submenu.length === 0) {\r\n            return undefined;\r\n        }\r\n\r\n        const validMenuItems: MenuItem[] = [];\r\n\r\n        submenu?.forEach(subItem => {\r\n            if (validInsertItems !== undefined && validInsertItems.length !== 0) {\r\n                Object.keys(validInsertItems).forEach((key: any) => {\r\n                    if ((subItem.text === key)\r\n                        && (subItem.title === validInsertItems[key].description)\r\n                        // Also we have to match the keys as a whole\r\n                        // For discriminator types, if any key is added with base type, it needs to be filtered out.\r\n                        && !existingKeys.includes(key)\r\n                        && !existingKeys.includes(key.split('-')[0])) {\r\n\r\n                        // Remove unique id from the title\r\n                        subItem.title = subItem.title.split(SchemaResolver.idSeparator)[0];\r\n\r\n                        validMenuItems.push(subItem);\r\n                        existingKeys.push(key);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return validMenuItems;\r\n    }\r\n\r\n    private getPathObject(json: any, path: (number | string)[]): any {\r\n        let subTree = json;\r\n        path.forEach((step: number | string) => {\r\n            subTree = subTree[step];\r\n        });\r\n        return subTree;\r\n    }\r\n\r\n    private getValidInsertItems(parentPath: (string | number)[], currentJson: any, node: BaseNode | undefined | null) {\r\n        const key = parentPath[parentPath.length - 1];\r\n        let resultNode = node;\r\n\r\n        /**\r\n         * If dicriminator(parent), resultNode should get from data[`type`]\r\n         */\r\n        if (resultNode?.discriminator) {\r\n            const currentData = this.getPathObject(currentJson, parentPath);\r\n            const typeIndicatorKey = resultNode.discriminator.propertyName;\r\n            const dataType = currentData[typeIndicatorKey];\r\n            resultNode = (resultNode.data as BaseNodes)[dataType];\r\n        }\r\n\r\n        /**\r\n         * When adding items to an Array or a Map,\r\n         * returning a IData object with matching key and description\r\n         */\r\n        if (resultNode instanceof ArrayNode || resultNode instanceof MapNode) {\r\n            if (resultNode.sampleData?.discriminator) {\r\n                // Handle: Association comes with array/map\r\n                const res: any = {};\r\n                this.replaceKeyWithDiscriminatorTypes(res, resultNode.sampleData, `${key}`);\r\n                return res;\r\n            } else {\r\n                // Handle: Sample data for array/map\r\n                const ret = {\r\n                    [`${key}-sample`]: {\r\n                        description: `${key}-sample-${resultNode.description}`\r\n                    }\r\n                }\r\n                return ret;\r\n            }\r\n\r\n            // Handle: Add as property of object\r\n        } else if (resultNode?.data) {\r\n            // Since some nodes might be deleted by the logic below, this object must be cloned.\r\n            const res: any = {};\r\n            Object.entries(resultNode.data).forEach(([key, node]) => {\r\n                res[key] = {\r\n                    description: `${key}-${node.description}`,\r\n                    discriminator: node.discriminator,\r\n                    data: node.data\r\n                }\r\n            });\r\n\r\n            // Handle: Add as property of association type\r\n            Object.entries(res as Record<string, unknown>).forEach(\r\n                ([key, subNode]) => {\r\n                    // if they are descriminator types as data then replace insert items as `type-discriminatorType`\r\n                    if ((subNode as BaseNode).discriminator) {\r\n                        // If discriminator available, then node is a BaseNode\r\n                        this.replaceKeyWithDiscriminatorTypes(res, subNode as BaseNode, key);\r\n                    }\r\n                }\r\n            );\r\n            return res;\r\n        } else {\r\n            message.error(LOCALIZATION.INCONSISTENT_VALUE);\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    private replaceKeyWithDiscriminatorTypes(res: any, node: BaseNode, key: string) {\r\n        delete res[key];\r\n        Object.entries(\r\n            (node as BaseNode).data as Record<string, unknown>\r\n        ).forEach(([subKey, val]) => {\r\n            res[`${key}-${subKey}`] = {\r\n                description: `${key}-${subKey}-${(val as BaseNode).description}`,\r\n            };\r\n        });\r\n    }\r\n}\r\n","import { CogniteClient } from \"@cognite/sdk\";\r\n\r\n\r\nexport class Client {\r\n    public static sdk = new CogniteClient({ appId: 'json-configurator' });\r\n}\r\n","import { HttpRequestOptions, HttpResponse } from \"@cognite/sdk/dist/src\";\r\nimport { Client } from \"../cdf/client\";\r\nimport { Api } from \"./Api\";\r\n\r\nconst cogniteClient = Client.sdk;\r\n\r\nexport class DigitalTwinApi implements Api {\r\n\r\n    public jsonList = async (): Promise<any> => {\r\n        return await cogniteClient.get(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins`)\r\n            .then(response => {\r\n                console.log(\"Retrieved Digital Twin List successfully\");\r\n                const jsonConfigs = response.data.data?.items;\r\n                const jsonConfigIdMap = new Map();\r\n\r\n                for (const jsonConfig of jsonConfigs) {\r\n                    const jsonConfigId = jsonConfig.id;\r\n                    jsonConfigIdMap.set(jsonConfigId, jsonConfig);\r\n                }\r\n                return jsonConfigIdMap;\r\n            });\r\n    }\r\n\r\n    public saveJson = async (json: any): Promise<HttpResponse<any>> => {\r\n\r\n        const options: HttpRequestOptions = {\r\n            data: {\r\n                \"items\": [\r\n                    { \"data\": json }\r\n                ]\r\n            }\r\n        };\r\n\r\n        return await cogniteClient.post(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins`, options)\r\n            .then( response => {\r\n                console.log(\"Saved Digital Twin List successfully!\");\r\n                return response.data.data.items[0];\r\n            })\r\n    }\r\n\r\n    public updateJson = async (configId: number, json: any): Promise<HttpResponse<any>> => {\r\n\r\n        const options: HttpRequestOptions = {\r\n            data: {\r\n                \"items\": [\r\n                    {\r\n                        \"id\": configId,\r\n                        \"data\": json\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n\r\n        return await cogniteClient.post(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins/update`, options);\r\n    }\r\n\r\n    public deleteJson = async (configId: number): Promise<HttpResponse<any>> => {\r\n        const options: HttpRequestOptions = {\r\n            data: {\r\n                \"items\": [\r\n                    configId\r\n                ]\r\n            }\r\n        };\r\n\r\n        return await cogniteClient.post(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins/delete`, options)\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/twinconfig.69952d13.yaml\";","import { Modes } from \"../userInterface/util/enums/Modes\";\r\nimport { CogniteJsonEditor } from \"./CogniteJsonEditor\";\r\nimport { CogniteJsonEditorOptions } from \"./CogniteJsonEditorOptions\";\r\nimport { saveAs } from 'file-saver';\r\nimport { DigitalTwinApi } from \"./DigitalTwinApi\";\r\nimport { Api } from \"./Api\";\r\nimport { SchemaResolver } from \"../validator/SchemaResolver\";\r\nimport message from \"antd/es/message\";\r\nimport { LOCALIZATION, USE_LOCAL_FILES_AND_NO_LOGIN } from \"../constants\";\r\nimport localJsonFile from \"../config/MauiA.json\";\r\nimport { extractErrorMessage } from \"../userInterface/panels/JsonConfigurator/JsonConfigurator\";\r\nimport { JsonConfig, JsonPayLoad } from \"../userInterface/util/types\";\r\nimport * as YAML from \"js-yaml\";\r\nimport ymlFile from \"../config/twinconfig.yaml\";\r\nimport { IOpenApiSchema } from \"../validator/interfaces/IOpenApiSchema\";\r\n\r\nexport class JsonConfigCommandCenter {\r\n    public static editorErrors: Map<string, string[]> = new Map();\r\n    public static hasErrors = false;\r\n    public static schemaErrors: string[] = [];\r\n    private static editorInstance: CogniteJsonEditor;\r\n    private static apiInstance: Api;\r\n\r\n    public static async createEditor(elm: HTMLElement, schema: IOpenApiSchema, onChange: (text: string) => void): Promise<void> {\r\n        // Schema errors need to reset before loading new schema\r\n        this.schemaErrors = [];\r\n\r\n        await SchemaResolver.parseYAMLFile(schema);\r\n        JsonConfigCommandCenter.apiInstance = new DigitalTwinApi();\r\n        const options = new CogniteJsonEditorOptions(onChange);\r\n\r\n        // To force reload the content, innerHTML needs to be changed\r\n        elm.innerHTML = '<div/>';\r\n\r\n        JsonConfigCommandCenter.editorInstance = new CogniteJsonEditor(elm, options);\r\n    }\r\n\r\n    public static get editor(): CogniteJsonEditor | null {\r\n        if (JsonConfigCommandCenter.editorInstance) {\r\n            return JsonConfigCommandCenter.editorInstance;\r\n        } else {\r\n            console.warn(\"Editor not instantiated!\");\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static get api(): Api {\r\n        if (!JsonConfigCommandCenter.apiInstance) {\r\n            JsonConfigCommandCenter.apiInstance = new DigitalTwinApi();\r\n        }\r\n        return JsonConfigCommandCenter.apiInstance;\r\n    }\r\n\r\n    public static get currentJson(): any {\r\n        const currentJsonText = JsonConfigCommandCenter.editor?.getText();\r\n        let currentJson;\r\n        if (currentJsonText) {\r\n            try {\r\n                currentJson = JSON.parse(currentJsonText);\r\n            } catch (e: any) {\r\n                console.error(\"Error occurred while parsing json!\", e);\r\n            }\r\n        }\r\n        return currentJson;\r\n    }\r\n\r\n    public static get currentFileName(): string {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        return currentJson?.header?.name;\r\n    }\r\n\r\n    public static setEditorText(json: JsonPayLoad | null) {\r\n        const editor = JsonConfigCommandCenter.editor;\r\n        if (editor) {\r\n            editor.set(json);\r\n        }\r\n    }\r\n\r\n    public static updateEditorText(json: JsonPayLoad | null) {\r\n        const editor = JsonConfigCommandCenter.editor;\r\n        if (editor) {\r\n            editor.update(json);\r\n        }\r\n    }\r\n\r\n    public static loadJsonConfigs = async (): Promise<any> => {\r\n        let jsonConfigs;\r\n        try {\r\n            jsonConfigs = await JsonConfigCommandCenter.api.jsonList();\r\n\r\n        } catch(error) {\r\n            message.error(LOCALIZATION.RETRIEVE_CONFIGS_FAIL.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n            if (USE_LOCAL_FILES_AND_NO_LOGIN) {\r\n                jsonConfigs = new Map().set(123, { id: 123, data: localJsonFile });\r\n            }\r\n        }\r\n        return jsonConfigs;\r\n    }\r\n\r\n    public static onModeChange(mode: Modes): void {\r\n        if (JsonConfigCommandCenter.editor) {\r\n            JsonConfigCommandCenter.editor.setMode(mode);\r\n        }\r\n    }\r\n\r\n    public static onSaveAs = async (): Promise<JsonConfig | null> => {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        return await JsonConfigCommandCenter.api.saveJson(currentJson)\r\n            .then((response) => {\r\n                message.success(LOCALIZATION.SAVE_SUCCESS);\r\n                return response;\r\n            })\r\n            .catch((error: any) => {\r\n                message.error(LOCALIZATION.SAVE_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                return null;\r\n            });\r\n    }\r\n\r\n    public static onUpdate = async (selectedJsonConfigId: number | null, json?: JsonPayLoad): Promise<JsonConfig | null> => {\r\n        let currentJson = JsonConfigCommandCenter.currentJson;\r\n\r\n        if (json) {\r\n            currentJson = json;\r\n        }\r\n\r\n        if (selectedJsonConfigId) {\r\n            return await JsonConfigCommandCenter.api.updateJson(selectedJsonConfigId, currentJson)\r\n                .then((response: any) => {\r\n                    const updatedConfig = response.data.data.items[0];\r\n                    message.success(LOCALIZATION.UPDATE_SUCCESS);\r\n                    return updatedConfig;\r\n                })\r\n                .catch((error: any) => {\r\n                    message.error(LOCALIZATION.UPDATE_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                    return null;\r\n                });\r\n        } else {\r\n            console.error(\"Cannot Update: Selected Json Config id is Null!\");\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static onDelete = async (selectedJsonConfigId: number | null): Promise<boolean> => {\r\n        if (selectedJsonConfigId) {\r\n            return await JsonConfigCommandCenter.api.deleteJson(selectedJsonConfigId)\r\n                .then(() => {\r\n                    message.success(LOCALIZATION.DELETE_SUCCESS);\r\n                    return true;\r\n                })\r\n                .catch((error: any) => {\r\n                    message.error(LOCALIZATION.DELETE_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                    return false;\r\n                });\r\n        } else {\r\n            console.error(\"Cannot Delete: Selected Json Config id is Null!\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public static onDownload = (): void => {\r\n        const currentJson = JSON.stringify(JsonConfigCommandCenter.currentJson);\r\n        let fileName = JsonConfigCommandCenter.currentFileName;\r\n        if (!fileName || fileName === \"\") {\r\n            fileName = \"Untitled Json Config\";\r\n        }\r\n        const blob = new Blob([currentJson], { type: 'application/json;charset=utf-8' });\r\n        saveAs(blob, fileName);\r\n    }\r\n\r\n    public static onLoadSchema = async (elm: HTMLElement | null, onChange: (text: string) => void, schema: IOpenApiSchema | null): Promise<void> => {\r\n        if (elm) {\r\n            if(schema){\r\n                await JsonConfigCommandCenter.createEditor(elm, schema, onChange);\r\n            } else {\r\n                const configFile = await fetch(ymlFile).then(response => response.text());\r\n                const schema = YAML.load(configFile) as IOpenApiSchema;\r\n                await JsonConfigCommandCenter.createEditor(elm, schema, onChange);\r\n            }\r\n        }\r\n    }\r\n}\r\n","export enum Modes {\r\n    default = \"tree\",\r\n    paste = \"code\",\r\n}\r\n","import React from 'react';\r\nimport Button from \"antd/es/button\";\r\nimport styles from \"./CommandItem.module.scss\";\r\n\r\nexport const CommandItem: React.FC<{ className?: string, onClick?: () => void, icon?: string, loading?: boolean }> = (props) => {\r\n    return (\r\n        <Button\r\n            type=\"primary\"\r\n            className={`${styles.commandBtn} ${props.className}`}\r\n            size=\"large\"\r\n            icon={props.loading ? '' : props.icon}\r\n            onClick={props.onClick}\r\n            loading={props.loading}\r\n        >\r\n            {props.children}\r\n        </Button>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport classes from './CommandPanel.module.scss';\r\nimport { CommandItem } from '../../components/CommandItem/CommandItem';\r\nimport Switch from 'antd/es/switch';\r\nimport message from 'antd/es/message';\r\nimport Modal from 'antd/es/modal';\r\nimport { CommandEvent } from \"../../util/Interfaces/CommandEvent\";\r\nimport { Modes } from \"../../util/enums/Modes\";\r\nimport { JsonConfigCommandCenter } from '../../../core/JsonConfigCommandCenter';\r\nimport { ExclamationCircleTwoTone, WarningTwoTone } from '@ant-design/icons';\r\nimport { extractErrorMessage } from '../JsonConfigurator/JsonConfigurator';\r\nimport { LOCALIZATION } from '../../../constants';\r\nimport { JsonConfig, MergeOptions } from '../../util/types';\r\nimport { MergeModes } from '../../util/enums/MergeModes';\r\n\r\nconst { confirm } = Modal;\r\n\r\nexport async function getLatestConfiguration(configurationId: number): Promise<JsonConfig | null> {\r\n    return await JsonConfigCommandCenter.loadJsonConfigs()\r\n        .then(response => {\r\n            if (response) {\r\n                const selectedJsonConfig: JsonConfig = response.get(configurationId);\r\n                if (selectedJsonConfig) {\r\n                    return selectedJsonConfig;\r\n                } else {\r\n                    return null;\r\n                }\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n        .catch(error => {\r\n            message.error(LOCALIZATION.RETRIEVE_CONFIGS_FAIL.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n            return null;\r\n        })\r\n}\r\n\r\nexport const CommandPanel: React.FC<{\r\n    title: string,\r\n    mode: string,\r\n    isEdited: boolean,\r\n    refreshing: boolean,\r\n    selectedJsonConfigId: number | null,\r\n    originalJsonConfig: JsonConfig | null,\r\n    commandEvent: (commandEvent: CommandEvent, ...args: any[]) => void,\r\n    setMergeOptions: (options: MergeOptions) => void\r\n    setRefreshing: (refreshing: boolean) => void,\r\n}> = (props: any) => {\r\n\r\n    const isUpdated = async (): Promise<boolean> => {\r\n        if (props.selectedJsonConfigId) {\r\n            const latestJsonConfig = await getLatestConfiguration(props.selectedJsonConfigId);\r\n            return (JSON.stringify(props.originalJsonConfig) !== JSON.stringify(latestJsonConfig));\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    const onModeSwitch = (checked: boolean, evt: any) => {\r\n        if (checked) {\r\n            props.commandEvent(CommandEvent.mode, Modes.paste, evt);\r\n        } else {\r\n            props.commandEvent(CommandEvent.mode, Modes.default, evt);\r\n        }\r\n    }\r\n\r\n    const onReloadHandler = async () => {\r\n        props.setRefreshing(true);\r\n        if (await isUpdated()) {\r\n            if (props.isEdited) {\r\n                const latestJsonConfig = await getLatestConfiguration(props.selectedJsonConfigId);\r\n                props.setMergeOptions({\r\n                    editedConfig: JsonConfigCommandCenter.currentJson,\r\n                    originalConfig: latestJsonConfig?.data,\r\n                    diffMode: latestJsonConfig ? MergeModes.reload : MergeModes.reloadServerDeleted,\r\n                    onOk: (mergedJson: any) => {\r\n                        props.commandEvent(CommandEvent.reload, mergedJson);\r\n                        message.success(LOCALIZATION.REFRESH_SUCCESS);\r\n                    },\r\n                    onCancel: () => {\r\n                        message.warning(LOCALIZATION.REFRESH_ERROR.replace('{{error}}', ''));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                props.commandEvent(CommandEvent.reload);\r\n            }\r\n        }\r\n        else {\r\n            // reload with current text\r\n            props.commandEvent(CommandEvent.reload);\r\n        }\r\n    }\r\n\r\n    const save = () => {\r\n        props.commandEvent(CommandEvent.saveAs);\r\n    }\r\n\r\n    const onSaveHandler = () => {\r\n        if (!JsonConfigCommandCenter.currentFileName) {\r\n            confirm({\r\n                title: LOCALIZATION.SAVE_WITH_ERRORS_TITLE,\r\n                icon: <WarningTwoTone twoToneColor=\"#faad14\" />,\r\n                content: LOCALIZATION.SAVE_WITHOUT_NAME_CONTENT,\r\n                onOk() {\r\n                    save();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.SAVE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else if (JsonConfigCommandCenter.hasErrors) {\r\n            confirm({\r\n                title: LOCALIZATION.SAVE_WITH_ERRORS_TITLE,\r\n                icon: <WarningTwoTone twoToneColor=\"#faad14\" />,\r\n                content: LOCALIZATION.SAVE_WITH_ERRORS_CONTENT,\r\n                onOk() {\r\n                    save();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.SAVE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            confirm({\r\n                title: LOCALIZATION.SAVE_TITLE,\r\n                icon: <ExclamationCircleTwoTone />,\r\n                content: LOCALIZATION.SAVE_CONTENT,\r\n                onOk() {\r\n                    save();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.SAVE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    const update = async () => {\r\n        if (await isUpdated()) {\r\n            const latestJsonConfig = await getLatestConfiguration(props.selectedJsonConfigId);\r\n            props.setMergeOptions({\r\n                editedConfig: JsonConfigCommandCenter.currentJson,\r\n                originalConfig: latestJsonConfig?.data,\r\n                diffMode: latestJsonConfig ? MergeModes.save : MergeModes.saveServerDeleted,\r\n                onOk: (mergedJson: any) => {\r\n\r\n                    if (latestJsonConfig) {\r\n                        props.commandEvent(CommandEvent.update, mergedJson)\r\n                    } else {\r\n                        // if file is deleted on the server save as new\r\n                        props.commandEvent(CommandEvent.saveAs, mergedJson);\r\n                    }\r\n                },\r\n                onCancel: () => {\r\n                    message.warning(LOCALIZATION.UPDATE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            props.commandEvent(CommandEvent.update);\r\n        }\r\n    }\r\n\r\n    const onUpdateHandler = () => {\r\n        if (!JsonConfigCommandCenter.currentFileName) {\r\n            confirm({\r\n                title: LOCALIZATION.UPDATE_WITH_ERRORS_TITLE,\r\n                icon: <WarningTwoTone twoToneColor=\"#faad14\" />,\r\n                content: LOCALIZATION.UPDATE_WITHOUT_NAME_CONTENT,\r\n                onOk() {\r\n                    update();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.UPDATE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        if (JsonConfigCommandCenter.hasErrors) {\r\n            confirm({\r\n                title: LOCALIZATION.UPDATE_WITH_ERRORS_TITLE,\r\n                icon: <WarningTwoTone twoToneColor=\"#faad14\" />,\r\n                content: LOCALIZATION.UPDATE_WITH_ERRORS_CONTENT,\r\n                async onOk() {\r\n                    await update();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.UPDATE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            confirm({\r\n                title: LOCALIZATION.UPDATE_TITLE,\r\n                icon: <ExclamationCircleTwoTone />,\r\n                content: LOCALIZATION.UPDATE_CONTENT,\r\n                async onOk() {\r\n                    await update();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.UPDATE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    const onDeleteHandler = () => {\r\n        confirm({\r\n            title: LOCALIZATION.DELETE_TITLE,\r\n            icon: <WarningTwoTone twoToneColor=\"#ff4d4f\" />,\r\n            content: LOCALIZATION.DELETE_CONTENT,\r\n            onOk() {\r\n                props.commandEvent(CommandEvent.delete);\r\n            },\r\n            onCancel() {\r\n                message.warn(LOCALIZATION.DELETE_ERROR.replace('{{error}}', ''));\r\n            },\r\n            okType: 'danger',\r\n        });\r\n    }\r\n\r\n    const onDownloadHandler = () => {\r\n        props.commandEvent(CommandEvent.download);\r\n    }\r\n\r\n    const onDiffHandler = () => {\r\n        props.setMergeOptions({\r\n            // updated version\r\n            editedConfig: JsonConfigCommandCenter.currentJson,\r\n            // Latest update\r\n            originalConfig: props.originalJsonConfig?.data,\r\n            diffMode: MergeModes.diff,\r\n            onOk: (mergedJson: any) => {\r\n                props.commandEvent(CommandEvent.diff, mergedJson);\r\n                message.success(LOCALIZATION.DIFF_SUCCESS);\r\n            },\r\n            onCancel: () => {\r\n                // message.warning(LOCALIZATION.DIFF_CANCEL);\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className={classes.commandsContainer}>\r\n            <div className={classes.errorPanel}>\r\n                {JsonConfigCommandCenter.schemaErrors.map(error => (\r\n                    <div className={classes.errorItem}>\r\n                        <WarningTwoTone twoToneColor=\"#faad14\" />\r\n                        <span> {error}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <div className={classes.leftPanel}>\r\n                <span>Switch Mode:</span>\r\n                <Switch checkedChildren=\"code\" unCheckedChildren=\"tree\" checked={props.mode === 'code'} onChange={onModeSwitch} />\r\n            </div>\r\n            <div className={classes.titlePanel}>\r\n                <span className={classes.titleText}>{props.title}</span>\r\n            </div>\r\n            <div className={classes.rightPanel}>\r\n                {props.isEdited ? <CommandItem className={classes.btn} icon={\"diff\"} onClick={onDiffHandler}>Diff</CommandItem> : null}\r\n                <CommandItem className={classes.btn} icon={\"reload\"} loading={props.refreshing} onClick={onReloadHandler}>Reload</CommandItem>\r\n                {(props.selectedJsonConfigId && props.isEdited) && <CommandItem className={classes.btn} icon={\"save\"} onClick={onUpdateHandler}>Save</CommandItem>}\r\n                <CommandItem className={classes.btn} icon={\"upload\"} onClick={onSaveHandler}>Save As New</CommandItem>\r\n                <CommandItem className={classes.btn} icon={\"download\"} onClick={onDownloadHandler}>Download</CommandItem>\r\n                {props.selectedJsonConfigId && <CommandItem className={classes.btn} icon={\"delete\"} onClick={onDeleteHandler}>Delete</CommandItem>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport Button from 'antd/es/button';\r\nimport message from 'antd/es/message';\r\nimport Upload from 'antd/lib/upload';\r\nimport { UploadChangeParam, UploadFile } from 'antd/lib/upload/interface';\r\nimport { LOCALIZATION } from '../../../constants';\r\n\r\nenum FileUploadStatus {\r\n    Uploading = 'uploading',\r\n    Done = 'done',\r\n    Error = 'error',\r\n    Removed = 'removed'\r\n}\r\nexport const FileUploader: React.FC<{ onUpload: (file?: UploadFile | undefined) => void, onRemove: () => void }> = (props) => {\r\n    const [fileList, setFileList] = useState<UploadFile<any>[] | undefined>(undefined);\r\n\r\n    const settings = {\r\n        name: 'fileUploader',\r\n        // TODO: Find a way to avoid file upload and use `Upload` component as a file selector\r\n        // window.location.origin is used here as a tempory fix for failing upload post request\r\n        action: window.location.origin,\r\n        accept: '.yaml',\r\n        fileList: fileList,\r\n        maxCount: 1,\r\n        onChange(info: UploadChangeParam<UploadFile<any>>) {\r\n            if (info.file.status === FileUploadStatus.Done) {\r\n                message.success(LOCALIZATION.FILE_UPLOAD_OK);\r\n                props.onUpload(info.fileList.slice(-1)[0]);\r\n            }\r\n            else if (info.file.status === FileUploadStatus.Error) {\r\n                message.error(LOCALIZATION.FILE_UPLOAD_FAILED);\r\n            }\r\n            if (info.file.status === FileUploadStatus.Removed) {\r\n                props.onRemove();\r\n                message.success(LOCALIZATION.SWITCHED_TO_DEFAULT);\r\n            }\r\n            // Only show latest uploaded file, and old ones will be replaced by the new\r\n            setFileList(info.fileList.slice(-1));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Upload {...settings}>\r\n            <Button icon='upload'>{props.children}</Button>\r\n        </Upload>\r\n    )\r\n}","import React from 'react';\r\nimport classes from './ConfigSelector.module.scss';\r\nimport List from 'antd/es/list';\r\n\r\nexport const ConfigSelector: React.FC<{\r\n    onJsonConfigSelectHandler: (id: number | null) => void,\r\n    jsonConfigMap: Map<number, unknown> | null,\r\n    selectedJsonConfigId: number | null\r\n}> = (props) => {\r\n\r\n    const jsonConfigs: { id: number, name: string }[] = [];\r\n\r\n    props.jsonConfigMap?.forEach((element: any) => {\r\n        jsonConfigs.push({\r\n            id: element.id,\r\n            name: element.data?.header?.name\r\n        });\r\n    });\r\n\r\n    if (jsonConfigs.length) {\r\n        return (\r\n            <List\r\n                bordered\r\n                dataSource={jsonConfigs}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                        className={`${classes.jsonConfigItem} ` + (item.id === props.selectedJsonConfigId ? classes.selected : \"\")}\r\n                        onClick={() => props.onJsonConfigSelectHandler(item.id)}\r\n                        key={item.id}\r\n                    >\r\n                        {item.name}\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        );\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport classes from './SideNavPanel.module.scss';\r\nimport logo from \"../../../assets/cognite.png\";\r\nimport Divider from \"antd/es/divider\";\r\nimport Text from \"antd/es/typography/Text\";\r\nimport Modal from 'antd/es/modal';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport * as yaml from \"js-yaml\";\r\nimport { CommandEvent } from '../../util/Interfaces/CommandEvent';\r\nimport { CommandItem } from '../../components/CommandItem/CommandItem';\r\nimport { ConfigSelector } from '../../components/ConfigSelector/ConfigSelector';\r\nimport { FileUploader } from '../../components/FileUploader/FileUploader';\r\nimport { LOCALIZATION } from '../../../constants';\r\nimport { JsonConfigCommandCenter } from \"../../../core/JsonConfigCommandCenter\";\r\n\r\nconst { confirm } = Modal;\r\n\r\nexport const SideNavPanel: React.FC<{\r\n    isEdited: boolean,\r\n    commandEvent: (commandEvent: CommandEvent, ...args: any[]) => void,\r\n    jsonConfigMap: Map<number, unknown> | null,\r\n    selectedJsonConfigId: number | null\r\n}> = (props: any) => {\r\n\r\n    const onJsonConfigSelectHandler = (id: number | null) => {\r\n        if (props.isEdited) {\r\n            confirm({\r\n                title: LOCALIZATION.SWITCH_TITLE,\r\n                icon: <ExclamationCircleOutlined />,\r\n                content: LOCALIZATION.SWITCH_CONTENT,\r\n                onOk() {\r\n                    props.commandEvent(CommandEvent.switchConfig, id);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            props.commandEvent(CommandEvent.switchConfig, id);\r\n        }\r\n    }\r\n\r\n    const onUpload = (e: any) => {\r\n        const reader = new FileReader();\r\n        const file = e.originFileObj;\r\n        reader.onload = () => {\r\n            try {\r\n                const yamlObj = yaml.load(reader.result as string);\r\n                props.commandEvent(CommandEvent.loadSchema, yamlObj);\r\n            } catch (e) {\r\n                JsonConfigCommandCenter.schemaErrors.push(LOCALIZATION.INVALID_SCHEMA);\r\n            }\r\n        };\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    const onRemoveUploadedSchema = () => {\r\n        props.commandEvent(CommandEvent.loadSchema);\r\n    }\r\n\r\n    return (\r\n\r\n\r\n        <div className={classes.container}>\r\n            <div>\r\n                <div className={classes.top}>\r\n                    <img alt=\"cognite-logo\" src={logo} className={classes.logo} />\r\n                    <Text strong className={classes.title}>{LOCALIZATION.SIDENAV_TITLE}</Text>\r\n                </div>\r\n                <Divider />\r\n                <div className={classes.schemaUpload}>\r\n                    <FileUploader onUpload={onUpload} onRemove={onRemoveUploadedSchema}>{LOCALIZATION.SIDENAV_UPLOAD}</FileUploader>\r\n                </div>\r\n                <Divider />\r\n                <div className={classes.createNewBtn}>\r\n                    <CommandItem className={classes.btn} icon={\"plus\"} onClick={() => onJsonConfigSelectHandler(null)}>{LOCALIZATION.SIDENAV_CREATENEW}</CommandItem>\r\n                </div>\r\n                <Divider />\r\n            </div>\r\n            <div className={classes.jsonConfigContainer}>\r\n                <div className={classes.subtitle}>\r\n                    <Text strong>{LOCALIZATION.SIDENAV_SUBTITLE}</Text>\r\n                </div>\r\n                <div className={classes.jsonConfigs}>\r\n                    <ConfigSelector\r\n                        onJsonConfigSelectHandler={onJsonConfigSelectHandler}\r\n                        jsonConfigMap={props.jsonConfigMap}\r\n                        selectedJsonConfigId={props.selectedJsonConfigId}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","export default \"data:image/png;base64,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\"","import React, { useEffect, useRef } from \"react\";\r\nimport \"./JsonEditorContainer.scss\";\r\nimport { JsonConfigCommandCenter } from \"../../../core/JsonConfigCommandCenter\";\r\nimport { JsonPayLoad } from \"../../util/types\";\r\nimport { IOpenApiSchema } from \"../../../validator/interfaces/IOpenApiSchema\";\r\n\r\nexport function JsonEditorContainer(props: { jsonEditorElm: any, onUpdateJson: (text: JsonPayLoad) => void , customSchema: IOpenApiSchema | null}): JSX.Element {\r\n\r\n    const { jsonEditorElm, onUpdateJson, customSchema } = props;\r\n    const updateCallBack = useRef(onUpdateJson);\r\n\r\n    useEffect(() => {\r\n        // onupdatejson function will be updated on each rerender of parent therefore we need to store it in a ref so\r\n        // JsonEditor can call the correct function after instantiation\r\n        updateCallBack.current = onUpdateJson;\r\n    }, [onUpdateJson])\r\n\r\n\r\n    useEffect(() => {\r\n        const onChange = () => {\r\n            const editor = JsonConfigCommandCenter.editor;\r\n            if (editor) {\r\n                updateCallBack.current(editor.get() as JsonPayLoad);\r\n            }\r\n        };\r\n\r\n        (async () => {\r\n            if (jsonEditorElm.current !== null) {\r\n\r\n                const currentConfig = JsonConfigCommandCenter.currentJson;\r\n                await JsonConfigCommandCenter.onLoadSchema(jsonEditorElm.current, onChange, customSchema);\r\n                if(currentConfig) {\r\n                    JsonConfigCommandCenter.setEditorText(currentConfig);\r\n                }\r\n            }\r\n        })();\r\n    }, [jsonEditorElm.current, customSchema]);\r\n\r\n    return (<div className=\"json-editor-container\"  ref={jsonEditorElm} />);\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport Button from \"antd/es/button\";\r\nimport classes from \"../../panels/JsonConfigurator/JsonConfigurator.module.scss\";\r\nimport { Modal } from \"antd\";\r\nimport AceDiff, { AceDiffConstructorOpts } from \"ace-diff\";\r\nimport styles from \"./DiffMerge.module.scss\";\r\nimport { LOCALIZATION, MergeText } from \"../../../constants\";\r\nimport { MergeModes } from \"../../util/enums/MergeModes\";\r\n\r\nconst getJson = (mergedJsonString: string) => {\r\n    let mergedJson;\r\n    try {\r\n        mergedJson = JSON.parse(mergedJsonString);\r\n    } catch (e: any) {\r\n        console.error(\"Error Occurred while parsing json!\");\r\n    }\r\n    return mergedJson\r\n}\r\n\r\nexport function DiffMerge(props: { setShowMerge: (state: boolean) => void, showPopup: boolean, originalConfig: any, editedConfig: any, diffMode: MergeModes, onMerge: (mergedJsonString: string) => void, onCancel: () => void }) {\r\n\r\n    const originalConfig = JSON.stringify(props.originalConfig, null, 2);\r\n    const editedConfig = JSON.stringify(props.editedConfig, null, 2);\r\n    const differInstance = useRef<AceDiff | null>(null);\r\n    const originalDeleted = (props.diffMode === MergeModes.reloadServerDeleted || props.diffMode === MergeModes.saveServerDeleted);\r\n    const mergeText = MergeText[props.diffMode];\r\n\r\n    useEffect(() => {\r\n        if (props.showPopup) {\r\n            setTimeout(() => {\r\n                const differ = new AceDiff(getAceDiffOptions(editedConfig, originalConfig));\r\n                differInstance.current = differ;\r\n            }, 350);\r\n        }\r\n    }, [props.showPopup])\r\n\r\n    const handleCancelMerge = () => {\r\n        props.onCancel();\r\n        props.setShowMerge(false);\r\n    }\r\n\r\n    const handleLeftMerge = () => {\r\n        const differ = differInstance.current;\r\n        if (differ) {\r\n            const mergedJsonString = differ.getEditors().left.getValue();\r\n            const mergedJson = getJson(mergedJsonString);\r\n            props.onMerge(mergedJson);\r\n        }\r\n        props.setShowMerge(false);\r\n    }\r\n\r\n    const handleRightMerge = () => {\r\n        const differ = differInstance.current;\r\n        if (differ) {\r\n            const mergedJsonString = differ.getEditors().right.getValue();\r\n            const mergedJson = getJson(mergedJsonString);\r\n            props.onMerge(mergedJson);\r\n        }\r\n        props.setShowMerge(false);\r\n    }\r\n\r\n\r\n    return (\r\n        <Modal\r\n            title=\"Merge Versions\"\r\n            visible={props.showPopup}\r\n            onCancel={handleCancelMerge}\r\n            width={1050}\r\n            footer={\r\n                [\r\n                    <Button key=\"left\" onClick={handleLeftMerge} hidden={originalDeleted}>{mergeText.btnLeft}</Button>,\r\n                    <Button key=\"your\" onClick={handleRightMerge}>{mergeText.btnRight}</Button>\r\n                ]\r\n            }\r\n        >\r\n            <div className={styles.editorLblContainer}>\r\n                <span className=\"editor-lbl\">{mergeText.txtLeft}</span>\r\n                <span className=\"editor-lbl\">{mergeText.txtRight}</span>\r\n            </div>\r\n            <div className={`${classes.mergePrompt} acediff ${originalDeleted && 'original-deleted'}`}></div>\r\n        </Modal>);\r\n}\r\n\r\nexport function getAceDiffOptions(currentJson: string, serverJson?: string) : AceDiffConstructorOpts {\r\n    let options: AceDiffConstructorOpts;\r\n\r\n    if(!serverJson) {\r\n        options =  {\r\n            element: '.acediff',\r\n            showDiffs: false,\r\n            showConnectors: false,\r\n            diffGranularity: 'specific',\r\n            left: {\r\n                content: LOCALIZATION.FILE_DELETED_IN_SERVER,\r\n                copyLinkEnabled: false,\r\n                editable: false\r\n            },\r\n            right: {\r\n                content: currentJson,\r\n                copyLinkEnabled: false,\r\n            }\r\n        }\r\n    } else {\r\n        options =  {\r\n            element: '.acediff',\r\n            diffGranularity: 'specific',\r\n            left: {\r\n                content: serverJson\r\n            },\r\n            right: {\r\n                content: currentJson\r\n            },\r\n        }\r\n    }\r\n    return options;\r\n}","import React, { useEffect, useRef, useState } from 'react';\r\nimport classes from './JsonConfigurator.module.scss'\r\nimport { JsonConfig, JsonPayLoad, MergeOptions } from \"../../util/types\";\r\nimport { CommandEvent } from \"../../util/Interfaces/CommandEvent\";\r\nimport { JsonConfigCommandCenter } from \"../../../core/JsonConfigCommandCenter\";\r\nimport { CommandPanel } from \"../CommandPanel/CommandPanel\";\r\nimport { SideNavPanel } from '../SideNavPanel/SideNavPanel';\r\nimport { JsonEditorContainer } from \"../../components/JsonEditorContainer/JsonEditorContainer\";\r\nimport { DiffMerge } from \"../../components/DiffMerge/DiffMerge\";\r\nimport { MergeModes } from '../../util/enums/MergeModes';\r\nimport { LOCALIZATION } from '../../../constants';\r\nimport { isEqual } from \"lodash-es\";\r\nimport { IOpenApiSchema } from \"../../../validator/interfaces/IOpenApiSchema\";\r\n\r\nexport const extractErrorMessage = (error: string): string => {\r\n    const errorMsg = `${error}`.split(\" | \")[0].split(\": \")[1];\r\n    console.error(\"Extracted Error message:\", error);\r\n    return errorMsg;\r\n}\r\n\r\nexport const isEqualConfigs = (configA: JsonConfig | null, configB: JsonConfig | null) => {\r\n    return isEqual(configA?.data, configB?.data)\r\n};\r\n\r\nexport const JsonConfigurator: React.FC<any> = () => {\r\n\r\n    const [jsonConfigMap, setJsonConfigMap] = useState<Map<number, JsonConfig> | null>(null);\r\n    const [selectedJsonConfigId, setSelectedJsonConfigId] = useState<number | null>(null);\r\n    const [jsonConfig, setJsonConfig] = useState<JsonConfig | null>(null);\r\n    const [originalJsonConfig, setOriginalJsonConfig] = useState<JsonConfig | null>(null);\r\n    const [customSchema, setCustomSchema] = useState<IOpenApiSchema | null>(null);\r\n\r\n    const jsonEditorElm = useRef<HTMLDivElement | null>(null);\r\n    const [title, setTitle] = useState(LOCALIZATION.UNTITLED);\r\n    const [mode, setMode] = useState('tree');\r\n    const [isEdited, setIsEdited] = useState(false);\r\n    const [refreshing, setRefreshing] = useState<boolean>(false);\r\n\r\n    const [showMerge, setShowMerge] = useState<boolean>(false);\r\n    const compareJsons = useRef<{ originalConfig: string, editedConfig: string }>();\r\n    const handleOkMerge = useRef<any>(() => { console.log('not set'); });\r\n    const handleCancelMerge = useRef<any>(() => null);\r\n    const diffMode = useRef<MergeModes>();\r\n\r\n    const loadJsonConfigs = async () => {\r\n        const jsonConfigs = await JsonConfigCommandCenter.loadJsonConfigs();\r\n        setJsonConfigMap(jsonConfigs);\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadJsonConfigs();\r\n    }, []);\r\n\r\n    const setMergeOptions = (options: MergeOptions) => {\r\n        compareJsons.current = { originalConfig: options.originalConfig, editedConfig: options.editedConfig };\r\n        diffMode.current = options.diffMode;\r\n        handleOkMerge.current = options.onOk;\r\n        handleCancelMerge.current = options.onCancel;\r\n        setShowMerge(true);\r\n    }\r\n\r\n\r\n    const onCommand = async (command: CommandEvent, ...args: any[]): Promise<any> => {\r\n\r\n        const loadJsonConfigsAndReturnLatest = async (id: number | null): Promise<[Map<number, JsonConfig>, JsonConfig | null]> => {\r\n            const jsonConfigs = await JsonConfigCommandCenter.loadJsonConfigs();\r\n\r\n            let selectedJsonConfig = null;\r\n            if (id !== null && jsonConfigs && jsonConfigs.size > 0) {\r\n                selectedJsonConfig = jsonConfigs.get(id);\r\n            }\r\n            return [jsonConfigs, selectedJsonConfig];\r\n        }\r\n\r\n        switch (command) {\r\n            case CommandEvent.mode: {\r\n                setMode(args[0]);\r\n                JsonConfigCommandCenter.onModeChange(args[0]);\r\n                break;\r\n            }\r\n            case CommandEvent.switchConfig: {\r\n                const configId = args[0];\r\n                setSelectedJsonConfigId(configId);\r\n                if (configId === null) { // new config\r\n                    const newConfig = {} as JsonPayLoad;\r\n                    setJsonConfig({\r\n                        data: newConfig,\r\n                        id: null\r\n                    } as JsonConfig);\r\n                    JsonConfigCommandCenter.setEditorText(newConfig);\r\n                    setOriginalJsonConfig(null);\r\n                } else {\r\n                    let selectedJsonConfig;\r\n                    if (jsonConfigMap && jsonConfigMap.size > 0) {\r\n                        selectedJsonConfig = jsonConfigMap.get(configId);\r\n                    }\r\n                    if (selectedJsonConfig) {\r\n                        JsonConfigCommandCenter.setEditorText(selectedJsonConfig?.data);\r\n                        setJsonConfig(selectedJsonConfig);\r\n                        setOriginalJsonConfig(selectedJsonConfig);\r\n                    } else {\r\n                        console.error(\"JSON config not found in map!,\", selectedJsonConfigId)\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case CommandEvent.saveAs: {\r\n                const mergeResult = args[0]; // local changes if server version was deleted in the server on save\r\n                if (mergeResult) { //\r\n                    JsonConfigCommandCenter.updateEditorText(mergeResult);\r\n                }\r\n                const newJson = await JsonConfigCommandCenter.onSaveAs();\r\n                if (newJson) {\r\n                    const configId = newJson.id;\r\n                    const [jsonConfigs, latestConfig] = await loadJsonConfigsAndReturnLatest(configId);\r\n\r\n                    setJsonConfigMap(jsonConfigs);\r\n                    setSelectedJsonConfigId(configId);\r\n\r\n                    if (latestConfig) {\r\n                        if (!isEqualConfigs(latestConfig, jsonConfig)) {\r\n                            JsonConfigCommandCenter.updateEditorText(latestConfig?.data);\r\n                        }\r\n                        setJsonConfig(latestConfig);\r\n                        setOriginalJsonConfig(latestConfig);\r\n                        return latestConfig;\r\n                    } else {\r\n                        console.error(\"JSON config not found in map!,\", selectedJsonConfigId)\r\n                        return null;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case CommandEvent.update: {\r\n                const currentJson = args[0];\r\n                const updatedConfig =  await JsonConfigCommandCenter.onUpdate(selectedJsonConfigId, currentJson);\r\n                if (updatedConfig) {\r\n                    const configId = updatedConfig.id;\r\n                    const [jsonConfigs, latestConfig] = await loadJsonConfigsAndReturnLatest(configId);\r\n\r\n                    setJsonConfigMap(jsonConfigs);\r\n                    setSelectedJsonConfigId(configId);\r\n\r\n                    if (latestConfig) {\r\n                        if (!isEqualConfigs(latestConfig, jsonConfig)) {\r\n                            JsonConfigCommandCenter.updateEditorText(latestConfig?.data);\r\n                        }\r\n                        setJsonConfig(latestConfig);\r\n                        setOriginalJsonConfig(latestConfig);\r\n                    } else {\r\n                        console.error(\"JSON config not found in map!,\", selectedJsonConfigId)\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case CommandEvent.delete: {\r\n                const status = await JsonConfigCommandCenter.onDelete(selectedJsonConfigId);\r\n                if (status) {\r\n                    const jsonConfigs = await JsonConfigCommandCenter.loadJsonConfigs();\r\n                    setJsonConfigMap(jsonConfigs);\r\n                    setSelectedJsonConfigId(null);\r\n\r\n                    // switch to blank\r\n                    const newConfig = {} as JsonPayLoad;\r\n                    setJsonConfig({\r\n                        data: newConfig,\r\n                        id: null\r\n                    } as JsonConfig);\r\n                    JsonConfigCommandCenter.setEditorText(newConfig);\r\n                    setOriginalJsonConfig(null);\r\n                }\r\n                break;\r\n            }\r\n            case CommandEvent.download: {\r\n                JsonConfigCommandCenter.onDownload();\r\n                break;\r\n            }\r\n            case CommandEvent.diff: {\r\n                const mergedConfig = args[0];\r\n                const newConfigJson = { id: selectedJsonConfigId, data: mergedConfig };\r\n                if (!isEqualConfigs(newConfigJson, jsonConfig)) {\r\n                    JsonConfigCommandCenter.updateEditorText(mergedConfig);\r\n                    setJsonConfig(newConfigJson);\r\n                }\r\n                break;\r\n            }\r\n            case CommandEvent.loadSchema: {\r\n                setCustomSchema(args[0] || null);\r\n                break;\r\n            }\r\n            case CommandEvent.reload: {\r\n                setRefreshing(true);\r\n\r\n                const currentJson = args[0] || jsonConfig?.data; // local changes if server version was deleted in the server on save\r\n\r\n                const [jsonConfigs, latestConfig] = await loadJsonConfigsAndReturnLatest(selectedJsonConfigId);\r\n\r\n                setJsonConfigMap(jsonConfigs);\r\n\r\n                if (latestConfig) {\r\n\r\n                    JsonConfigCommandCenter.updateEditorText(currentJson);\r\n                    setJsonConfig({ id: selectedJsonConfigId, data: currentJson});\r\n\r\n                    if(!isEdited) {\r\n                        JsonConfigCommandCenter.setEditorText(latestConfig?.data);\r\n                        setJsonConfig(latestConfig);\r\n                    }\r\n                    setOriginalJsonConfig(latestConfig);\r\n                } else {\r\n                    // if currently selected config is deleted\r\n                    if (!isEdited) { // if view not edited reset\r\n                        const newConfig = {} as JsonPayLoad;\r\n                        setJsonConfig({\r\n                            data: newConfig,\r\n                            id: null\r\n                        } as JsonConfig);\r\n                        JsonConfigCommandCenter.setEditorText(newConfig);\r\n                    } else {\r\n                        JsonConfigCommandCenter.updateEditorText(currentJson);\r\n                    }\r\n\r\n                    setSelectedJsonConfigId(null);\r\n                    setOriginalJsonConfig(null);\r\n                }\r\n\r\n                setRefreshing(false);\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"beforeunload\", function (e) {\r\n            if (isEdited) {\r\n                (e || window.event).returnValue = true; //Gecko + IE\r\n                return true; //Gecko + Webkit, Safari, Chrome etc.\r\n            }\r\n            return false;\r\n        });\r\n    }, []);\r\n\r\n    // set title\r\n\r\n    useEffect(() => {\r\n        const checkEditStatus = (currentConfig: JsonConfig | null, originalConfig: JsonConfig | null) => {\r\n            if (currentConfig) {\r\n                if (originalConfig === null) {\r\n                    return !!Object.keys(currentConfig?.data).length;\r\n                } else {\r\n                    return !isEqualConfigs(originalConfig, currentConfig);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n\r\n        const updateTitle = (currentConfig: JsonConfig | null, originalConfig: JsonConfig | null): void => {\r\n            const editStatus = checkEditStatus(currentConfig, originalConfig);\r\n\r\n            if (JsonConfigCommandCenter.editor) {\r\n                const currentTitle = (editStatus ? '*' : '') + (JsonConfigCommandCenter.currentFileName || LOCALIZATION.UNTITLED);\r\n                const currentMode = JsonConfigCommandCenter.editor?.getMode();\r\n\r\n                setTitle(currentTitle);\r\n                setMode(currentMode);\r\n            }\r\n            setIsEdited(editStatus);\r\n        }\r\n\r\n\r\n        updateTitle(jsonConfig, originalJsonConfig);\r\n    }, [jsonConfig, originalJsonConfig, jsonConfigMap]);\r\n\r\n    const onUpdateJson = (json: JsonPayLoad) => {\r\n        setJsonConfig({\r\n            id: selectedJsonConfigId || null,\r\n            data: json\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className={classes.configurator}>\r\n            <div className={classes.sideNavPanel}>\r\n                <SideNavPanel\r\n                    isEdited={isEdited}\r\n                    commandEvent={onCommand}\r\n                    jsonConfigMap={jsonConfigMap}\r\n                    selectedJsonConfigId={selectedJsonConfigId} />\r\n            </div>\r\n            <div className={classes.fullEditor}>\r\n                <div className={classes.editorCommandContainer}>\r\n                    <CommandPanel\r\n                        title={title}\r\n                        mode={mode}\r\n                        refreshing={refreshing}\r\n                        setRefreshing={setRefreshing}\r\n                        commandEvent={onCommand}\r\n                        isEdited={isEdited}\r\n                        setMergeOptions={setMergeOptions}\r\n                        selectedJsonConfigId={selectedJsonConfigId}\r\n                        originalJsonConfig={originalJsonConfig}\r\n                    />\r\n                    <JsonEditorContainer\r\n                        onUpdateJson={onUpdateJson}\r\n                        jsonEditorElm={jsonEditorElm}\r\n                        customSchema={customSchema}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {diffMode.current && showMerge &&\r\n                    <DiffMerge\r\n                        setShowMerge={setShowMerge}\r\n                        showPopup={showMerge}\r\n                        originalConfig={compareJsons.current?.originalConfig}\r\n                        editedConfig={compareJsons.current?.editedConfig}\r\n                        onMerge={handleOkMerge.current}\r\n                        onCancel={handleCancelMerge.current}\r\n                        diffMode={diffMode.current}\r\n                    />\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useEffect} from \"react\";\r\nimport { CogniteClient, isLoginPopupWindow, loginPopupHandler, POPUP } from \"@cognite/sdk\";\r\nimport { ClientSDKProvider, PureObject, TenantSelector } from \"@cognite/gearbox\";\r\nimport styles from \"./TenantLogin.module.scss\";\r\nimport {\r\n    APP_NAME,\r\n    DEV_MODE,\r\n    LOGIN_API_KEY_TEXT,\r\n    LOGIN_CDF_ENVIRONMENT_OPT_TEXT,\r\n    LOGIN_HEADER\r\n} from \"../../../constants\";\r\nimport {Client} from \"../../../cdf/client\";\r\n\r\nexport function TenantLogin(props: {\r\n    children: any\r\n    sdk: CogniteClient,\r\n    signedIn: boolean,\r\n    onLogin: (...status: any) => void,\r\n    authOptions: { project?: string, apiKey?: string, oauthToken?: string }\r\n}): JSX.Element | null {\r\n\r\n    const advancedOptions = { [LOGIN_CDF_ENVIRONMENT_OPT_TEXT]: '', [LOGIN_API_KEY_TEXT]: ''};\r\n\r\n    useEffect(() => {\r\n        if (DEV_MODE) {\r\n            Client.sdk.loginWithOAuth({\r\n                project: process.env.REACT_APP_PROJECT || '',\r\n                accessToken: localStorage.getItem('token') || '',\r\n                onAuthenticate: (login: any) => {\r\n                    login.skip();\r\n                },\r\n                onTokens: ({accessToken}) => {\r\n                    localStorage.setItem(\"token\", accessToken);\r\n                },\r\n            });\r\n            Client.sdk.authenticate();\r\n            props.onLogin(true);\r\n        }\r\n    }, []);\r\n\r\n    if (isLoginPopupWindow()) {\r\n        loginPopupHandler();\r\n        return null;\r\n    }\r\n\r\n    const oninvalidTenant = (value: any) => {\r\n        console.error(\"Tenant Error\", value);\r\n    };\r\n\r\n    const onFinish = async (project: string, options: PureObject | null) => {\r\n        if(project){\r\n            const cdfEnv = options && options[LOGIN_CDF_ENVIRONMENT_OPT_TEXT];\r\n            const apiKey = options && options[LOGIN_API_KEY_TEXT];\r\n            if(cdfEnv) {\r\n                props.sdk.setBaseUrl(`https://${cdfEnv}.cognitedata.com`);\r\n            }\r\n            const savedToken = localStorage.getItem(\"token\") || \"\";\r\n\r\n            if(apiKey) {\r\n                props.sdk.loginWithApiKey({\r\n                    project: project,\r\n                    apiKey: String(apiKey)\r\n                });\r\n            } else {\r\n                props.sdk.loginWithOAuth({\r\n                    project: project,\r\n                    accessToken: savedToken,\r\n                    onAuthenticate: POPUP,\r\n                    onTokens: ({accessToken}) => {\r\n                        localStorage.setItem(\"token\", accessToken);\r\n                    },\r\n                });\r\n                await props.sdk.authenticate();\r\n            }\r\n\r\n            const status = await props.sdk.login.status();\r\n            if(status?.user){\r\n                props.onLogin(true);\r\n            }\r\n        }\r\n        console.log('Success:', project);\r\n        return true;\r\n    };\r\n\r\n    if (props.signedIn) {\r\n        return <>{props.children}</>;\r\n    } else {\r\n        // return <CustomLogin sdk={props.sdk} onLogin={props.onLogin} />;\r\n        return (\r\n            <div className={styles.loginContainer}>\r\n                <ClientSDKProvider client={props.sdk}>\r\n                    <TenantSelector\r\n                        title={APP_NAME}\r\n                        header={LOGIN_HEADER}\r\n                        onTenantSelected={onFinish}\r\n                        advancedOptions={advancedOptions}\r\n                        onInvalidTenant={oninvalidTenant}/>\r\n                </ClientSDKProvider>\r\n            </div>);\r\n    }\r\n}\r\n","import React, { useState } from 'react';\r\nimport './App.scss';\r\nimport { JsonConfigurator } from './panels/JsonConfigurator/JsonConfigurator';\r\nimport { Client } from \"../cdf/client\";\r\nimport { TenantLogin } from \"./components/TenantLogin/TenantLogin\";\r\nimport { USE_LOCAL_FILES_AND_NO_LOGIN } from '../constants';\r\n\r\nconst cogniteClient = Client.sdk;\r\n\r\nfunction App(props: { auth?: { project?: string, apiKey?: string, oauthToken?: string}}): JSX.Element {\r\n    const authOptions = props.auth || {};\r\n    const [signedIn, setSignIn] = useState(false);\r\n    const onSignIn = (status: boolean) => {\r\n        if(status) {\r\n            setSignIn(true);\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n        {USE_LOCAL_FILES_AND_NO_LOGIN ? <JsonConfigurator /> :\r\n        <TenantLogin signedIn={signedIn} onLogin={onSignIn} sdk={cogniteClient} authOptions={authOptions}>\r\n            <JsonConfigurator />\r\n        </TenantLogin>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './userInterface/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"configurator\":\"JsonConfigurator_configurator__i-TKa\",\"sideNavPanel\":\"JsonConfigurator_sideNavPanel__aDDsj\",\"fullEditor\":\"JsonConfigurator_fullEditor__2fJn5\",\"editorCommandContainer\":\"JsonConfigurator_editorCommandContainer__3cLWy\",\"mergePrompt\":\"JsonConfigurator_mergePrompt__10QgT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"jsonConfigItem\":\"ConfigSelector_jsonConfigItem__3SODy\",\"selected\":\"ConfigSelector_selected__zb71M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBtn\":\"CommandItem_commandBtn__252f1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editorLblContainer\":\"DiffMerge_editorLblContainer__GWEMX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"TenantLogin_loginContainer__HDefR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandsContainer\":\"CommandPanel_commandsContainer__1bxRR\",\"errorPanel\":\"CommandPanel_errorPanel__DYrcH\",\"errorItem\":\"CommandPanel_errorItem__2HW5b\",\"leftPanel\":\"CommandPanel_leftPanel__3ooCM\",\"titlePanel\":\"CommandPanel_titlePanel__1pPXt\",\"rightPanel\":\"CommandPanel_rightPanel__3nEXv\",\"titleText\":\"CommandPanel_titleText__1X-VX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SideNavPanel_container__2_E3_\",\"top\":\"SideNavPanel_top__35a76\",\"schemaUpload\":\"SideNavPanel_schemaUpload__3WQI1\",\"createNewBtn\":\"SideNavPanel_createNewBtn__27X3U\",\"subtitle\":\"SideNavPanel_subtitle__117WR\",\"jsonConfigContainer\":\"SideNavPanel_jsonConfigContainer__2sEQY\",\"jsonConfigs\":\"SideNavPanel_jsonConfigs__22qVT\",\"logo\":\"SideNavPanel_logo__2TiVA\",\"title\":\"SideNavPanel_title__3dEdA\"};"],"sourceRoot":""}