{"version":3,"sources":["userInterface/panels/JsonConfigurator/JsonConfigurator.module.scss","userInterface/panels/SideNavPanel/SideNavPanel.module.scss","userInterface/components/ConfigSelector/ConfigSelector.module.scss","userInterface/components/CommandItem/CommandItem.module.scss","userInterface/panels/EditorPanel/EditorPanel.module.scss","userInterface/components/DiffMerge/DiffMerge.module.scss","userInterface/components/TenantLogin/TenantLogin.module.scss","userInterface/panels/CommandPanel/CommandPanel.module.scss","userInterface/util/Interfaces/CommandEvent.ts","validator/interfaces/IValidationResult.ts","validator/enum/DataType.enum.ts","validator/nodes/BaseNode.ts","core/CogniteJsonEditor.ts","config/twinconfig.yaml","validator/enum/DataFormat.enum.ts","validator/nodes/MapNode.ts","validator/nodes/ArrayNode.ts","validator/nodes/BooleanNode.ts","validator/nodes/NumberNode.ts","validator/nodes/ObjectNode.ts","validator/nodes/StringNode.ts","validator/util/Parsers.ts","validator/util/NodeFactory.ts","constants.ts","validator/util/Helper.ts","validator/Validator.ts","core/CogniteJsonEditorOptions.ts","cdf/client.ts","core/DigitalTwinApi.ts","core/JsonConfigCommandCenter.ts","userInterface/util/enums/Modes.ts","userInterface/components/CommandItem/CommandItem.tsx","userInterface/panels/CommandPanel/CommandPanel.tsx","userInterface/components/ConfigSelector/ConfigSelector.tsx","userInterface/panels/SideNavPanel/SideNavPanel.tsx","assets/cognite.png","userInterface/components/JsonEditorContainer/JsonEditorContainer.tsx","userInterface/panels/EditorPanel/EditorPanel.tsx","userInterface/components/DiffMerge/DiffMerge.tsx","userInterface/panels/JsonConfigurator/JsonConfigurator.tsx","userInterface/components/TenantLogin/TenantLogin.tsx","userInterface/App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","CommandEvent","ErrorType","DataType","AssociationType","CogniteJsonEditor","elm","options","json","JSONEditor","DataFormat","BaseNode","type","schema","data","isRequired","nullable","description","association","discriminator","example","subSchemas","_data","this","getAssociationType","allOf","ALLOF","oneOf","ONEOF","anyOf","ANYOF","not","NOT","NONE","mapping","result","keysForDiscriminatorTypes","Object","keys","entries","key","schemaPathSections","split","typeIndicatorKey","length","node","rootDataNode","propertyName","string","possibleValues","console","error","MapNode","sampleData","map","minProperties","maxProperties","ArrayNode","array","minItems","maxItems","uniqueItems","BooleanNode","boolean","NumberNode","number","minimum","maximum","ObjectNode","object","StringNode","maxLength","pattern","enum","ParseType","any","addedRefs","getPrimitiveObject","additionalProperties","undefined","items","populateChildren","obj","dat","subSchema","children","rowData","properties","required","findIndex","s","assign","LOGIN_CDF_ENVIRONMENT_OPT_TEXT","LOGIN_API_KEY_TEXT","LOCALIZATION","RETRIEVE_CONFIGS_FAIL","UNTITLED","INCONSISTENT_VALUE","SAVE_TITLE","SAVE_CONTENT","SAVE_SUCCESS","SAVE_ERROR","SAVE_INVALID_FILE","SAVE_WITH_ERRORS_TITLE","SAVE_WITH_ERRORS_CONTENT","UPLOAD_TITLE","UPLOAD_CONTENT","UPLOAD_SUCCESS","UPLOAD_ERROR","UPLOAD_INVALID_FILE","UPLOAD_WITH_ERRORS_TITLE","UPLOAD_WITH_ERRORS_CONTENT","DELETE_TITLE","DELETE_CONTENT","DELETE_SUCCESS","DELETE_ERROR","DELETE_INVALID_FILE","REFRESH_TITLE","REFRESH_CONTENT","REFRESH_SUCCESS","REFRESH_ERROR","SWITCH_TITLE","SWITCH_CONTENT","REMOVE_ENABLED","REMOVE_DISABLED","REMOVE_INVALID_PATH","REMOVE_MANDATORY","REMOVE_MINIMUM_LENGTH","REQUIRED_FIELDS_NOT_AVAIL","REQUIRED_FIELD_NOT_AVAIL","DISCRIM_INVALID_TYPE","NOT_VALID_KEY","MAX_ARR_ELEMENTS_EXCEEDED","INVALID_MAX_ARR_ELEMENTS","MIN_ARR_ELEMENTS_NOT_FOUND","INVALID_MIN_ARR_ELEMENTS","VAL_NOT_BE_EMPTY","VAL_NOT_OF_POSSIBLE_VALS","VAL_NOT_NUMBER","VAL_CANNOT_BE_LESS","VAL_CANNOT_BE_GREATER","VAL_CANNOT_BE_BOOLEAN","VAL_CANNOT_BE_NUMBER","VAL_CANNOT_BE_STRING","VAL_CANNOT_BE_NULL","VAL_NOT_BOOLEAN","VAL_NOT_STRING","STRING_LENGTH_EXCEEDED","STRING_VIOLATES_PATTERN","ARR_ELEMENT_VIOLATES_UNIQUENESS","getNodeInstance","group","rootJsonNode","paths","resultNode","path","nextResultNodeTypeFromData","subTypeInData","values","InvalidPath","resultData","getJson","getPrimitiveValue","fillAllFields","val","valNode","replaceString","str","replacement","replace","defaultGroup","propCount","allNodes","getNodeMeta","rootJson","getSample","sample","CogniteJsonEditorOptions","mode","modes","limitDragging","enableSort","enableTransform","indentation","escapeUnicode","onChange","JsonConfigCommandCenter","updateTitle","onError","err","message","onValidate","schemaMeta","validateFields","onValidationError","errors","hasErrors","onChangeText","menuItems","currentJson","parentPath","pop","removePossibility","root","resultParent","slice","RequiredNode","subTree","forEach","step","MinLength","removeNode","item","text","click","submenu","createValidInsertMenu","className","title","filter","schemaMetaData","missingRequiredFields","validatedKeys","Set","schemaType","discriminatorErrors","validateDiscriminator","concat","childKey","childValue","childPath","childMeta","isChildKeyRequired","hasKey","prototype","hasOwnProperty","call","add","childErrors","push","jsonChildKey","has","newPath","arrayValidationErrors","validateArray","callNextIteration","mapChildKey","mapChild","i","valueErrors","validateValues","join","Number","elementCount","isNaN","toString","shouldBeUnique","uniqueSet","index","itemPath","discriminatorType","discriminatorMeta","value","datatype","associationType","isOneOfPossibleValues","possibleVal","isBoolean","isString","regex","RegExp","matches","test","validInsertItems","getValidInsertItems","existingKeys","getPathObject","validMenuItems","subItem","includes","dataType","res","replaceKeyWithDiscriminatorTypes","subNode","subKey","templates","autocomplete","onCreateMenu","allTemplates","ele","extractField","template","field","subVal","trigger","getOptions","input","editor","Promise","resolve","reject","JSON","parse","getText","stringNode","Client","cogniteClient","sdk","CogniteClient","appId","DigitalTwinApi","jsonList","a","get","getBaseUrl","project","then","response","log","jsonConfigs","jsonConfigIdMap","Map","jsonConfig","jsonConfigId","id","set","saveJson","post","updateJson","configId","deleteJson","YAML","load","ymlFile","ymlJson","SwaggerParser","validate","api","rootSchema","components","schemas","schemaNode","c","childrenNodes","key1","key2","val2","apiInstance","editorInstance","originalJsonConfig","getOriginalJsonConfig","stringify","setMode","currentJsonText","e","header","name","titleUpdateCallback","currentTitle","isEdited","currentFileName","currentMode","getMode","loadJsonConfigs","onSaveAs","onUpdate","selectedJsonConfigId","args","onDelete","onDownload","fileName","blob","Blob","saveAs","Modes","CommandItem","props","styles","commandBtn","icon","size","onClick","confirm","Modal","isUpdated","selectedJsonConfig","catch","extractErrorMessage","updatedJsonConfig","CommandPanel","useState","setTitle","onReloadHandler","mergedJson","commandEvent","reload","success","warning","localConfig","serverConfig","saveAfterMerge","onOk","onCancel","setMergeOptions","save","createdId","reloadJsonConfigs","update","classes","commandsContainer","leftPanel","checkedChildren","unCheckedChildren","checked","evt","paste","default","titlePanel","titleText","rightPanel","btn","WarningTwoTone","twoToneColor","content","ExclamationCircleTwoTone","download","delete","warn","okType","ConfigSelector","jsonConfigMap","element","bordered","dataSource","renderItem","Item","jsonConfigItem","selected","onJsonConfigSelectHandler","SideNavPanel","ExclamationCircleOutlined","switchConfig","top","alt","src","logo","Text","strong","createNewBtn","jsonConfigContainer","JsonEditorContainer","jsonEditorElm","useRef","useEffect","current","createEditor","ref","EditorPanel","jsonView","mergedJsonString","DiffMerge","serverJson","localJson","differInstance","showPopup","setTimeout","differ","AceDiff","left","right","visible","setShowMerge","width","footer","getEditors","getValue","onMerge","editorLblContainer","mergePrompt","errorMsg","JsonConfigurator","setJsonConfigMap","setSelectedJsonConfigId","setJsonConfig","setOriginalJsonConfig","showMerge","compareJsons","handleOkMerge","handleCancelMerge","resolvedJson","setSelectedJsonConfig","onCommand","command","onModeChange","window","addEventListener","event","returnValue","configurator","sideNavPanel","fullEditor","editorCommandContainer","newJson","TenantLogin","advancedOptions","isLoginPopupWindow","loginPopupHandler","onFinish","cdfEnv","apiKey","setBaseUrl","savedToken","localStorage","getItem","loginWithApiKey","String","loginWithOAuth","accessToken","onAuthenticate","POPUP","onTokens","setItem","authenticate","login","status","user","onLogin","signedIn","loginContainer","client","onTenantSelected","onInvalidTenant","App","authOptions","auth","setSignIn","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a060e75d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"configurator\":\"JsonConfigurator_configurator__i-TKa\",\"sideNavPanel\":\"JsonConfigurator_sideNavPanel__aDDsj\",\"fullEditor\":\"JsonConfigurator_fullEditor__2fJn5\",\"editorCommandContainer\":\"JsonConfigurator_editorCommandContainer__3cLWy\",\"mergePrompt\":\"JsonConfigurator_mergePrompt__10QgT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"jsonConfigContainer\":\"SideNavPanel_jsonConfigContainer__2sEQY\",\"title\":\"SideNavPanel_title__3dEdA\",\"top\":\"SideNavPanel_top__35a76\",\"logo\":\"SideNavPanel_logo__2TiVA\",\"createNewBtn\":\"SideNavPanel_createNewBtn__27X3U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"jsonConfigItem\":\"ConfigSelector_jsonConfigItem__3SODy\",\"selected\":\"ConfigSelector_selected__zb71M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBtn\":\"CommandItem_commandBtn__252f1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"jsonView\":\"EditorPanel_jsonView__21Jwv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editorLblContainer\":\"DiffMerge_editorLblContainer__GWEMX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"TenantLogin_loginContainer__HDefR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandsContainer\":\"CommandPanel_commandsContainer__1bxRR\",\"leftPanel\":\"CommandPanel_leftPanel__3ooCM\",\"titlePanel\":\"CommandPanel_titlePanel__1pPXt\",\"rightPanel\":\"CommandPanel_rightPanel__3nEXv\",\"titleText\":\"CommandPanel_titleText__1X-VX\"};","export enum CommandEvent {\r\n    mode = \"mode\",\r\n    reload='reload',\r\n    switchConfig = \"switchConfig\",\r\n    saveAs = \"saveAs\",\r\n    update = \"update\",\r\n    delete = \"delete\",\r\n    download = \"download\",\r\n    refresh = \"refresh\"\r\n}\r\n","import { BaseNode } from \"../nodes/BaseNode\";\r\n\r\nexport enum ErrorType {\r\n    InvalidPath = 'InvalidPath',\r\n    RequiredNode = 'RequiredNode',\r\n    MinLength = 'MinLength'\r\n}\r\n\r\nexport interface IValidationError {\r\n    type: ErrorType;\r\n    text?: string;\r\n}\r\n\r\nexport interface IValidationResult {\r\n    group: string;\r\n    resultNode?: BaseNode | null;           // Affected node with meta data\r\n    resultData?: Record<string, unknown>    // Full result json after changes are affected\r\n    error?: IValidationError;               // If error occured\r\n}","export enum DataType {\r\n    any = \"any\",\r\n    string = \"string\",\r\n    number = \"number\",\r\n    boolean = \"boolean\",\r\n    object = \"object\",\r\n    array = \"array\",\r\n    map = \"map\"\r\n  }","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { rootDataNode } from \"../Validator\";\r\nimport { StringNode } from \"./StringNode\";\r\n\r\nexport type BaseNodes = { [key: string]: BaseNode };\r\nexport type IData =\r\n  | BaseNodes\r\n  | BaseNode[]\r\n  | string\r\n  | number\r\n  | boolean\r\n  | undefined;\r\nexport type Discriminator = {\r\n  mapping: { [key: string]: string };\r\n  propertyName: string;\r\n};\r\n\r\nexport enum AssociationType {\r\n  ALLOF, ONEOF, ANYOF, NOT, NONE\r\n}\r\n\r\nexport class BaseNode {\r\n  public type?: DataType;\r\n  public nullable?: boolean;\r\n  public description: string;\r\n  public isRequired?: boolean;\r\n  public association: AssociationType;\r\n  public discriminator?: Discriminator;\r\n  public example: any;\r\n  public subSchemas: BaseNode[] = [];\r\n  protected _data: IData;\r\n\r\n  constructor(\r\n    type: DataType,\r\n    schema: ISchemaNode,\r\n    data: IData,\r\n    isRequired: boolean\r\n  ) {\r\n    this.type = type;\r\n    this.description = schema.description;\r\n    this.discriminator = schema.discriminator;\r\n    this._data = data;\r\n    this.isRequired = isRequired;\r\n    this.example = schema.example;\r\n    this.nullable = schema.nullable;\r\n    this.association = this.getAssociationType(schema);\r\n  }\r\n\r\n  /**\r\n   * Dicriminator:\r\n   * This method returns a object as {key(discriminator type): values{object related to that type}}\r\n   * But from CogniteJsonEditorOptions class, it dynamically get the type of json and replace this object with\r\n   * correct object type\r\n   */\r\n  public get data(): IData {\r\n    if (this.discriminator && this.discriminator.mapping ) {\r\n\r\n      const result: BaseNodes = {};\r\n      const keysForDiscriminatorTypes = Object.keys(this.discriminator.mapping);      \r\n\r\n      for (const [key, val] of Object.entries(this.discriminator.mapping)) {\r\n        const schemaPathSections = val.split(\"/\");\r\n\r\n        // Get node for specific type of dicriminator. It is the last section of the schemaPath array\r\n        const typeIndicatorKey = schemaPathSections[schemaPathSections.length - 1];\r\n        const node = rootDataNode[typeIndicatorKey];\r\n\r\n        if(node && node._data instanceof Object){\r\n          // TODO: create StringNode here.(It is not allowed in TS; create BaseNode inside a BaseNode)\r\n          if((node._data as BaseNodes)[this.discriminator.propertyName]){\r\n            (node._data as BaseNodes)[this.discriminator.propertyName] = {\r\n              type: DataType.string,\r\n              data: key,\r\n              description: (node._data as BaseNodes)[this.discriminator.propertyName].description,\r\n              possibleValues: keysForDiscriminatorTypes,\r\n              isRequired: true\r\n            } as StringNode;\r\n          } else {\r\n            console.error('Error: Failed to read data from BaseNode');\r\n          }\r\n          result[key] = node;\r\n        }\r\n      }\r\n      /**\r\n       * {\r\n       *    customHierarchy: { data: { type: {data: \"customHierarchy\", type: \"string\"}}... }\r\n       *    fullAssetHierarchy: { data... }\r\n       *    noHierarchy: { data... }\r\n       * }\r\n       */\r\n      return result;\r\n    } else {\r\n      return this._data;\r\n    }\r\n  }\r\n\r\n  public set data(data: IData) {\r\n    this._data = data;\r\n  }\r\n\r\n  public get rowData(): IData {\r\n    return this._data;\r\n  }\r\n\r\n  private getAssociationType(schema: ISchemaNode) {\r\n    if(schema.allOf){\r\n      return AssociationType.ALLOF;\r\n    } \r\n    if(schema.oneOf){\r\n      return AssociationType.ONEOF\r\n    }\r\n    if(schema.anyOf){\r\n      return AssociationType.ANYOF;\r\n    }\r\n    if(schema.not){\r\n      return AssociationType.NOT\r\n    }\r\n    return AssociationType.NONE;\r\n  }\r\n}\r\n","import JSONEditor from \"jsoneditor\";\r\nimport { CogniteJsonEditorOptions } from \"./CogniteJsonEditorOptions\";\r\n\r\nexport class CogniteJsonEditor extends JSONEditor {\r\n\r\n    constructor(elm: HTMLElement, options: CogniteJsonEditorOptions, json?: any) {\r\n        super(elm, options.options, json);\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/twinconfig.69952d13.yaml\";","export enum DataFormat {\r\n    unspecified = \"unspecified\",\r\n    int32 = \"int32\",\r\n    int64 = \"int64\",\r\n    float = \"float\",\r\n    double = \"double\",\r\n  }","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class MapNode extends BaseNode {\r\n  public sampleData: BaseNode | undefined;\r\n  public minProperties: number | undefined;\r\n  public maxProperties: number | undefined;\r\n\r\n  constructor(\r\n    schema: ISchemaNode,\r\n    data: IData,\r\n    isRequired: boolean,\r\n    sampleData: BaseNode | undefined\r\n  ) {\r\n    super(DataType.map, schema, data, isRequired);\r\n    this.sampleData = sampleData;\r\n    this.minProperties = schema.minProperties;\r\n    this.maxProperties = schema.maxProperties;\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class ArrayNode extends BaseNode {\r\n  public minItems?: number | undefined;\r\n  public maxItems?: number | undefined;\r\n  public sampleData: BaseNode | undefined;\r\n  public uniqueItems: boolean | undefined;\r\n\r\n  constructor(schema: ISchemaNode, data: IData, isRequired: boolean, sampleData?: BaseNode) {\r\n    super(DataType.array, schema, [], isRequired);\r\n    this.minItems = schema.minItems;\r\n    this.maxItems = schema.maxItems;\r\n    this._data = data;\r\n    this.sampleData = sampleData;\r\n    this.uniqueItems = schema.uniqueItems;\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class BooleanNode extends BaseNode {\r\n    constructor(schema: ISchemaNode, data: IData, isRequired: boolean){\r\n      super(DataType.boolean, schema, data, isRequired);\r\n    }\r\n  }","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class NumberNode extends BaseNode {\r\n  public minimum: number | undefined;\r\n  public maximum: number | undefined;\r\n\r\n  constructor(schema: ISchemaNode, data: IData, isRequired: boolean) {\r\n    super(DataType.number, schema, data, isRequired);\r\n    this.minimum = schema.minimum;\r\n    this.maximum = schema.maximum;\r\n  }\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class ObjectNode extends BaseNode {\r\n    constructor(schema: ISchemaNode, data: IData, isRequired: boolean){\r\n      super(DataType.object, schema, data, isRequired);\r\n    }\r\n  }","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { BaseNode, IData } from \"./BaseNode\";\r\n\r\nexport class StringNode extends BaseNode {\r\n  public possibleValues: (string|null)[] | undefined;\r\n  public maxLength: number | undefined;\r\n  public pattern: string | undefined;\r\n\r\n  constructor(schema: ISchemaNode, data: IData, isRequired: boolean) {\r\n    super(DataType.string, schema, data, isRequired);\r\n    this.maxLength = schema.maxLength;\r\n    this.pattern = schema.pattern;\r\n    if (schema.enum) {\r\n      this.possibleValues = schema.enum;\r\n    }\r\n  }\r\n}\r\n","import { DataFormat } from \"../enum/DataFormat.enum\";\r\nimport { DataType } from \"../enum/DataType.enum\";\r\n\r\nexport const ParseType = (type: string): DataType => {\r\n  switch (type) {\r\n    case \"string\":\r\n      return DataType.string;\r\n    case \"number\":\r\n    case \"integer\":\r\n      return DataType.number;\r\n    case \"object\":\r\n      return DataType.object;\r\n    case \"boolean\":\r\n      return DataType.boolean;\r\n    case \"array\":\r\n      return DataType.array;\r\n    default:\r\n      return DataType.any;\r\n  }\r\n};\r\n\r\nexport const getDefaultPrimitiveVal = (type: string): any => {\r\n  switch (type) {\r\n    case \"string\":\r\n      return '';\r\n    case \"number\":\r\n    case \"integer\":\r\n      return 0;\r\n    case \"object\":\r\n      return {};\r\n    case \"boolean\":\r\n      return false;\r\n    case \"array\":\r\n      return [];\r\n    default:\r\n      return undefined;\r\n  }\r\n};\r\n\r\nexport const ParseFormat = (format: string): DataFormat => {\r\n  switch (format) {\r\n    case \"int32\":\r\n      return DataFormat.int32;\r\n    case \"int64\":\r\n      return DataFormat.int64;\r\n    case \"double\":\r\n      return DataFormat.double;\r\n    case \"float\":\r\n      return DataFormat.float;\r\n    default:\r\n      return DataFormat.unspecified;\r\n  }\r\n};\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ISchemaNode } from \"../interfaces/ISchemaNode\";\r\nimport { MapNode } from \"../nodes/MapNode\";\r\nimport { ArrayNode } from \"../nodes/ArrayNode\";\r\nimport { BaseNode, BaseNodes } from \"../nodes/BaseNode\";\r\nimport { BooleanNode } from \"../nodes/BooleanNode\";\r\nimport { NumberNode } from \"../nodes/NumberNode\";\r\nimport { ObjectNode } from \"../nodes/ObjectNode\";\r\nimport { StringNode } from \"../nodes/StringNode\";\r\nimport { ParseType } from \"./Parsers\";\r\n\r\n// To store previously populated children to avoid circular cycles \r\nconst addedRefs: any = {};\r\n\r\nconst getPrimitiveObject = (schema: ISchemaNode, isRequired: boolean) => {\r\n  if(schema.additionalProperties){\r\n    return new MapNode(schema, {}, isRequired, undefined);\r\n  } else if(schema.items){\r\n    return new ArrayNode(schema, [], isRequired);\r\n  }\r\n  // TODO: why map type is not handled here\r\n  switch (ParseType(schema.type)) {\r\n    case DataType.array:\r\n      return new ArrayNode(schema, [], isRequired);\r\n    case DataType.string:\r\n      return new StringNode(schema, \"\", isRequired);\r\n    case DataType.number:\r\n      return new NumberNode(schema, 0, isRequired);\r\n    case DataType.boolean:\r\n      return new BooleanNode(schema, false, isRequired);\r\n    case DataType.object:\r\n      return new ObjectNode(schema, {}, isRequired);\r\n    default:\r\n      return new BaseNode(DataType.any, schema, {}, isRequired);\r\n  }\r\n};\r\n\r\nexport const populateChildren = (\r\n  schema: ISchemaNode,\r\n  isRequired: boolean\r\n): BaseNode => {\r\n  // Any part of the discriminator is not handled here. All are handled in `get Data` method of BaseNode\r\n\r\n  if (schema.not) {\r\n    return new BaseNode(ParseType(schema.not.type), schema, {}, isRequired);\r\n\r\n  } else if (schema.oneOf) {\r\n    // schema.oneOf is handled only if discriminator presents at schma,(Check BaseNode `get data()` implementation)\r\n    return new BaseNode(DataType.object, schema, {}, isRequired);\r\n\r\n  } else if (schema.allOf) {\r\n    const obj = new ObjectNode(schema, {}, isRequired);\r\n    let dat: any = {};\r\n\r\n    for (const subSchema of schema.allOf) {\r\n      const children = populateChildren(subSchema, isRequired);\r\n      if(children.rowData instanceof Object){\r\n        dat = { ...dat, ...children.rowData};\r\n      }\r\n    }\r\n    obj.data = dat;\r\n    return obj;\r\n\r\n  } else if (schema.properties) {\r\n    const obj = new ObjectNode(schema, {}, isRequired);\r\n    for (const [key, subSchema] of Object.entries(schema.properties)) {\r\n\r\n      const required = schema.required\r\n        ? schema.required.findIndex((s) => s === key) !== -1\r\n        : false;\r\n      \r\n      let children: BaseNode = getPrimitiveObject(subSchema, required);\r\n\r\n      // If these children are previousy generated, then used the cached one to avoid causing to circular iterations\r\n      if(subSchema.description && addedRefs[subSchema.description]){\r\n        children = addedRefs[subSchema.description];\r\n      } else {\r\n        addedRefs[subSchema.description] = children;\r\n        Object.assign(children, populateChildren(subSchema, required));   \r\n      }\r\n      // Since `{}` is passed as data for obj, type can be BaseNodes\r\n      (obj.rowData as BaseNodes)[key] = children;\r\n    }\r\n    return obj;\r\n  \r\n  // MapNodes and ArrayNodes are handled in a similar way\r\n  } else if (schema.additionalProperties) {\r\n      const obj = new MapNode(schema, {}, false, undefined);\r\n      obj.sampleData = populateChildren(schema.additionalProperties, false); \r\n      return obj;\r\n  } else if (schema.items) {\r\n      const obj = new ArrayNode(schema, [], isRequired, undefined);\r\n      obj.sampleData = populateChildren(schema.items, false);\r\n      return obj;\r\n  } else {\r\n    return getPrimitiveObject(schema, isRequired);\r\n  }\r\n};\r\n","export const APP_NAME = \"Cognite Remote Configurator\";\r\nexport const LOGIN_HEADER = \"Enter Your Project Name\";\r\nexport const LOGIN_CDF_ENVIRONMENT_OPT_TEXT = \"cdfEnvironment\";\r\nexport const LOGIN_API_KEY_TEXT = \"apiKey\";\r\nexport const DEV_MODE = false;\r\nexport const USE_LOCAL_FILES_AND_NO_LOGIN = false;\r\nexport const STRING_PLACEHOLDER = \"$$\";\r\n\r\n// String Constants\r\nexport const LOCALIZATION = {\r\n    RETRIEVE_CONFIGS_FAIL: 'Unable to retrieve configurations! {{error}}',\r\n    UNTITLED: \"Untitled\",\r\n    INCONSISTENT_VALUE: 'Inconsistent value. Remove and insert it again to fill missing fields',\r\n\r\n    // Save command\r\n    SAVE_TITLE: 'Create New Configuration',\r\n    SAVE_CONTENT: 'Do you want to save the new configuration?',\r\n    SAVE_SUCCESS: 'Configuration saved successfully!',\r\n    SAVE_ERROR: 'Save Cancelled! {{error}}',\r\n    SAVE_INVALID_FILE: 'Save Cancelled! Please add header -> name field',\r\n\r\n    SAVE_WITH_ERRORS_TITLE:'Create New Configuration',\r\n    SAVE_WITH_ERRORS_CONTENT:'Configuration contains errors! Are you sure you want to save this configuration?',\r\n\r\n    // Upload command\r\n    UPLOAD_TITLE: 'Update Configuration',\r\n    UPLOAD_CONTENT: 'Do you want to update the configuration with new changes?',\r\n    UPLOAD_SUCCESS: 'Configuration updated successfully!',\r\n    UPLOAD_ERROR: 'Update Cancelled! {{error}}',\r\n    UPLOAD_INVALID_FILE: 'Update failed!',\r\n\r\n    UPLOAD_WITH_ERRORS_TITLE:'Update Configuration',\r\n    UPLOAD_WITH_ERRORS_CONTENT:'Configuration contains errors! Are you sure you want to update with new changes?',\r\n\r\n    // Delete command\r\n    DELETE_TITLE: 'Delete Configuration',\r\n    DELETE_CONTENT: 'Are you sure you want to permanently delete this configuration?',\r\n    DELETE_SUCCESS: 'Configuration deleted successfully!',\r\n    DELETE_ERROR: 'Delete Cancelled! {{error}}',\r\n    DELETE_INVALID_FILE: 'Delete Cancelled! Please select a configuration',\r\n\r\n    // Refresh Command\r\n    REFRESH_TITLE: 'Refresh Configuration',\r\n    REFRESH_CONTENT: 'Refreshing will fetch the latest version of this configuration from the server',\r\n    REFRESH_SUCCESS: 'Configuration updated successfully!',\r\n    REFRESH_ERROR: 'Refresh Cancelled! {{error}}',\r\n\r\n    // switch config\r\n    SWITCH_TITLE:'Switch Config?',\r\n    SWITCH_CONTENT:'You have some unsaved changes. Are you sure you want to switch without saving?',\r\n\r\n    // Remove item menu option\r\n    REMOVE_ENABLED: 'Remove this field',\r\n    REMOVE_DISABLED: 'Cannot Remove.',\r\n    REMOVE_INVALID_PATH: 'Remove this field. This field contains an invalid path',\r\n    REMOVE_MANDATORY: 'Cannot Remove. This field is mandatory',\r\n    REMOVE_MINIMUM_LENGTH: 'Cannot Remove. Array has a minimum length',\r\n\r\n    // Validation\r\n    REQUIRED_FIELDS_NOT_AVAIL: \"Required fields: $$ not available in object\",\r\n    REQUIRED_FIELD_NOT_AVAIL: \"Required field: $$ not available!\",\r\n    DISCRIM_INVALID_TYPE: \"Required field: $$ does not have a valid type!\",\r\n    NOT_VALID_KEY: \"key: $$, is not a valid key!\",\r\n    MAX_ARR_ELEMENTS_EXCEEDED: \"Number of array elements cannot exceed $$ !\",\r\n    INVALID_MAX_ARR_ELEMENTS: \"Invalid maxElement configuration for $$ !\",\r\n    MIN_ARR_ELEMENTS_NOT_FOUND: \"Number of array elements cannot be lower than $$ !\",\r\n    INVALID_MIN_ARR_ELEMENTS: \"Invalid minElement configuration for $$ !\",\r\n    VAL_NOT_BE_EMPTY: \"Value cannot be empty!\",\r\n    VAL_NOT_OF_POSSIBLE_VALS: \"Value not one of the possible values!\",\r\n    VAL_NOT_NUMBER: \"Value is not a number!\",\r\n    VAL_CANNOT_BE_LESS: \"Value cannot be less than $$!\",\r\n    VAL_CANNOT_BE_GREATER: \"Value cannot be greater than $$!\",\r\n    VAL_CANNOT_BE_BOOLEAN: \"Value cannot be boolean!\",\r\n    VAL_CANNOT_BE_NUMBER: \"Value cannot be number!\",\r\n    VAL_CANNOT_BE_STRING: \"Value cannot be string!\",\r\n    VAL_CANNOT_BE_NULL: \"Value cannot be null!\",\r\n    VAL_NOT_BOOLEAN: \"Value is not a boolean!\",\r\n    VAL_NOT_STRING: \"Value is not a string!\",\r\n    STRING_LENGTH_EXCEEDED: \"String length cannot exceed $$ characters!\",\r\n    STRING_VIOLATES_PATTERN: \"String does not provide a match for pattern: $$!\",\r\n    ARR_ELEMENT_VIOLATES_UNIQUENESS: \"item: $$ violates array uniqueness constraint!\"\r\n}\r\n","import { DataType } from \"../enum/DataType.enum\";\r\nimport { ErrorType, IValidationResult } from \"../interfaces/IValidationResult\";\r\nimport { MapNode } from \"../nodes/MapNode\";\r\nimport { ArrayNode } from \"../nodes/ArrayNode\";\r\nimport { BaseNode, BaseNodes } from \"../nodes/BaseNode\";\r\nimport { ObjectNode } from \"../nodes/ObjectNode\";\r\nimport { STRING_PLACEHOLDER } from \"../../constants\";\r\n\r\nexport const removeDataNode = (\r\n  data: Record<string, unknown>,\r\n  paths: (string | number)[]\r\n): Record<string, unknown> => {\r\n  const obj: any = { ...data };\r\n  let next = obj;\r\n  for (let i = 0; i < paths.length; i++) {\r\n    if (i === paths.length - 1) {\r\n      delete next[paths[i]];\r\n      break;\r\n    }\r\n    next = next[paths[i]];\r\n  }\r\n  return obj;\r\n};\r\n\r\nexport const getNodeInstance = (\r\n  group: string,\r\n  rootDataNode: BaseNodes,\r\n  rootJsonNode: Record<string, unknown>,\r\n  paths: (string | number)[]\r\n): IValidationResult => {\r\n  let resultNode: BaseNode|undefined = rootDataNode[group];\r\n  let json = rootJsonNode;\r\n  // let nextResultNode;\r\n\r\n  for (const path of paths) {  \r\n    // Looping through node path\r\n\r\n    if (resultNode) {\r\n      // If discriminator, then get the relevant type\r\n      if(resultNode.discriminator && resultNode.data){\r\n        let nextResultNodeTypeFromData;\r\n        if(json){\r\n          //Try to obtain discriminator type from currentJson\r\n          const subTypeInData: any = json[resultNode.discriminator.propertyName];\r\n          nextResultNodeTypeFromData = (resultNode.data as BaseNodes)[subTypeInData];\r\n        }\r\n        resultNode = nextResultNodeTypeFromData ?? Object.values(resultNode.data)[0];\r\n      }\r\n    \r\n      // If AdditionalNode/ArrayNode, then get the nextNode from sample data\r\n      if (resultNode instanceof MapNode || resultNode instanceof ArrayNode) {\r\n        resultNode = resultNode.sampleData;\r\n      } else {\r\n      // Get the nextNode from path\r\n        resultNode = (resultNode?.data as BaseNodes)[path]; \r\n      }\r\n      \r\n      if (!resultNode) {\r\n        return {\r\n          group,\r\n          resultNode: null,\r\n          error: {\r\n            type: ErrorType.InvalidPath,\r\n          },\r\n        };\r\n      }\r\n    }\r\n\r\n    if(json){\r\n      json = json[path] as Record<string, unknown>;\r\n    }\r\n  }\r\n\r\n  const resultData = getJson(resultNode);\r\n  return { group, resultNode, resultData };\r\n};\r\n\r\nconst getPrimitiveValue = (obj: BaseNode | undefined) => {\r\n  switch (obj?.type) {\r\n    case DataType.string:\r\n      return obj.data ?? \"\";\r\n    case DataType.number:\r\n      return obj.data ?? 0;\r\n    case DataType.boolean:\r\n      return obj.data ?? false;\r\n    case DataType.object:\r\n    case DataType.map:\r\n      return {};\r\n    case DataType.array:\r\n      return [];\r\n\r\n    default:\r\n      return undefined;\r\n  }\r\n};\r\n\r\nexport const getJson = (obj: BaseNode | undefined, fillAllFields = false): any => {\r\n  /**\r\n   * If example json value found, then just return the provided example.\r\n   */\r\n  if(obj?.example){\r\n    return obj.example;\r\n  }\r\n\r\n  if (obj instanceof ArrayNode) {\r\n    return [];\r\n  } else if (obj instanceof ObjectNode) {\r\n    if (obj.data) {\r\n       const dat: any = {};\r\n       for (const [key, val] of Object.entries(obj.data)) {\r\n         const valNode = val as BaseNode;\r\n         if(!valNode.discriminator && (valNode.isRequired || fillAllFields)){\r\n           dat[key] = getJson(val);\r\n         }\r\n       }\r\n       return dat;\r\n     } else {\r\n       return getPrimitiveValue(obj);\r\n     }\r\n   }  // No need to handle MapNodes, since they are optional always \r\n    else {\r\n    return getPrimitiveValue(obj);\r\n  }\r\n};\r\n\r\n\r\nexport const replaceString = (str: string, replacement: string): string => {\r\n  if(str) {\r\n    return str.replace(STRING_PLACEHOLDER, replacement);\r\n  } else {\r\n    console.error(\"String replace value cannot be empty!\")\r\n    return \"\";\r\n  }\r\n}\r\n\r\n","import YAML from \"yamljs\";\r\nimport ymlFile from \"../config/twinconfig.yaml\";\r\nimport SwaggerParser from \"@apidevtools/swagger-parser\";\r\nimport { ISchemaNode } from \"./interfaces/ISchemaNode\";\r\nimport { ErrorType, IValidationResult } from \"./interfaces/IValidationResult\";\r\nimport { populateChildren } from \"./util/NodeFactory\";\r\nimport { BaseNode } from \"./nodes/BaseNode\";\r\nimport { getJson, getNodeInstance } from \"./util/Helper\";\r\nimport { DataType } from \"./enum/DataType.enum\";\r\nimport { MapNode } from \"./nodes/MapNode\";\r\nimport { ArrayNode } from \"./nodes/ArrayNode\";\r\n\r\nexport interface TemplateNode {\r\n  key: string;\r\n  data: Record<string, unknown>;\r\n  node: BaseNode;\r\n  sample: any;\r\n}\r\nconst defaultGroup = \"TwinConfiguration\";\r\nexport const rootDataNode: { [key: string]: BaseNode } = {};\r\n\r\n// propCount in a counter which is used to make the description is uniquie for all schemaTypes. \r\n// Otherwise schema types cannot be identified uniquely from templates array\r\nlet propCount = 0;\r\n\r\nconst allNodes: TemplateNode[] = [];\r\n\r\nexport const getNodeMeta = (\r\n  paths: (string | number)[],\r\n  rootJson: any,\r\n  group: string = defaultGroup\r\n): IValidationResult => {\r\n  return getNodeInstance(group, rootDataNode, rootJson, paths);\r\n};\r\n\r\nexport const getAllNodes = (): TemplateNode[] => {\r\n  return allNodes;\r\n};\r\n\r\nexport const removeNode = (\r\n  data: Record<string, unknown>,\r\n  paths: (string | number)[],\r\n  group: string = defaultGroup\r\n): IValidationResult => {\r\n  const root = { ...rootDataNode };\r\n  // TODO: Can we avoid 2 calls to getNodeInstance\r\n  const result = getNodeInstance(group, root, data, paths);\r\n  const resultParent =\r\n    paths.length > 1\r\n      ? getNodeInstance(group, root, data, paths.slice(0, paths.length - 1))\r\n      : null;\r\n\r\n  if (!result.error) {\r\n    if (result.resultNode?.isRequired) {\r\n      return {\r\n        group,\r\n        error: {\r\n          type: ErrorType.RequiredNode,\r\n        },\r\n      };\r\n    } else {\r\n      if (\r\n        resultParent &&\r\n        resultParent.resultNode instanceof ArrayNode &&\r\n        resultParent.resultNode.minItems\r\n      ) {\r\n        let subTree = data;\r\n        paths.slice(0, paths.length - 1).forEach((step: number | string) => {\r\n          subTree = subTree[step] as Record<string, unknown>;\r\n        });\r\n\r\n        if (\r\n          ((subTree as unknown) as any[]).length <=\r\n          resultParent.resultNode.minItems\r\n        ) {\r\n          return {\r\n            group,\r\n            error: {\r\n              type: ErrorType.MinLength,\r\n            },\r\n          };\r\n        }\r\n      }\r\n\r\n      return {\r\n        group,\r\n        resultNode: null,\r\n      };\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nconst getSample = (node: BaseNode) => {\r\n  if (node instanceof MapNode || node instanceof ArrayNode) {\r\n    const sample = node.sampleData;\r\n    const js = getJson(sample);\r\n    return js;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const loadSchema = (): Promise<void> => {\r\n  return new Promise((resolve, reject) => {\r\n    YAML.load(ymlFile, (ymlJson: any) => {\r\n      SwaggerParser.validate(ymlJson, (err, api) => {\r\n        if (api) {\r\n          const rootSchema = api.components.schemas;\r\n\r\n          // Assign a unique identifire for all the property descriptions\r\n          for (const val of Object.values(rootSchema)) {\r\n            const schemaNode = val as ISchemaNode;\r\n            schemaNode.description = `${schemaNode.description}${++propCount}`;\r\n\r\n            if(schemaNode.properties){\r\n              for(const c of Object.values(schemaNode.properties)){\r\n                c.description = `${c.description}${++propCount}`;\r\n              }\r\n            }\r\n          }\r\n\r\n          for (const [key, val] of Object.entries(rootSchema)) {\r\n            const childrenNodes = populateChildren(val as ISchemaNode, true);\r\n            rootDataNode[key] = childrenNodes;\r\n          }\r\n\r\n          // Populate root nodes\r\n          for (const [key1, group] of Object.entries(rootDataNode)) {\r\n            if (group.data) {\r\n              for (const [key2, val2] of Object.entries(group.data)) {\r\n                if (group.type === DataType.object) {\r\n                  allNodes.push({\r\n                    key: key1 + \":\" + key2,\r\n                    node: val2,\r\n                    data: getJson(group, true)[key2],\r\n                    sample: getSample((group.data as any)[key2]), // Used only for Array, Map\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n          console.log(\"Schema YML\", rootSchema);\r\n          console.log(\"Schema Node\", rootDataNode);\r\n          console.log(\"All Nodes\", allNodes);\r\n          resolve();\r\n        } else {\r\n          console.error(err);\r\n          reject();\r\n        }\r\n      });\r\n    });\r\n  });\r\n};\r\n","import JSONEditor, {\r\n    AutoCompleteElementType,\r\n    JSONEditorMode,\r\n    JSONEditorOptions,\r\n    JSONPath,\r\n    MenuItem,\r\n    MenuItemNode,\r\n    ParseError,\r\n    SchemaValidationError,\r\n    ValidationError\r\n} from \"jsoneditor\";\r\nimport isBoolean from \"lodash-es/isBoolean\";\r\nimport isString from \"lodash-es/isString\";\r\nimport { getAllNodes, getNodeMeta, removeNode } from \"../validator/Validator\";\r\nimport { ErrorType } from \"../validator/interfaces/IValidationResult\";\r\nimport { StringNode } from \"../validator/nodes/StringNode\";\r\nimport { JsonConfigCommandCenter } from \"./JsonConfigCommandCenter\";\r\nimport { MapNode } from \"../validator/nodes/MapNode\";\r\nimport { AssociationType, BaseNode, BaseNodes } from \"../validator/nodes/BaseNode\";\r\nimport { ArrayNode } from \"../validator/nodes/ArrayNode\";\r\nimport { DataType } from \"../validator/enum/DataType.enum\";\r\nimport { getJson, replaceString } from \"../validator/util/Helper\";\r\nimport message from 'antd/es/message';\r\nimport { LOCALIZATION } from '../constants'\r\nimport { JsonEditorOptions } from \"../userInterface/util/types\";\r\n\r\nconst extractField = (key: string) => {\r\n    return key.split(\":\")[1]\r\n}\r\n\r\nexport class CogniteJsonEditorOptions implements JSONEditorOptions {\r\n\r\n    public get options(): JsonEditorOptions {\r\n        return {\r\n            mode: this.mode,\r\n            // modes: this.modes,\r\n            templates: this.templates,\r\n            autocomplete: this.autocomplete,\r\n            enableSort: this.enableSort,\r\n            indentation: this.indentation,\r\n            escapeUnicode: this.escapeUnicode,\r\n            enableTransform: this.enableTransform,\r\n            onCreateMenu: ((menuItems: MenuItem[], node: MenuItemNode) => {\r\n                return this.onCreateMenu(menuItems, node);\r\n            }),\r\n            onValidate: this.onValidate,\r\n            onChange: this.onChange,\r\n            onError: this.onError,\r\n            onValidationError: this.onValidationError,\r\n            onChangeText: this.onChangeText,\r\n            limitDragging: this.limitDragging,\r\n        }\r\n    }\r\n\r\n    public mode: \"tree\" | \"code\" | \"preview\" | undefined = 'tree';\r\n\r\n    public modes: JSONEditorMode[] = [\"tree\", \"code\"];\r\n\r\n    public limitDragging = true;\r\n\r\n    /**\r\n     * Create and return all possible templates for inserting\r\n     */\r\n    public get templates(): any {\r\n        const allTemplates: any = [];\r\n\r\n        // Here we handle all the add possibilities for each node\r\n        getAllNodes().forEach(ele => {\r\n            const key = extractField(ele.key);\r\n\r\n            // Handle: Add as a property of object\r\n            const template = {\r\n                text: key,\r\n                title: `${key}-${ele.node.description}`,\r\n                className: 'jsoneditor-type-object',\r\n                field: key,\r\n                value: ele.data\r\n            }\r\n            allTemplates.push(template);\r\n\r\n            // Handle: Add as an association type\r\n            if (ele.node.discriminator && ele.node.data) {\r\n                // If discriminator exists, add all sub types as templates\r\n                Object.entries(ele.node.data).forEach(([subKey, subVal]) => {\r\n                    const template = {\r\n                        text: `${key}-${subKey}`,\r\n                        title: `${key}-${subKey}-${subVal.description}`,\r\n                        className: \"jsoneditor-type-object\",\r\n                        field: `${key}`,\r\n                        value: getJson(subVal as BaseNode),\r\n                    };\r\n                    allTemplates.push(template);\r\n                });\r\n            }\r\n\r\n            // Handle: Add as sample object for array/map\r\n            if (ele.node instanceof ArrayNode || ele.node instanceof MapNode) {\r\n                // Handle: if sample object is associationType\r\n                if (ele.node.sampleData && ele.node.sampleData.discriminator) {\r\n                    // If discriminator exists, add all sub types as templates\r\n                    Object.entries(ele.node.sampleData.data as BaseNodes).forEach(([subKey, subVal]) => {\r\n                        const template = {\r\n                            text: `${key}-${subKey}`,\r\n                            title: `${key}-${subKey}-${subVal.description}`,\r\n                            className: \"jsoneditor-type-object\",\r\n                            field: `${key}-sample`,\r\n                            value: getJson(subVal as BaseNode),\r\n                        };\r\n                        allTemplates.push(template);\r\n                    });\r\n                // Handle: add as a direct sample object\r\n                } else {\r\n                    const template = {\r\n                        text: `${key}-sample`,\r\n                        title: `${key}-sample-${ele.node.description}`,\r\n                        className: 'jsoneditor-type-object',\r\n                        field: `${key}-sample`,\r\n                        value: ele.sample\r\n                    }\r\n                    allTemplates.push(template);\r\n                }\r\n            }\r\n        });\r\n\r\n        return allTemplates;\r\n    }\r\n\r\n    // remove unwanted items from top Command Bar\r\n    public enableSort = false;\r\n    public enableTransform = false;\r\n\r\n    public indentation = 4;\r\n    public escapeUnicode = true;\r\n\r\n    public onCreateMenu(menuItems: MenuItem[], node: MenuItemNode): any[] {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        const path = node.path;\r\n        // get parent Path for add function\r\n        const parentPath: string[] = [...path];\r\n        // Skip case: adding first child\r\n        if (node.type !== \"append\") {\r\n            parentPath.pop();\r\n        }\r\n\r\n        const removePossibility = removeNode(currentJson, [...path]);\r\n\r\n        // Creating a new MenuItem array that only contains valid items\r\n        // and replace submenu with valid items\r\n        menuItems.forEach(item => {\r\n            if (item.text === \"Insert\") {\r\n                item.click = undefined;\r\n                item.submenu = this.createValidInsertMenu(item.submenu, currentJson, parentPath);\r\n                item.className = \"json-editor-insert-btn\"\r\n            }\r\n            // adding same logic to Append\r\n            else if (node.type === \"append\" && item.text === \"Append\") {\r\n                item.text = \"Insert\";\r\n                item.click = undefined;\r\n                item.submenu = this.createValidInsertMenu(item.submenu, currentJson, parentPath);\r\n            }\r\n\r\n            // if removeNode validation returns error\r\n            // Remove default Remove(Delete) function and alert the error\r\n            // except for ErrorType.InvalidPath\r\n            else if (item.text === \"Remove\") {\r\n                item.title = LOCALIZATION.REMOVE_ENABLED;\r\n                if (removePossibility.error) {\r\n                    // allows Remove even it has InvalidPath error\r\n                    if (removePossibility.error.type === ErrorType.InvalidPath) {\r\n                        item.title = LOCALIZATION.REMOVE_INVALID_PATH;\r\n                    } else {\r\n                        item.className = \"warning-triangle\";\r\n                        switch (removePossibility.error.type) {\r\n                            case ErrorType.RequiredNode:\r\n                                item.title = LOCALIZATION.REMOVE_MANDATORY;\r\n                                item.click = () => {\r\n                                    message.error(LOCALIZATION.REMOVE_MANDATORY);\r\n                                }\r\n                                break;\r\n                            case ErrorType.MinLength:\r\n                                item.title = LOCALIZATION.REMOVE_MINIMUM_LENGTH;\r\n                                item.click = () => {\r\n                                    message.error(LOCALIZATION.REMOVE_MINIMUM_LENGTH);\r\n                                }\r\n                                break;\r\n                            default:\r\n                                item.title = LOCALIZATION.REMOVE_DISABLED;\r\n                                item.click = () => {\r\n                                    message.error(LOCALIZATION.REMOVE_DISABLED);\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // remove unwanted menu items\r\n        menuItems = menuItems.filter(item => {\r\n            return item.text !== \"Type\" &&\r\n                item.text !== \"Sort\" &&\r\n                item.text !== \"Transform\" &&\r\n                item.text !== \"Extract\" &&\r\n                item.text !== \"Duplicate\" &&\r\n                item.text !== \"Append\" &&\r\n                item.type !== \"separator\"\r\n        })\r\n\r\n        return menuItems;\r\n    }\r\n\r\n    public get autocomplete(): any {\r\n        return {\r\n            filter: 'start',\r\n            trigger: 'focus',\r\n            getOptions: (text: string, path: JSONPath, input: AutoCompleteElementType, editor: JSONEditor) => {\r\n                return new Promise((resolve, reject) => {\r\n                    const rootJson = JSON.parse(editor.getText());\r\n                    const { resultNode } = getNodeMeta([...path], rootJson);\r\n\r\n                    if (resultNode && resultNode.type === DataType.string) {\r\n                        const stringNode = resultNode as StringNode;\r\n                        if (stringNode.possibleValues && stringNode.possibleValues.length > 0) {\r\n                            resolve(stringNode.possibleValues)\r\n                        } else {\r\n                            reject()\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    public onChange = (): void => {\r\n        JsonConfigCommandCenter.updateTitle();\r\n    }\r\n\r\n    public onError = (err: any): void => {\r\n        if (err) {\r\n            message.error(err.message);\r\n        }\r\n    }\r\n\r\n\r\n    public onValidate = (json: any): ValidationError[] | Promise<ValidationError[]> => {\r\n\r\n        const schemaMeta = getNodeMeta([], json).resultNode; // meta of root node from schema\r\n        const errors = this.validateFields(json, schemaMeta);\r\n        return errors;\r\n    }\r\n\r\n    public onValidationError = (errors: ReadonlyArray<SchemaValidationError | ParseError>): void => {\r\n        JsonConfigCommandCenter.hasErrors = !!errors.length;\r\n    }\r\n\r\n    public onChangeText = (): void => {\r\n        JsonConfigCommandCenter.updateTitle();\r\n    }\r\n\r\n    /**\r\n     * Validates if\r\n     * 1. All required keys from schema are available\r\n     * 2. there are no invalid keys\r\n     * 3. Discriminate properties are available and follows the schema\r\n     * @param json\r\n     * @param schemaMeta\r\n     * @param discriminator\r\n     * @param paths\r\n     * @param errors\r\n     * @private\r\n     */\r\n    private validateFields(json: any, schemaMeta: any, paths: any[] = [], errors: ValidationError[] = []): ValidationError[] {\r\n\r\n        const missingRequiredFields = [];\r\n        const validatedKeys = new Set<string>();\r\n        const schemaType = schemaMeta.type;\r\n        let schemaMetaData: any;\r\n        const discriminator = schemaMeta.discriminator;\r\n\r\n        if(schemaType === DataType.any) {\r\n            return errors;\r\n        }\r\n\r\n        if (discriminator) {\r\n            if (schemaType === DataType.object) {\r\n                schemaMetaData = schemaMeta.data;\r\n            } else if (schemaType === DataType.array || schemaType === DataType.map) {\r\n                schemaMetaData = schemaMeta.sampleData;\r\n            }\r\n            const discriminatorErrors = this.validateDiscriminator(json, schemaMetaData, discriminator, paths);\r\n            errors = discriminatorErrors.concat(errors);\r\n        } else {\r\n            switch (schemaType) {\r\n                case DataType.object: {\r\n                    schemaMetaData = schemaMeta.data;\r\n\r\n                    for (const childKey of Object.keys(schemaMetaData)) {\r\n                        const childValue = json[childKey];\r\n                        const childPath = paths.concat([childKey]);\r\n                        const childMeta = schemaMetaData[childKey];\r\n\r\n                        const isChildKeyRequired = childMeta.isRequired;\r\n\r\n                        const hasKey = Object.prototype.hasOwnProperty.call(json, childKey);\r\n\r\n                        if (!hasKey) {\r\n                            if (isChildKeyRequired) {\r\n                                missingRequiredFields.push(childKey);\r\n                            }\r\n                        } else {\r\n                            validatedKeys.add(childKey);\r\n\r\n                            const childErrors = this.validateFields(childValue, childMeta, childPath);\r\n                            errors = childErrors.concat(errors);\r\n\r\n                        }\r\n                    }\r\n\r\n                    for (const jsonChildKey of Object.keys(json)) { // validate unnecessary fields\r\n                        if (!validatedKeys.has(jsonChildKey)) {\r\n                            const newPath = paths.concat([jsonChildKey]);\r\n                            errors.push({ path: newPath, message: replaceString(LOCALIZATION.NOT_VALID_KEY, jsonChildKey) });\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case DataType.map:\r\n                case DataType.array: {\r\n\r\n                    if (schemaType === DataType.array) {\r\n                        const arrayValidationErrors = this.validateArray(json, schemaMeta, paths);\r\n                        errors = arrayValidationErrors.concat(errors);\r\n                    }\r\n\r\n                    schemaMetaData = schemaMeta.sampleData;\r\n\r\n                    const callNextIteration = (childKey: any, childValue: any) => {\r\n                        const childPath = paths.concat([childKey]);\r\n\r\n                        const childErrors = this.validateFields(childValue, schemaMetaData, childPath);\r\n                        errors = childErrors.concat(errors);\r\n                    }\r\n\r\n                    if (schemaType === DataType.map) {\r\n                        for (const mapChildKey of Object.keys(json)) {\r\n                            const mapChild = json[mapChildKey];\r\n                            callNextIteration(mapChildKey, mapChild);\r\n                        }\r\n                    } else {\r\n                        for (let i = 0; i < json.length; i++) {\r\n                            const mapChild = json[i];\r\n                            callNextIteration(i, mapChild);\r\n                        }\r\n                    }\r\n\r\n                    break;\r\n                }\r\n                default: {\r\n                    schemaMetaData = schemaMeta;\r\n                    const valueErrors = this.validateValues(json, schemaMetaData, paths);\r\n                    errors = valueErrors.concat(errors);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (missingRequiredFields.length >= 1) {\r\n            if (missingRequiredFields.length === 1) {\r\n                errors.push({ path: paths, message: replaceString(LOCALIZATION.REQUIRED_FIELD_NOT_AVAIL, missingRequiredFields[0]) });\r\n            } else {\r\n                errors.push({ path: paths, message: replaceString(LOCALIZATION.REQUIRED_FIELDS_NOT_AVAIL, missingRequiredFields.join(',')) });\r\n            }\r\n        }\r\n\r\n        return errors;\r\n    }\r\n\r\n    private validateArray(json: any, schema: any, paths: any, errors: ValidationError[] = []) {\r\n\r\n        if (schema.type === DataType.array) {\r\n            const maxItems = Number(schema.maxItems);\r\n            const minItems = Number(schema.minItems);\r\n\r\n            const elementCount = json.length;\r\n            if (!isNaN(maxItems)) {\r\n                if (maxItems >= 0) {\r\n                    if (elementCount > maxItems) {\r\n                        errors.push({ path: paths, message: replaceString(LOCALIZATION.MAX_ARR_ELEMENTS_EXCEEDED, maxItems.toString()) });\r\n                    }\r\n                } else {\r\n                    console.error(`Invalid maxElement configuration for ${paths.join(\".\")}`);\r\n                }\r\n            }\r\n            if (!isNaN(minItems)) {\r\n                if (minItems >= 0) {\r\n                    if (elementCount < minItems) {\r\n                        errors.push({ path: paths, message: replaceString(LOCALIZATION.MIN_ARR_ELEMENTS_NOT_FOUND, minItems.toString()) });\r\n                    }\r\n                } else {\r\n                    console.error(`Invalid minElement configuration for ${paths.join(\".\")}`);\r\n                }\r\n            }\r\n\r\n            const shouldBeUnique = schema.uniqueItems;\r\n\r\n            // uniqueness validation\r\n\r\n            if(shouldBeUnique) {\r\n                const uniqueSet = new Set();\r\n                json.forEach( (item: any, index: number) => {\r\n                    if(uniqueSet.has(item)) {\r\n                        const itemPath = paths.concat([index]);\r\n                        errors.push({ path: itemPath, message: replaceString(LOCALIZATION.ARR_ELEMENT_VIOLATES_UNIQUENESS, item.toString()) });\r\n                    } else {\r\n                        uniqueSet.add(item);\r\n                    }\r\n                } );\r\n            }\r\n        } else {\r\n            console.error(`Schema type: ${schema.type} cannot be validated as an array!`);\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    private validateDiscriminator(json: any, schema: any, discriminator: { propertyName: string }, paths: any[], errors: ValidationError[] = []): ValidationError[] {\r\n        const discriminatorType = json[discriminator.propertyName];\r\n\r\n        if (discriminatorType) { // whether discriminator property is available\r\n            const discriminatorMeta = schema[discriminatorType];\r\n            if (discriminatorMeta) {\r\n                const childErrors = this.validateFields(json, discriminatorMeta, paths);\r\n                errors = childErrors.concat(errors);\r\n            } else {\r\n                errors.push({ path: paths, message: replaceString(LOCALIZATION.DISCRIM_INVALID_TYPE, discriminator.propertyName) });\r\n            }\r\n        } else {\r\n            errors.push({ path: paths, message: replaceString(LOCALIZATION.REQUIRED_FIELD_NOT_AVAIL, discriminator.propertyName) });\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    private validateValues(value: string | boolean | number | null | undefined, schema: any, paths: any[], errors: ValidationError[] = []): ValidationError[] {\r\n        if (schema) {\r\n            const datatype: DataType = schema.type;\r\n            const possibleValues = schema.possibleValues;\r\n            const isRequired = schema.isRequired;\r\n            const associationType = schema.association;\r\n            const nullable = schema.nullable;\r\n\r\n            if (possibleValues && possibleValues.length) {\r\n                let isOneOfPossibleValues = false;\r\n                for (const possibleVal of possibleValues) {\r\n                    if (value === possibleVal) {\r\n                        isOneOfPossibleValues = true;\r\n                    }\r\n                }\r\n                if (!isOneOfPossibleValues) {\r\n                    errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_OF_POSSIBLE_VALS });\r\n                }\r\n            }\r\n\r\n            if(!nullable && value === null) {\r\n                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_NULL });\r\n            }\r\n\r\n            if (!value && value !== 0) {\r\n                if (isRequired) {\r\n                    errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_BE_EMPTY });\r\n                }\r\n            } else {\r\n                switch (datatype) {\r\n                    case DataType.number: {\r\n                        const minimum = schema.minimum;\r\n                        const maximum = schema.maximum;\r\n\r\n                        if (associationType === AssociationType.NOT) {\r\n                            if (!isNaN(Number(value))) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_NUMBER });\r\n                            }\r\n                        } else {\r\n                            if (isNaN(Number(value))) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_NUMBER });\r\n                            } else {\r\n                                if (minimum) {\r\n                                    if (value < minimum) {\r\n                                        errors.push({ path: paths, message: replaceString(LOCALIZATION.VAL_CANNOT_BE_LESS, minimum) });\r\n                                    }\r\n                                }\r\n                                if (maximum) {\r\n                                    if (value > maximum) {\r\n                                        errors.push({ path: paths, message: replaceString(LOCALIZATION.VAL_CANNOT_BE_GREATER, maximum) });\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case DataType.boolean: {\r\n                        if (associationType === AssociationType.NOT) {\r\n                            if (isBoolean(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_BOOLEAN });\r\n                            }\r\n                        } else {\r\n                            if (!isBoolean(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_BOOLEAN });\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case DataType.string: {\r\n                        if (associationType === AssociationType.NOT) {\r\n                            if (isString(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_CANNOT_BE_STRING });\r\n                            }\r\n                        } else {\r\n                            if (!isString(value)) {\r\n                                errors.push({ path: paths, message: LOCALIZATION.VAL_NOT_STRING });\r\n                            } else {\r\n                                const maxLength = Number(schema.maxLength);\r\n                                const length = value.length;\r\n                                if(maxLength && length > maxLength) {\r\n                                    errors.push({ path: paths, message: replaceString(LOCALIZATION.STRING_LENGTH_EXCEEDED, maxLength.toString()) });\r\n                                }\r\n\r\n                                const pattern = schema.pattern;\r\n\r\n                                if (pattern) {\r\n                                    const regex = new RegExp(pattern);\r\n                                    const matches = regex.test(value);\r\n\r\n                                    if(!matches) {\r\n                                        errors.push({ path: paths, message: replaceString(LOCALIZATION.STRING_VIOLATES_PATTERN, pattern) });\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    private createValidInsertMenu(submenu: MenuItem[] | undefined, currentJson: any, parentPath: (string | number)[]): any {\r\n\r\n        const { resultNode, error } = getNodeMeta([...parentPath], currentJson);\r\n\r\n        if (error) {\r\n            message.error(LOCALIZATION.INCONSISTENT_VALUE);\r\n            return undefined;\r\n        }\r\n\r\n        const validInsertItems: any = this.getValidInsertItems(parentPath, currentJson, resultNode);\r\n        const existingKeys: (number | string)[] = Object.keys(this.getPathObject(currentJson, [...parentPath]));\r\n\r\n        if (submenu === undefined || submenu.length === 0) {\r\n            return undefined;\r\n        }\r\n\r\n        const validMenuItems: MenuItem[] = [];\r\n\r\n        submenu?.forEach(subItem => {\r\n            if (validInsertItems !== undefined && validInsertItems.length !== 0) {\r\n                Object.keys(validInsertItems).forEach((key: any) => {\r\n                    if ((subItem.text === key)\r\n                        && (subItem.title === validInsertItems[key].description)\r\n                        // Also we have to match the keys as a whole\r\n                        // For discriminator types, if any key is added with base type, it needs to be filtered out.\r\n                        && !existingKeys.includes(key)\r\n                        && !existingKeys.includes(key.split('-')[0])) {\r\n                        validMenuItems.push(subItem);\r\n                        existingKeys.push(key);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return validMenuItems;\r\n    }\r\n\r\n    private getPathObject(json: any, path: (number | string)[]): any {\r\n        let subTree = json;\r\n        path.forEach((step: number | string) => {\r\n            subTree = subTree[step];\r\n        });\r\n        return subTree;\r\n    }\r\n\r\n    private getValidInsertItems(parentPath: (string | number)[], currentJson: any, node: BaseNode | undefined | null) {\r\n        const key = parentPath[parentPath.length - 1];\r\n        let resultNode = node;\r\n\r\n        /**\r\n         * If dicriminator(parent), resultNode should get from data[`type`]\r\n         */\r\n        if (resultNode?.discriminator) {\r\n            const currentData = this.getPathObject(currentJson, parentPath);\r\n            const typeIndicatorKey = resultNode.discriminator.propertyName;\r\n            const dataType = currentData[typeIndicatorKey];\r\n            resultNode = (resultNode.data as BaseNodes)[dataType];\r\n        }\r\n\r\n        /**\r\n         * When adding items to an Array or a Map,\r\n         * returning a IData object with matching key and description\r\n         */\r\n        if (resultNode instanceof ArrayNode || resultNode instanceof MapNode) {\r\n            if (resultNode.sampleData?.discriminator) {\r\n                // Handle: Association comes with array/map\r\n                const res: any = {};\r\n                this.replaceKeyWithDiscriminatorTypes(res, resultNode.sampleData, `${key}`);\r\n                return res;\r\n            } else {\r\n                // Handle: Sample data for array/map\r\n                const ret = {\r\n                    [`${key}-sample`]: {\r\n                        description: `${key}-sample-${resultNode.description}`\r\n                    }\r\n                }\r\n                return ret;\r\n            }\r\n\r\n            // Handle: Add as property of object\r\n        } else if (resultNode?.data) {\r\n            // Since some nodes might be deleted by the logic below, this object must be cloned.\r\n            const res: any = {};\r\n            Object.entries(resultNode.data).forEach(([key, node]) => {\r\n                res[key] = {\r\n                    description: `${key}-${node.description}`,\r\n                    discriminator: node.discriminator,\r\n                    data: node.data\r\n                }\r\n            });\r\n\r\n            // Handle: Add as property of association type\r\n            Object.entries(res as Record<string, unknown>).forEach(\r\n                ([key, subNode]) => {\r\n                    // if they are descriminator types as data then replace insert items as `type-discriminatorType`\r\n                    if ((subNode as BaseNode).discriminator) {\r\n                        // If discriminator available, then node is a BaseNode\r\n                        this.replaceKeyWithDiscriminatorTypes(res, subNode as BaseNode, key);\r\n                    }\r\n                }\r\n            );\r\n            return res;\r\n        } else {\r\n            message.error(LOCALIZATION.INCONSISTENT_VALUE);\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    private replaceKeyWithDiscriminatorTypes(res: any, node: BaseNode, key: string) {\r\n        delete res[key];\r\n        Object.entries(\r\n            (node as BaseNode).data as Record<string, unknown>\r\n        ).forEach(([subKey, val]) => {\r\n            res[`${key}-${subKey}`] = {\r\n                description: `${key}-${subKey}-${(val as BaseNode).description}`,\r\n            };\r\n        });\r\n    }\r\n}\r\n","import { CogniteClient } from \"@cognite/sdk\";\r\n\r\n\r\nexport class Client {\r\n    public static sdk = new CogniteClient({ appId: 'json-configurator' });\r\n}\r\n","import { HttpRequestOptions, HttpResponse } from \"@cognite/sdk/dist/src\";\r\nimport { Client } from \"../cdf/client\";\r\nimport { Api } from \"./Api\";\r\n\r\nconst cogniteClient = Client.sdk;\r\n\r\nexport class DigitalTwinApi implements Api {\r\n\r\n    public jsonList = async (): Promise<any> => {\r\n        return await cogniteClient.get(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins`)\r\n            .then(response => {\r\n                console.log(\"Retrieved Digital Twin List successfully\");\r\n                const jsonConfigs = response.data.data?.items;\r\n                const jsonConfigIdMap = new Map();\r\n\r\n                for (const jsonConfig of jsonConfigs) {\r\n                    const jsonConfigId = jsonConfig.id;\r\n                    jsonConfigIdMap.set(jsonConfigId, jsonConfig);\r\n                }\r\n                return jsonConfigIdMap;\r\n            });\r\n    }\r\n\r\n    public saveJson = async (json: any): Promise<HttpResponse<any>> => {\r\n\r\n        const options: HttpRequestOptions = {\r\n            data: {\r\n                \"items\": [\r\n                    { \"data\": json }\r\n                ]\r\n            }\r\n        };\r\n\r\n        return await cogniteClient.post(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins`, options);\r\n    }\r\n\r\n    public updateJson = async (configId: number, json: any): Promise<HttpResponse<any>> => {\r\n\r\n        const options: HttpRequestOptions = {\r\n            data: {\r\n                \"items\": [\r\n                    {\r\n                        \"id\": configId,\r\n                        \"data\": json\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n\r\n        return await cogniteClient.post(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins/update`, options);\r\n    }\r\n\r\n    public deleteJson = async (configId: number): Promise<HttpResponse<any>> => {\r\n        const options: HttpRequestOptions = {\r\n            data: {\r\n                \"items\": [\r\n                    configId\r\n                ]\r\n            }\r\n        };\r\n\r\n        return await cogniteClient.post(`${cogniteClient.getBaseUrl()}/api/playground/projects/${cogniteClient.project}/twins/delete`, options)\r\n    }\r\n}\r\n","import { Modes } from \"../userInterface/util/enums/Modes\";\r\nimport { CogniteJsonEditor } from \"./CogniteJsonEditor\";\r\nimport { CogniteJsonEditorOptions } from \"./CogniteJsonEditorOptions\";\r\nimport { loadSchema } from \"../validator/Validator\";\r\nimport { saveAs } from 'file-saver';\r\nimport { DigitalTwinApi } from \"./DigitalTwinApi\";\r\nimport { Api } from \"./Api\";\r\nimport { LOCALIZATION } from \"../constants\";\r\nimport { JSONEditorMode } from \"jsoneditor\";\r\n\r\nexport class JsonConfigCommandCenter {\r\n    public static titleUpdateCallback: (text: string, mode: JSONEditorMode) => void;\r\n    public static getOriginalJsonConfig: () => any;\r\n    public static hasErrors = false;\r\n    private static editorInstance: CogniteJsonEditor;\r\n    private static apiInstance: Api;\r\n\r\n    public static async createEditor(elm: HTMLElement): Promise<void> {\r\n        await loadSchema();\r\n        JsonConfigCommandCenter.apiInstance = new DigitalTwinApi();\r\n        const options = new CogniteJsonEditorOptions();\r\n        JsonConfigCommandCenter.editorInstance = new CogniteJsonEditor(elm, options);\r\n    }\r\n\r\n    public static get editor(): CogniteJsonEditor | null {\r\n        if (JsonConfigCommandCenter.editorInstance) {\r\n            return JsonConfigCommandCenter.editorInstance;\r\n        } else {\r\n            console.error(\"Cannot retrieve editor before instantiation!\");\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static get api(): Api {\r\n        if (!JsonConfigCommandCenter.apiInstance) {\r\n            JsonConfigCommandCenter.apiInstance = new DigitalTwinApi();\r\n        }\r\n        return JsonConfigCommandCenter.apiInstance;\r\n    }\r\n\r\n    public static get currentJson(): any {\r\n        const currentJsonText = JsonConfigCommandCenter.editor?.getText();\r\n        let currentJson;\r\n        if (currentJsonText) {\r\n            try {\r\n                currentJson = JSON.parse(currentJsonText);\r\n            } catch (e: any) {\r\n                console.error(\"Error occurred while parsing json!\", e);\r\n            }\r\n        }\r\n        return currentJson;\r\n    }\r\n\r\n    public static get currentFileName(): string {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        return currentJson?.header?.name;\r\n    }\r\n\r\n    // is local file is edited\r\n    public static isEdited(): boolean {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        const originalJsonConfig = JsonConfigCommandCenter.getOriginalJsonConfig();\r\n        if (currentJson) {\r\n            if (originalJsonConfig === null) {\r\n                return !!Object.keys(currentJson).length;\r\n            }\r\n            else {\r\n                return !!(JSON.stringify(originalJsonConfig) !== JSON.stringify(currentJson));\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public static updateTitle = (): void => {\r\n        if (JsonConfigCommandCenter.editor && JsonConfigCommandCenter.titleUpdateCallback && JsonConfigCommandCenter.getOriginalJsonConfig) {\r\n            const edited = JsonConfigCommandCenter.isEdited();\r\n            const currentTitle = (edited ? '*' : '') + (JsonConfigCommandCenter.currentFileName || LOCALIZATION.UNTITLED);\r\n            const currentMode = JsonConfigCommandCenter.editor?.getMode();\r\n            JsonConfigCommandCenter.titleUpdateCallback(currentTitle, currentMode);\r\n        }\r\n    }\r\n\r\n    public static loadJsonConfigs = async (): Promise<any> => {\r\n        return await JsonConfigCommandCenter.api.jsonList();\r\n    }\r\n\r\n    public static onModeChange(mode: Modes): void {\r\n        if (JsonConfigCommandCenter.editor) {\r\n            JsonConfigCommandCenter.editor.setMode(mode);\r\n        }\r\n    }\r\n\r\n    public static onSaveAs = async (): Promise<any> => {\r\n        const currentJson = JsonConfigCommandCenter.currentJson;\r\n        return await JsonConfigCommandCenter.api.saveJson(currentJson);\r\n    }\r\n\r\n    public static onUpdate = async (selectedJsonConfigId: number | null, args: any): Promise<any> => {\r\n        let currentJson = JsonConfigCommandCenter.currentJson;\r\n        // overide currentJson with resolved one\r\n        if (args) {\r\n            currentJson = args;\r\n        }\r\n\r\n        if (selectedJsonConfigId) {\r\n            return await JsonConfigCommandCenter.api.updateJson(selectedJsonConfigId, currentJson);\r\n        }\r\n    }\r\n\r\n    public static onDelete = async (selectedJsonConfigId: number | null): Promise<any> => {\r\n        if (selectedJsonConfigId) {\r\n            return await JsonConfigCommandCenter.api.deleteJson(selectedJsonConfigId);\r\n        }\r\n    }\r\n\r\n    public static onDownload = (): void => {\r\n        const currentJson = JSON.stringify(JsonConfigCommandCenter.currentJson);\r\n        let fileName = JsonConfigCommandCenter.currentFileName;\r\n        if (!fileName || fileName === \"\") {\r\n            fileName = \"Untitled Json Config\";\r\n        }\r\n        const blob = new Blob([currentJson], { type: 'application/json;charset=utf-8' });\r\n        saveAs(blob, fileName);\r\n    }\r\n}\r\n","export enum Modes {\r\n    default = \"tree\",\r\n    paste = \"code\",\r\n}\r\n","import React from 'react';\r\nimport Button from \"antd/es/button\";\r\nimport styles from \"./CommandItem.module.scss\";\r\n\r\nexport const CommandItem: React.FC<{ className?: string, onClick?: () => void, icon?: string }> = (props) => {\r\n    return (<Button type=\"primary\" className={`${styles.commandBtn} ${props.className}`}\r\n                    icon={props.icon}\r\n                    size=\"large\"\r\n                    onClick={props.onClick}>\r\n            {props.children}\r\n    </Button>);\r\n}\r\n","import React, { useState } from 'react';\r\nimport classes from './CommandPanel.module.scss';\r\nimport { CommandItem } from '../../components/CommandItem/CommandItem';\r\nimport Switch from 'antd/es/switch';\r\nimport message from 'antd/es/message';\r\nimport Modal from 'antd/es/modal';\r\nimport { CommandEvent } from \"../../util/Interfaces/CommandEvent\";\r\nimport { Modes } from \"../../util/enums/Modes\";\r\nimport { JsonConfigCommandCenter } from '../../../core/JsonConfigCommandCenter';\r\nimport { ExclamationCircleTwoTone, WarningTwoTone } from '@ant-design/icons';\r\nimport { extractErrorMessage } from '../JsonConfigurator/JsonConfigurator';\r\nimport { LOCALIZATION } from '../../../constants';\r\nimport { JSONEditorMode } from \"jsoneditor\";\r\nimport { JsonConfig, MergeOptions } from '../../util/types';\r\n\r\nconst { confirm } = Modal;\r\n\r\nconst isUpdated = async (selectedJsonConfigId: number | null): Promise<boolean> => {\r\n    if (selectedJsonConfigId) {\r\n        const originalJsonConfig = JsonConfigCommandCenter.getOriginalJsonConfig();\r\n        const updatedJsonConfig = await JsonConfigCommandCenter.loadJsonConfigs()\r\n            .then(response => {\r\n                if (response) {\r\n                    const selectedJsonConfig = response.get(selectedJsonConfigId);\r\n                    if (selectedJsonConfig) {\r\n                        return (selectedJsonConfig as JsonConfig).data;\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                message.error(LOCALIZATION.RETRIEVE_CONFIGS_FAIL.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n            });\r\n        return (JSON.stringify(originalJsonConfig) !== JSON.stringify(updatedJsonConfig));\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const CommandPanel: React.FC<{\r\n    commandEvent: (commandEvent: CommandEvent, ...args: any[]) => void,\r\n    reloadJsonConfigs: (jsonConfigId: number | null) => void,\r\n    setMergeOptions: (options: MergeOptions) => void\r\n    selectedJsonConfigId: number | null\r\n}> = (props: any) => {\r\n    const [title, setTitle] = useState(LOCALIZATION.UNTITLED);\r\n    const [mode, setMode] = useState('tree');\r\n\r\n    const titleUpdateCallBack = (text: string, mode: JSONEditorMode) => {\r\n        setTitle(text);\r\n        setMode(mode);\r\n    };\r\n    JsonConfigCommandCenter.titleUpdateCallback = titleUpdateCallBack;\r\n\r\n    const onModeSwitch = (checked: boolean, evt: any) => {\r\n        if (checked) {\r\n            setMode(Modes.paste);\r\n            props.commandEvent(CommandEvent.mode, Modes.paste, evt);\r\n        } else {\r\n            setMode(Modes.default);\r\n            props.commandEvent(CommandEvent.mode, Modes.default, evt);\r\n        }\r\n    }\r\n\r\n    const onReloadHandler = async () => {\r\n        if (await isUpdated(props.selectedJsonConfigId)) {\r\n            if (JsonConfigCommandCenter.isEdited()) {\r\n                props.setMergeOptions({\r\n                    localConfig: JsonConfigCommandCenter.currentJson,\r\n                    serverConfig: await JsonConfigCommandCenter.loadJsonConfigs()\r\n                        .then(response => {\r\n                            if (response) {\r\n                                return response.get(props.selectedJsonConfigId).data;\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            message.error(LOCALIZATION.RETRIEVE_CONFIGS_FAIL.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                        }),\r\n                    saveAfterMerge: false,\r\n                    onOk: (mergedJson: any) => {\r\n                        props.commandEvent(CommandEvent.reload, mergedJson);\r\n                        message.success(LOCALIZATION.REFRESH_SUCCESS);\r\n                    },\r\n                    onCancel: () => {\r\n                        message.warning(LOCALIZATION.REFRESH_ERROR);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                props.commandEvent(CommandEvent.reload);\r\n            }\r\n        }\r\n        else {\r\n            props.commandEvent(CommandEvent.reload, JsonConfigCommandCenter.currentJson);\r\n        }\r\n    }\r\n\r\n    const save = () => {\r\n        props.commandEvent(CommandEvent.saveAs)\r\n            .then((response: any) => {\r\n                const createdId = response.data.data.items[0].id;\r\n                props.reloadJsonConfigs(createdId);\r\n                JsonConfigCommandCenter.updateTitle();\r\n                message.success(LOCALIZATION.SAVE_SUCCESS);\r\n            })\r\n            .catch((error: any) => {\r\n                message.error(LOCALIZATION.SAVE_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n            });\r\n    }\r\n\r\n    const onSaveHandler = () => {\r\n        if (JsonConfigCommandCenter.hasErrors) {\r\n            confirm({\r\n                title: LOCALIZATION.SAVE_WITH_ERRORS_TITLE,\r\n                icon: <WarningTwoTone twoToneColor=\"#faad14\" />,\r\n                content: LOCALIZATION.SAVE_WITH_ERRORS_CONTENT,\r\n                onOk() {\r\n                    save();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.SAVE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            confirm({\r\n                title: LOCALIZATION.SAVE_TITLE,\r\n                icon: <ExclamationCircleTwoTone />,\r\n                content: LOCALIZATION.SAVE_CONTENT,\r\n                onOk() {\r\n                    save();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.SAVE_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    const update = async () => {\r\n        if (await isUpdated(props.selectedJsonConfigId)) {\r\n            props.setMergeOptions({\r\n                localConfig: JsonConfigCommandCenter.currentJson,\r\n                serverConfig: await JsonConfigCommandCenter.loadJsonConfigs()\r\n                    .then(response => {\r\n                        if (response) {\r\n                            return response.get(props.selectedJsonConfigId).data;\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        message.error(LOCALIZATION.RETRIEVE_CONFIGS_FAIL.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                    }),\r\n                saveAfterMerge: true,\r\n                onOk: (mergedJson: any) => {\r\n                    props.commandEvent(CommandEvent.update, mergedJson)\r\n                        .then((response: any) => {\r\n                            const createdId = response.data.data.items[0].id;\r\n                            props.reloadJsonConfigs(createdId);\r\n                            JsonConfigCommandCenter.updateTitle();\r\n                            message.success(LOCALIZATION.UPLOAD_SUCCESS);\r\n                        })\r\n                        .catch((error: any) => {\r\n                            message.error(LOCALIZATION.UPLOAD_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                        });\r\n                },\r\n                onCancel: () => {\r\n                    message.warning(LOCALIZATION.UPLOAD_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            props.commandEvent(CommandEvent.update)\r\n                .then((response: any) => {\r\n                    const createdId = response.data.data.items[0].id;\r\n                    props.reloadJsonConfigs(createdId);\r\n                    JsonConfigCommandCenter.updateTitle();\r\n                    message.success(LOCALIZATION.UPLOAD_SUCCESS);\r\n                })\r\n                .catch((error: any) => {\r\n                    message.error(LOCALIZATION.UPLOAD_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                });\r\n        }\r\n    }\r\n\r\n    const onUpdateHandler = () => {\r\n        if (JsonConfigCommandCenter.hasErrors) {\r\n            confirm({\r\n                title: LOCALIZATION.UPLOAD_WITH_ERRORS_TITLE,\r\n                icon: <WarningTwoTone twoToneColor=\"#faad14\" />,\r\n                content: LOCALIZATION.UPLOAD_WITH_ERRORS_CONTENT,\r\n                async onOk() {\r\n                    update();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.UPLOAD_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            confirm({\r\n                title: LOCALIZATION.UPLOAD_TITLE,\r\n                icon: <ExclamationCircleTwoTone />,\r\n                content: LOCALIZATION.UPLOAD_CONTENT,\r\n                async onOk() {\r\n                    update();\r\n                },\r\n                onCancel() {\r\n                    message.warning(LOCALIZATION.UPLOAD_ERROR.replace('{{error}}', ''));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    const onDeleteHandler = () => {\r\n        confirm({\r\n            title: LOCALIZATION.DELETE_TITLE,\r\n            icon: <WarningTwoTone twoToneColor=\"#ff4d4f\" />,\r\n            content: LOCALIZATION.DELETE_CONTENT,\r\n            onOk() {\r\n                props.commandEvent(CommandEvent.delete)\r\n                    .then(() => {\r\n                        props.reloadJsonConfigs(null);\r\n                        message.success(LOCALIZATION.DELETE_SUCCESS);\r\n                    })\r\n                    .catch((error: any) => {\r\n                        message.error(LOCALIZATION.DELETE_ERROR.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                    });\r\n            },\r\n            onCancel() {\r\n                message.warn(LOCALIZATION.DELETE_ERROR.replace('{{error}}', ''));\r\n            },\r\n            okType: 'danger',\r\n        });\r\n    }\r\n\r\n    const onDownloadHandler = () => {\r\n        props.commandEvent(CommandEvent.download);\r\n    }\r\n\r\n    return (\r\n        <div className={classes.commandsContainer}>\r\n            <div className={classes.leftPanel}>\r\n                <span>Switch Mode:</span>\r\n                <Switch checkedChildren=\"code\" unCheckedChildren=\"tree\" checked={mode === 'code'} onChange={onModeSwitch} />\r\n            </div>\r\n            <div className={classes.titlePanel}>\r\n                <span className={classes.titleText}>{title}</span>\r\n            </div>\r\n            <div className={classes.rightPanel}>\r\n                <CommandItem className={classes.btn} icon={\"reload\"} onClick={onReloadHandler}>Reload</CommandItem>\r\n                {props.selectedJsonConfigId && <CommandItem className={classes.btn} icon={\"save\"} onClick={onUpdateHandler}>Save</CommandItem>}\r\n                <CommandItem className={classes.btn} icon={\"upload\"} onClick={onSaveHandler}>Save As New</CommandItem>\r\n                <CommandItem className={classes.btn} icon={\"download\"} onClick={onDownloadHandler}>Download</CommandItem>\r\n                {props.selectedJsonConfigId && <CommandItem className={classes.btn} icon={\"delete\"} onClick={onDeleteHandler}>Delete</CommandItem>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport classes from './ConfigSelector.module.scss';\r\nimport List from 'antd/es/list';\r\n\r\nexport const ConfigSelector: React.FC<{\r\n    onJsonConfigSelectHandler: (id: number | null) => void,\r\n    jsonConfigMap: Map<number, unknown> | null,\r\n    selectedJsonConfigId: number | null\r\n}> = (props) => {\r\n\r\n    const jsonConfigs: { id: number, name: string }[] = [];\r\n\r\n    props.jsonConfigMap?.forEach((element: any) => {\r\n        jsonConfigs.push({\r\n            id: element.id,\r\n            name: element.data?.header?.name\r\n        });\r\n    });\r\n\r\n    if (jsonConfigs.length) {\r\n        return (\r\n            <List\r\n                bordered\r\n                dataSource={jsonConfigs}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                        className={`${classes.jsonConfigItem} ` + (item.id === props.selectedJsonConfigId ? classes.selected : \"\")}\r\n                        onClick={() => props.onJsonConfigSelectHandler(item.id)}\r\n                        key={item.id}\r\n                    >\r\n                        {item.name}\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        );\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport classes from './SideNavPanel.module.scss';\r\nimport logo from \"../../../assets/cognite.png\";\r\nimport { ConfigSelector } from '../../components/ConfigSelector/ConfigSelector';\r\nimport Divider from \"antd/es/divider\";\r\nimport Text from \"antd/es/typography/Text\";\r\nimport { CommandEvent } from '../../util/Interfaces/CommandEvent';\r\nimport { JsonConfigCommandCenter } from '../../../core/JsonConfigCommandCenter';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport Modal from 'antd/es/modal';\r\nimport { CommandItem } from '../../components/CommandItem/CommandItem';\r\nimport { LOCALIZATION } from '../../../constants';\r\n\r\nconst { confirm } = Modal;\r\n\r\nexport const SideNavPanel: React.FC<{\r\n    commandEvent: (commandEvent: CommandEvent, ...args: any[]) => void,\r\n    jsonConfigMap: Map<number, unknown> | null,\r\n    selectedJsonConfigId: number | null\r\n}> = (props: any) => {\r\n\r\n    const onJsonConfigSelectHandler = (id: number | null) => {\r\n        if (JsonConfigCommandCenter.isEdited()) {\r\n            confirm({\r\n                title: LOCALIZATION.SWITCH_TITLE,\r\n                icon: <ExclamationCircleOutlined />,\r\n                content: LOCALIZATION.SWITCH_CONTENT,\r\n                onOk() {\r\n                    props.commandEvent(CommandEvent.switchConfig, id);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            props.commandEvent(CommandEvent.switchConfig, id);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.top}>\r\n                <div>\r\n                    <img alt=\"cognite-logo\" src={logo} className={classes.logo} />\r\n                </div>\r\n                <Text strong className={classes.title}>Cognite Remote Configurator</Text>\r\n            </div>\r\n            <Divider />\r\n            <div className={classes.createNewBtn}>\r\n                <CommandItem className={classes.btn} icon={\"plus\"} onClick={() => onJsonConfigSelectHandler(null)}>Create New</CommandItem>\r\n            </div>\r\n            <div>\r\n                <Text strong>Configurations</Text>\r\n                <div className={classes.jsonConfigContainer}>\r\n                    <ConfigSelector\r\n                        onJsonConfigSelectHandler={onJsonConfigSelectHandler}\r\n                        jsonConfigMap={props.jsonConfigMap}\r\n                        selectedJsonConfigId={props.selectedJsonConfigId}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","export default \"data:image/png;base64,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\"","import React, { useEffect, useRef } from \"react\";\r\nimport \"./JsonEditorContainer.scss\";\r\nimport { JsonConfigCommandCenter } from \"../../../core/JsonConfigCommandCenter\";\r\n\r\nexport function JsonEditorContainer(props: { json: any }): JSX.Element {\r\n    const jsonEditorElm = useRef<HTMLDivElement | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (jsonEditorElm.current !== null) {\r\n            // create the editor\r\n            JsonConfigCommandCenter.createEditor(jsonEditorElm.current);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const editor = JsonConfigCommandCenter.editor;\r\n        if (editor) {\r\n            editor.set(props.json);\r\n            JsonConfigCommandCenter.updateTitle();\r\n        }\r\n    }, [props.json]);\r\n\r\n\r\n    return (<div className=\"json-editor-container\" ref={jsonEditorElm} />);\r\n}\r\n","import React from 'react';\r\nimport classes from './EditorPanel.module.scss'\r\nimport { JsonEditorContainer } from \"../../components/JsonEditorContainer/JsonEditorContainer\";\r\nimport { JsonConfig } from \"../../util/types\";\r\n\r\nexport const EditorPanel: React.FC<{ jsonConfig: JsonConfig | null }> = (props: any) => {\r\n\r\n    return (\r\n        <div className={classes.jsonView}>\r\n            <JsonEditorContainer json={props.jsonConfig?.data} />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport Button from \"antd/es/button\";\r\nimport classes from \"../../panels/JsonConfigurator/JsonConfigurator.module.scss\";\r\nimport { Modal } from \"antd\";\r\nimport AceDiff from \"ace-diff\";\r\nimport styles from \"./DiffMerge.module.scss\";\r\n\r\nconst getJson = (mergedJsonString: string) => {\r\n    let mergedJson;\r\n    try {\r\n        mergedJson = JSON.parse(mergedJsonString);\r\n    } catch (e: any) {\r\n        console.error(\"Error Occurred while parsing json!\");\r\n    }\r\n    return mergedJson\r\n}\r\n\r\nexport function DiffMerge(props: { setShowMerge: (state: boolean) => void, showPopup: boolean, serverJson: any, localJson: any, saveAfterMerge: boolean, onMerge: (mergedJsonString: string) => void, onCancel: () => void }) {\r\n\r\n    const serverJson = JSON.stringify(props.serverJson, null, 2);\r\n    const localJson = JSON.stringify(props.localJson, null, 2);\r\n    const differInstance = useRef<AceDiff | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (props.showPopup) {\r\n            setTimeout(() => {\r\n                const differ = new AceDiff({\r\n                    element: '.acediff',\r\n                    left: {\r\n                        content: serverJson\r\n                    },\r\n                    right: {\r\n                        content: localJson\r\n                    },\r\n                });\r\n                differInstance.current = differ;\r\n            }, 350);\r\n        }\r\n    }, [props.showPopup])\r\n\r\n    const handleCancelMerge = () => {\r\n        props.onCancel();\r\n        props.setShowMerge(false);\r\n    }\r\n\r\n    const handleLeftMerge = () => {\r\n        const differ = differInstance.current;\r\n        if (differ) {\r\n            const mergedJsonString = differ.getEditors().left.getValue();\r\n            const mergedJson = getJson(mergedJsonString);\r\n            props.onMerge(mergedJson);\r\n        }\r\n        props.setShowMerge(false);\r\n    }\r\n\r\n    const handleRightMerge = () => {\r\n        const differ = differInstance.current;\r\n        if (differ) {\r\n            const mergedJsonString = differ.getEditors().right.getValue();\r\n            const mergedJson = getJson(mergedJsonString);\r\n            props.onMerge(mergedJson);\r\n        }\r\n        props.setShowMerge(false);\r\n    }\r\n\r\n\r\n    return (\r\n        <Modal\r\n            title=\"Merge Versions\"\r\n            visible={props.showPopup}\r\n            onCancel={handleCancelMerge}\r\n            width={1050}\r\n            footer={\r\n                [\r\n                    <Button key=\"left\" onClick={handleLeftMerge}>Accept Server Version {props.saveAfterMerge ? 'and Save' : ''}</Button>,\r\n                    <Button key=\"your\" onClick={handleRightMerge}>Accept Local Version {props.saveAfterMerge ? 'and Save' : ''}</Button>\r\n                ]\r\n            }\r\n        >\r\n            <div className={styles.editorLblContainer}>\r\n                <span className=\"editor-lbl\"> Server Version</span>\r\n                <span className=\"editor-lbl\"> Local Version</span>\r\n            </div>\r\n            <div className={`${classes.mergePrompt} acediff`}></div>\r\n        </Modal>\r\n    );\r\n}","import React, { useEffect, useRef, useState } from 'react';\r\nimport classes from './JsonConfigurator.module.scss'\r\nimport { JsonConfig, MergeOptions } from \"../../util/types\";\r\nimport { CommandEvent } from \"../../util/Interfaces/CommandEvent\";\r\nimport { JsonConfigCommandCenter } from \"../../../core/JsonConfigCommandCenter\";\r\nimport { CommandPanel } from \"../CommandPanel/CommandPanel\";\r\nimport { SideNavPanel } from '../SideNavPanel/SideNavPanel';\r\nimport { EditorPanel } from '../EditorPanel/EditorPanel';\r\nimport message from 'antd/es/message';\r\nimport { DiffMerge } from \"../../components/DiffMerge/DiffMerge\";\r\nimport { LOCALIZATION, USE_LOCAL_FILES_AND_NO_LOGIN } from '../../../constants';\r\nimport localJsonFile from '../../../config/MauiA.json';\r\n\r\nexport const extractErrorMessage = (error: string): string => {\r\n    const errorMsg = `${error}`.split(\" | \")[0].split(\": \")[1];\r\n    console.error(error);\r\n    return errorMsg;\r\n}\r\n\r\nexport const JsonConfigurator: React.FC<any> = () => {\r\n    const [jsonConfigMap, setJsonConfigMap] = useState<Map<number, unknown> | null>(null);\r\n    const [selectedJsonConfigId, setSelectedJsonConfigId] = useState<number | null>(null);\r\n    const [jsonConfig, setJsonConfig] = useState<JsonConfig | null>(null);\r\n    const [originalJsonConfig, setOriginalJsonConfig] = useState<any | null>(null);\r\n    const [showMerge, setShowMerge] = useState<boolean>(false);\r\n    const compareJsons = useRef<{ currentJson: string, newJson: string }>();\r\n    const handleOkMerge = useRef<any>(() => { console.log('not set'); });\r\n    const handleCancelMerge = useRef<any>(() => null);\r\n    const saveAfterMerge = useRef<boolean>(false);\r\n\r\n    const loadJsonConfigs = async (jsonConfigId?: number | null, resolvedJson?: any) => {\r\n        const jsonConfigs = await JsonConfigCommandCenter.loadJsonConfigs()\r\n            .then(response => response)\r\n            .catch(error => {\r\n                message.error(LOCALIZATION.RETRIEVE_CONFIGS_FAIL.replace('{{error}}', `${extractErrorMessage(error)}`));\r\n                if (USE_LOCAL_FILES_AND_NO_LOGIN) {\r\n                    const map = new Map().set(123, { id: 123, data: localJsonFile });\r\n                    setJsonConfigMap(map);\r\n                }\r\n            });\r\n        setJsonConfigMap(jsonConfigs);\r\n\r\n        if (jsonConfigId) {\r\n            setSelectedJsonConfig(jsonConfigId, jsonConfigs, resolvedJson);\r\n        }\r\n    }\r\n\r\n    // call with undefind values to create new json config\r\n    const setSelectedJsonConfig = (jsonConfigId: number | null, jsonConfigs?: Map<number, unknown> | null, resolvedJson?: any) => {\r\n        if (jsonConfigId) {\r\n            let selectedJsonConfig;\r\n            if (jsonConfigs) {\r\n                selectedJsonConfig = jsonConfigs.get(jsonConfigId);\r\n            }\r\n            else if (jsonConfigMap && jsonConfigMap.size > 0) {\r\n                selectedJsonConfig = jsonConfigMap.get(jsonConfigId);\r\n            }\r\n\r\n            // set new json config and Original\r\n            if (selectedJsonConfig) {\r\n                setJsonConfig(selectedJsonConfig as JsonConfig);\r\n                setOriginalJsonConfig((selectedJsonConfig as JsonConfig).data);\r\n            }\r\n            // overide if it has resolved version\r\n            if (resolvedJson) {\r\n                setJsonConfig({\r\n                    data: resolvedJson\r\n                } as JsonConfig);\r\n            }\r\n            setSelectedJsonConfigId(jsonConfigId);\r\n        }\r\n        else {\r\n            setJsonConfig({\r\n                data: {}\r\n            } as JsonConfig);\r\n            setSelectedJsonConfigId(null);\r\n            setOriginalJsonConfig(null);\r\n        }\r\n        JsonConfigCommandCenter.updateTitle();\r\n    }\r\n\r\n    const setMergeOptions = (options: MergeOptions) => {\r\n        compareJsons.current = { currentJson: options.localConfig, newJson: options.serverConfig };\r\n        saveAfterMerge.current = options.saveAfterMerge;\r\n        handleOkMerge.current = options.onOk;\r\n        handleCancelMerge.current = options.onCancel;\r\n        setShowMerge(true);\r\n    }\r\n\r\n    const reloadJsonConfigs = (jsonConfigId: number | null) => {\r\n        loadJsonConfigs(jsonConfigId);\r\n    }\r\n\r\n    JsonConfigCommandCenter.getOriginalJsonConfig = () => {\r\n        return originalJsonConfig;\r\n    };\r\n\r\n    const onCommand = async (command: CommandEvent, ...args: any[]): Promise<any> => {\r\n        switch (command) {\r\n            case CommandEvent.mode: {\r\n                JsonConfigCommandCenter.onModeChange(args[0]);\r\n                break;\r\n            }\r\n            case CommandEvent.reload: {\r\n                loadJsonConfigs(selectedJsonConfigId, args[0]);\r\n                break;\r\n            }\r\n            case CommandEvent.switchConfig: {\r\n                setSelectedJsonConfig(args[0]);\r\n                break;\r\n            }\r\n            case CommandEvent.saveAs: {\r\n                return await JsonConfigCommandCenter.onSaveAs();\r\n            }\r\n            case CommandEvent.update: {\r\n                return await JsonConfigCommandCenter.onUpdate(selectedJsonConfigId, args[0]);\r\n            }\r\n            case CommandEvent.delete: {\r\n                return await JsonConfigCommandCenter.onDelete(selectedJsonConfigId);\r\n            }\r\n            case CommandEvent.download: {\r\n                JsonConfigCommandCenter.onDownload();\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"beforeunload\", function (e) {\r\n            if (JsonConfigCommandCenter.isEdited()) {\r\n                (e || window.event).returnValue = true; //Gecko + IE\r\n                return true; //Gecko + Webkit, Safari, Chrome etc.\r\n            }\r\n            return false;\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        loadJsonConfigs();\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.configurator}>\r\n            <div className={classes.sideNavPanel}>\r\n                <SideNavPanel\r\n                    commandEvent={onCommand}\r\n                    jsonConfigMap={jsonConfigMap}\r\n                    selectedJsonConfigId={selectedJsonConfigId} />\r\n            </div>\r\n            <div className={classes.fullEditor}>\r\n                <div className={classes.editorCommandContainer}>\r\n                    <CommandPanel\r\n                        commandEvent={onCommand}\r\n                        reloadJsonConfigs={reloadJsonConfigs}\r\n                        setMergeOptions={setMergeOptions}\r\n                        selectedJsonConfigId={selectedJsonConfigId}\r\n                    />\r\n                    <EditorPanel jsonConfig={jsonConfig} />\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <DiffMerge\r\n                    setShowMerge={setShowMerge}\r\n                    showPopup={showMerge}\r\n                    serverJson={compareJsons.current?.newJson}\r\n                    localJson={compareJsons.current?.currentJson}\r\n                    onMerge={handleOkMerge.current}\r\n                    onCancel={handleCancelMerge.current}\r\n                    saveAfterMerge={saveAfterMerge.current}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useEffect} from \"react\";\r\nimport { CogniteClient, isLoginPopupWindow, loginPopupHandler, POPUP } from \"@cognite/sdk\";\r\nimport { ClientSDKProvider, PureObject, TenantSelector } from \"@cognite/gearbox\";\r\nimport styles from \"./TenantLogin.module.scss\";\r\nimport {\r\n    APP_NAME,\r\n    DEV_MODE,\r\n    LOGIN_API_KEY_TEXT,\r\n    LOGIN_CDF_ENVIRONMENT_OPT_TEXT,\r\n    LOGIN_HEADER\r\n} from \"../../../constants\";\r\nimport {Client} from \"../../../cdf/client\";\r\n\r\nexport function TenantLogin(props: {\r\n    children: any\r\n    sdk: CogniteClient,\r\n    signedIn: boolean,\r\n    onLogin: (...status: any) => void,\r\n    authOptions: { project?: string, apiKey?: string, oauthToken?: string }\r\n}): JSX.Element | null {\r\n\r\n    const advancedOptions = { [LOGIN_CDF_ENVIRONMENT_OPT_TEXT]: '', [LOGIN_API_KEY_TEXT]: ''};\r\n\r\n    useEffect(() => {\r\n        if (DEV_MODE) {\r\n            Client.sdk.loginWithOAuth({\r\n                project: process.env.REACT_APP_PROJECT || '',\r\n                accessToken: localStorage.getItem('token') || '',\r\n                onAuthenticate: (login: any) => {\r\n                    login.skip();\r\n                },\r\n                onTokens: ({accessToken}) => {\r\n                    localStorage.setItem(\"token\", accessToken);\r\n                },\r\n            });\r\n            Client.sdk.authenticate();\r\n            props.onLogin(true);\r\n        }\r\n    }, []);\r\n\r\n    if (isLoginPopupWindow()) {\r\n        loginPopupHandler();\r\n        return null;\r\n    }\r\n\r\n    const oninvalidTenant = (value: any) => {\r\n        console.error(\"Tenant Error\", value);\r\n    };\r\n\r\n    const onFinish = async (project: string, options: PureObject | null) => {\r\n        if(project){\r\n            const cdfEnv = options && options[LOGIN_CDF_ENVIRONMENT_OPT_TEXT];\r\n            const apiKey = options && options[LOGIN_API_KEY_TEXT];\r\n            if(cdfEnv) {\r\n                props.sdk.setBaseUrl(`https://${cdfEnv}.cognitedata.com`);\r\n            }\r\n            const savedToken = localStorage.getItem(\"token\") || \"\";\r\n\r\n            if(apiKey) {\r\n                props.sdk.loginWithApiKey({\r\n                    project: project,\r\n                    apiKey: String(apiKey)\r\n                });\r\n            } else {\r\n                props.sdk.loginWithOAuth({\r\n                    project: project,\r\n                    accessToken: savedToken,\r\n                    onAuthenticate: POPUP,\r\n                    onTokens: ({accessToken}) => {\r\n                        localStorage.setItem(\"token\", accessToken);\r\n                    },\r\n                });\r\n                await props.sdk.authenticate();\r\n            }\r\n\r\n            const status = await props.sdk.login.status();\r\n            if(status?.user){\r\n                props.onLogin(true);\r\n            }\r\n        }\r\n        console.log('Success:', project);\r\n        return true;\r\n    };\r\n\r\n    if (props.signedIn) {\r\n        return <>{props.children}</>;\r\n    } else {\r\n        // return <CustomLogin sdk={props.sdk} onLogin={props.onLogin} />;\r\n        return (\r\n            <div className={styles.loginContainer}>\r\n                <ClientSDKProvider client={props.sdk}>\r\n                    <TenantSelector\r\n                        title={APP_NAME}\r\n                        header={LOGIN_HEADER}\r\n                        onTenantSelected={onFinish}\r\n                        advancedOptions={advancedOptions}\r\n                        onInvalidTenant={oninvalidTenant}/>\r\n                </ClientSDKProvider>\r\n            </div>);\r\n    }\r\n}\r\n","import React, { useState } from 'react';\r\nimport './App.scss';\r\nimport { JsonConfigurator } from './panels/JsonConfigurator/JsonConfigurator';\r\nimport { Client } from \"../cdf/client\";\r\nimport { TenantLogin } from \"./components/TenantLogin/TenantLogin\";\r\nimport { USE_LOCAL_FILES_AND_NO_LOGIN } from '../constants';\r\n\r\nconst cogniteClient = Client.sdk;\r\n\r\nfunction App(props: { auth?: { project?: string, apiKey?: string, oauthToken?: string}}): JSX.Element {\r\n    const authOptions = props.auth || {};\r\n    const [signedIn, setSignIn] = useState(false);\r\n    const onSignIn = (status: boolean) => {\r\n        if(status) {\r\n            setSignIn(true);\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n        {USE_LOCAL_FILES_AND_NO_LOGIN ? <JsonConfigurator /> :\r\n        <TenantLogin signedIn={signedIn} onLogin={onSignIn} sdk={cogniteClient} authOptions={authOptions}>\r\n            <JsonConfigurator />\r\n        </TenantLogin>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './userInterface/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}